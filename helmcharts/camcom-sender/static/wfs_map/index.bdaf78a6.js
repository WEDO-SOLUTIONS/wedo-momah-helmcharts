function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequire0936;null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},n.parcelRequire0936=o),o.register("1b2ls",(function(e,n){var r,i,s;t(e.exports,"Fragment",(()=>r),(t=>r=t)),t(e.exports,"jsx",(()=>i),(t=>i=t)),t(e.exports,"jsxs",(()=>s),(t=>s=t));var a=o("acw62"),u=Symbol.for("react.element"),l=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,h=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function p(t,e,n){var r,i={},o=null,s=null;for(r in void 0!==n&&(o=""+n),void 0!==e.key&&(o=""+e.key),void 0!==e.ref&&(s=e.ref),e)c.call(e,r)&&!f.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:u,type:t,key:o,ref:s,props:i,_owner:h.current}}r=l,i=p,s=p})),o.register("acw62",(function(t,e){t.exports=o("2pUnB")})),o.register("2pUnB",(function(e,n){var r,i,o,s,a,u,l,c,h,f,p,d,g,y,v,m,_,x,b,E,w,M,S,C,N,I,P,L,O,R,k,T,A,D,F;t(e.exports,"Children",(()=>r),(t=>r=t)),t(e.exports,"Component",(()=>i),(t=>i=t)),t(e.exports,"Fragment",(()=>o),(t=>o=t)),t(e.exports,"Profiler",(()=>s),(t=>s=t)),t(e.exports,"PureComponent",(()=>a),(t=>a=t)),t(e.exports,"StrictMode",(()=>u),(t=>u=t)),t(e.exports,"Suspense",(()=>l),(t=>l=t)),t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(()=>c),(t=>c=t)),t(e.exports,"cloneElement",(()=>h),(t=>h=t)),t(e.exports,"createContext",(()=>f),(t=>f=t)),t(e.exports,"createElement",(()=>p),(t=>p=t)),t(e.exports,"createFactory",(()=>d),(t=>d=t)),t(e.exports,"createRef",(()=>g),(t=>g=t)),t(e.exports,"forwardRef",(()=>y),(t=>y=t)),t(e.exports,"isValidElement",(()=>v),(t=>v=t)),t(e.exports,"lazy",(()=>m),(t=>m=t)),t(e.exports,"memo",(()=>_),(t=>_=t)),t(e.exports,"startTransition",(()=>x),(t=>x=t)),t(e.exports,"unstable_act",(()=>b),(t=>b=t)),t(e.exports,"useCallback",(()=>E),(t=>E=t)),t(e.exports,"useContext",(()=>w),(t=>w=t)),t(e.exports,"useDebugValue",(()=>M),(t=>M=t)),t(e.exports,"useDeferredValue",(()=>S),(t=>S=t)),t(e.exports,"useEffect",(()=>C),(t=>C=t)),t(e.exports,"useId",(()=>N),(t=>N=t)),t(e.exports,"useImperativeHandle",(()=>I),(t=>I=t)),t(e.exports,"useInsertionEffect",(()=>P),(t=>P=t)),t(e.exports,"useLayoutEffect",(()=>L),(t=>L=t)),t(e.exports,"useMemo",(()=>O),(t=>O=t)),t(e.exports,"useReducer",(()=>R),(t=>R=t)),t(e.exports,"useRef",(()=>k),(t=>k=t)),t(e.exports,"useState",(()=>T),(t=>T=t)),t(e.exports,"useSyncExternalStore",(()=>A),(t=>A=t)),t(e.exports,"useTransition",(()=>D),(t=>D=t)),t(e.exports,"version",(()=>F),(t=>F=t));var z=Symbol.for("react.element"),j=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),V=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),W=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),Q=Symbol.iterator;var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,J={};function Z(t,e,n){this.props=t,this.context=e,this.refs=J,this.updater=n||$}function tt(){}function et(t,e,n){this.props=t,this.context=e,this.refs=J,this.updater=n||$}Z.prototype.isReactComponent={},Z.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},Z.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},tt.prototype=Z.prototype;var nt=et.prototype=new tt;nt.constructor=et,K(nt,Z.prototype),nt.isPureReactComponent=!0;var rt=Array.isArray,it=Object.prototype.hasOwnProperty,ot={current:null},st={key:!0,ref:!0,__self:!0,__source:!0};function at(t,e,n){var r,i={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)it.call(e,r)&&!st.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps)void 0===i[r]&&(i[r]=a[r]);return{$$typeof:z,type:t,key:o,ref:s,props:i,_owner:ot.current}}function ut(t){return"object"==typeof t&&null!==t&&t.$$typeof===z}var lt=/\/+/g;function ct(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function ht(t,e,n,r,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var s,a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case z:case j:a=!0}}if(a)return i=i(a=t),t=""===r?"."+ct(a,0):r,rt(i)?(n="",null!=t&&(n=t.replace(lt,"$&/")+"/"),ht(i,e,n,"",(function(t){return t}))):null!=i&&(ut(i)&&(i=function(t,e){return{$$typeof:z,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(lt,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=""===r?".":r+":",rt(t))for(var u=0;u<t.length;u++){var l=r+ct(o=t[u],u);a+=ht(o,e,n,l,i)}else if("function"==typeof(l=null===(s=t)||"object"!=typeof s?null:"function"==typeof(s=Q&&s[Q]||s["@@iterator"])?s:null))for(t=l.call(t),u=0;!(o=t.next()).done;)a+=ht(o=o.value,e,n,l=r+ct(o,u++),i);else if("object"===o)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ft(t,e,n){if(null==t)return t;var r=[],i=0;return ht(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function pt(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var dt={current:null},gt={transition:null};r={map:ft,forEach:function(t,e,n){ft(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return ft(t,(function(){e++})),e},toArray:function(t){return ft(t,(function(t){return t}))||[]},only:function(t){if(!ut(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},i=Z,o=q,s=B,a=et,u=G,l=Y,c={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:gt,ReactCurrentOwner:ot},h=function(t,e,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=K({},t.props),i=t.key,o=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,s=ot.current),void 0!==e.key&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)it.call(e,u)&&!st.hasOwnProperty(u)&&(r[u]=void 0===e[u]&&void 0!==a?a[u]:e[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:z,type:t.type,key:i,ref:o,props:r,_owner:s}},f=function(t){return(t={$$typeof:V,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:U,_context:t},t.Consumer=t},p=at,d=function(t){var e=at.bind(null,t);return e.type=t,e},g=function(){return{current:null}},y=function(t){return{$$typeof:X,render:t}},v=ut,m=function(t){return{$$typeof:H,_payload:{_status:-1,_result:t},_init:pt}},_=function(t,e){return{$$typeof:W,type:t,compare:void 0===e?null:e}},x=function(t){var e=gt.transition;gt.transition={};try{t()}finally{gt.transition=e}},b=function(){throw Error("act(...) is not supported in production builds of React.")},E=function(t,e){return dt.current.useCallback(t,e)},w=function(t){return dt.current.useContext(t)},M=function(){},S=function(t){return dt.current.useDeferredValue(t)},C=function(t,e){return dt.current.useEffect(t,e)},N=function(){return dt.current.useId()},I=function(t,e,n){return dt.current.useImperativeHandle(t,e,n)},P=function(t,e){return dt.current.useInsertionEffect(t,e)},L=function(t,e){return dt.current.useLayoutEffect(t,e)},O=function(t,e){return dt.current.useMemo(t,e)},R=function(t,e,n){return dt.current.useReducer(t,e,n)},k=function(t){return dt.current.useRef(t)},T=function(t){return dt.current.useState(t)},A=function(t,e,n){return dt.current.useSyncExternalStore(t,e,n)},D=function(){return dt.current.useTransition()},F="18.1.0"})),o.register("Xw6Mv",(function(e,n){var r,i,s,a,u,l,c,h,f,p,d,g;t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(()=>r),(t=>r=t)),t(e.exports,"createPortal",(()=>i),(t=>i=t)),t(e.exports,"createRoot",(()=>s),(t=>s=t)),t(e.exports,"findDOMNode",(()=>a),(t=>a=t)),t(e.exports,"flushSync",(()=>u),(t=>u=t)),t(e.exports,"hydrate",(()=>l),(t=>l=t)),t(e.exports,"hydrateRoot",(()=>c),(t=>c=t)),t(e.exports,"render",(()=>h),(t=>h=t)),t(e.exports,"unmountComponentAtNode",(()=>f),(t=>f=t)),t(e.exports,"unstable_batchedUpdates",(()=>p),(t=>p=t)),t(e.exports,"unstable_renderSubtreeIntoContainer",(()=>d),(t=>d=t)),t(e.exports,"version",(()=>g),(t=>g=t));var y=o("acw62"),v=o("fO90s");function m(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _=new Set,x={};function b(t,e){E(t,e),E(t+"Capture",e)}function E(t,e){for(x[t]=e,t=0;t<e.length;t++)_.add(e[t])}var w=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),M=Object.prototype.hasOwnProperty,S=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},N={};function I(t,e,n,r,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){P[t]=new I(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];P[e]=new I(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){P[t]=new I(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){P[t]=new I(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){P[t]=new I(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){P[t]=new I(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){P[t]=new I(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){P[t]=new I(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){P[t]=new I(t,5,!1,t.toLowerCase(),null,!1,!1)}));var L=/[\-:]([a-z])/g;function O(t){return t[1].toUpperCase()}function R(t,e,n,r){var i=P.hasOwnProperty(e)?P[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!M.call(N,t)||!M.call(C,t)&&(S.test(t)?N[t]=!0:(C[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(L,O);P[e]=new I(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(L,O);P[e]=new I(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(L,O);P[e]=new I(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){P[t]=new I(t,1,!1,t.toLowerCase(),null,!1,!1)})),P.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){P[t]=new I(t,1,!1,t.toLowerCase(),null,!0,!0)}));var k=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),A=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),q=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),X=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var W=Symbol.iterator;function H(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=W&&t[W]||t["@@iterator"])?t:null}var Q,$=Object.assign;function K(t){if(void 0===Q)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Q=e&&e[1]||""}return"\n"+Q+t}var J=!1;function Z(t,e){if(!t||J)return"";J=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var r=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){r=t}t.call(e.prototype)}else{try{throw Error()}catch(t){r=t}t()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var u="\n"+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}}while(1<=s&&0<=a);break}}}finally{J=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?K(t):""}function tt(t){switch(t.tag){case 5:return K(t.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return t=Z(t.type,!1);case 11:return t=Z(t.type.render,!1);case 1:return t=Z(t.type,!0);default:return""}}function et(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case D:return"Fragment";case A:return"Portal";case z:return"Profiler";case F:return"StrictMode";case B:return"Suspense";case U:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case q:return(t.displayName||"Context")+".Consumer";case j:return(t._context.displayName||"Context")+".Provider";case G:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case V:return null!==(e=t.displayName||null)?e:et(t.type)||"Memo";case X:e=t._payload,t=t._init;try{return et(t(e))}catch(t){}}return null}function nt(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return et(e);case 8:return e===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function rt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function it(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function ot(t){t._valueTracker||(t._valueTracker=function(t){var e=it(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function st(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=it(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function at(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function ut(t,e){var n=e.checked;return $({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function lt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=rt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function ct(t,e){null!=(e=e.checked)&&R(t,"checked",e,!1)}function ht(t,e){ct(t,e);var n=rt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?pt(t,e.type,n):e.hasOwnProperty("defaultValue")&&pt(t,e.type,rt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function ft(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function pt(t,e,n){"number"===e&&at(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dt=Array.isArray;function gt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function yt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(m(91));return $({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(m(92));if(dt(n)){if(1<n.length)throw Error(m(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:rt(n)}}function mt(t,e){var n=rt(e.value),r=rt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function _t(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function xt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?xt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Et,wt,Mt=(wt=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((Et=Et||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Et.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return wt(t,e)}))}:wt);function St(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nt=["Webkit","ms","Moz","O"];function It(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Ct.hasOwnProperty(t)&&Ct[t]?(""+e).trim():e+"px"}function Pt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=It(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Ct).forEach((function(t){Nt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ct[e]=Ct[t]}))}));var Lt=$({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ot(t,e){if(e){if(Lt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(m(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(m(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(m(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(m(62))}}function Rt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kt=null;function Tt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var At=null,Dt=null,Ft=null;function zt(t){if(t=Pi(t)){if("function"!=typeof At)throw Error(m(280));var e=t.stateNode;e&&(e=Oi(e),At(t.stateNode,t.type,e))}}function jt(t){Dt?Ft?Ft.push(t):Ft=[t]:Dt=t}function qt(){if(Dt){var t=Dt,e=Ft;if(Ft=Dt=null,zt(t),e)for(t=0;t<e.length;t++)zt(e[t])}}function Gt(t,e){return t(e)}function Bt(){}var Ut=!1;function Vt(t,e,n){if(Ut)return t(e,n);Ut=!0;try{return Gt(t,e,n)}finally{Ut=!1,(null!==Dt||null!==Ft)&&(Bt(),qt())}}function Xt(t,e){var n=t.stateNode;if(null===n)return null;var r=Oi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(m(231,e,typeof n));return n}var Yt=!1;if(w)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){Yt=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch(wt){Yt=!1}function Ht(t,e,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}var Qt=!1,$t=null,Kt=!1,Jt=null,Zt={onError:function(t){Qt=!0,$t=t}};function te(t,e,n,r,i,o,s,a,u){Qt=!1,$t=null,Ht.apply(Zt,arguments)}function ee(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function ne(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function re(t){if(ee(t)!==t)throw Error(m(188))}function ie(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=ee(t)))throw Error(m(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return re(i),t;if(o===r)return re(i),e;o=o.sibling}throw Error(m(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(m(189))}}if(n.alternate!==r)throw Error(m(190))}if(3!==n.tag)throw Error(m(188));return n.stateNode.current===n?t:e}(t))?oe(t):null}function oe(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=oe(t);if(null!==e)return e;t=t.sibling}return null}var se=v.unstable_scheduleCallback,ae=v.unstable_cancelCallback,ue=v.unstable_shouldYield,le=v.unstable_requestPaint,ce=v.unstable_now,he=v.unstable_getCurrentPriorityLevel,fe=v.unstable_ImmediatePriority,pe=v.unstable_UserBlockingPriority,de=v.unstable_NormalPriority,ge=v.unstable_LowPriority,ye=v.unstable_IdlePriority,ve=null,me=null;var _e=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(xe(t)/be|0)|0},xe=Math.log,be=Math.LN2;var Ee=64,we=4194304;function Me(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Se(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=Me(a):0!==(o&=s)&&(r=Me(o))}else 0!==(s=n&~i)?r=Me(s):0!==o&&(r=Me(o));if(0===r)return 0;if(0!==e&&e!==r&&0==(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!=(4194240&o)))return e;if(0!=(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-_e(e)),r|=t[n],e&=~i;return r}function Ce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function Ne(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ie(){var t=Ee;return 0==(4194240&(Ee<<=1))&&(Ee=64),t}function Pe(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Le(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-_e(e)]=n}function Oe(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_e(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function ke(t){return 1<(t&=-t)?4<t?0!=(268435455&t)?16:536870912:4:1}var Te,Ae,De,Fe,ze,je=!1,qe=[],Ge=null,Be=null,Ue=null,Ve=new Map,Xe=new Map,Ye=[],We="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function He(t,e){switch(t){case"focusin":case"focusout":Ge=null;break;case"dragenter":case"dragleave":Be=null;break;case"mouseover":case"mouseout":Ue=null;break;case"pointerover":case"pointerout":Ve.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xe.delete(e.pointerId)}}function Qe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=Pi(e))&&Ae(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function $e(t){var e=Ii(t.target);if(null!==e){var n=ee(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=ne(n)))return t.blockedOn=e,void ze(t.priority,(function(){De(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ke(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=ln(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=Pi(n))&&Ae(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);kt=r,n.target.dispatchEvent(r),kt=null,e.shift()}return!0}function Je(t,e,n){Ke(t)&&n.delete(e)}function Ze(){je=!1,null!==Ge&&Ke(Ge)&&(Ge=null),null!==Be&&Ke(Be)&&(Be=null),null!==Ue&&Ke(Ue)&&(Ue=null),Ve.forEach(Je),Xe.forEach(Je)}function tn(t,e){t.blockedOn===e&&(t.blockedOn=null,je||(je=!0,v.unstable_scheduleCallback(v.unstable_NormalPriority,Ze)))}function en(t){function e(e){return tn(e,t)}if(0<qe.length){tn(qe[0],t);for(var n=1;n<qe.length;n++){var r=qe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ge&&tn(Ge,t),null!==Be&&tn(Be,t),null!==Ue&&tn(Ue,t),Ve.forEach(e),Xe.forEach(e),n=0;n<Ye.length;n++)(r=Ye[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ye.length&&null===(n=Ye[0]).blockedOn;)$e(n),null===n.blockedOn&&Ye.shift()}var nn=k.ReactCurrentBatchConfig,rn=!0;function on(t,e,n,r){var i=Re,o=nn.transition;nn.transition=null;try{Re=1,an(t,e,n,r)}finally{Re=i,nn.transition=o}}function sn(t,e,n,r){var i=Re,o=nn.transition;nn.transition=null;try{Re=4,an(t,e,n,r)}finally{Re=i,nn.transition=o}}function an(t,e,n,r){if(rn){var i=ln(t,e,n,r);if(null===i)ti(t,e,r,un,n),He(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Ge=Qe(Ge,t,e,n,r,i),!0;case"dragenter":return Be=Qe(Be,t,e,n,r,i),!0;case"mouseover":return Ue=Qe(Ue,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ve.set(o,Qe(Ve.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Xe.set(o,Qe(Xe.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(He(t,r),4&e&&-1<We.indexOf(t)){for(;null!==i;){var o=Pi(i);if(null!==o&&Te(o),null===(o=ln(t,e,n,r))&&ti(t,e,r,un,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else ti(t,e,r,null,n)}}var un=null;function ln(t,e,n,r){if(un=null,null!==(t=Ii(t=Tt(r))))if(null===(e=ee(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=ne(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return un=t,null}function cn(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(he()){case fe:return 1;case pe:return 4;case de:case ge:return 16;case ye:return 536870912;default:return 16}default:return 16}}var hn=null,fn=null,pn=null;function dn(){if(pn)return pn;var t,e,n=fn,r=n.length,i="value"in hn?hn.value:hn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return pn=i.slice(t,1<e?1-e:void 0)}function gn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function yn(){return!0}function vn(){return!1}function mn(t){function e(e,n,r,i,o){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?yn:vn,this.isPropagationStopped=vn,this}return $(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=yn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=yn)},persist:function(){},isPersistent:yn}),e}var _n,xn,bn,En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wn=mn(En),Mn=$({},En,{view:0,detail:0}),Sn=mn(Mn),Cn=$({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bn&&(bn&&"mousemove"===t.type?(_n=t.screenX-bn.screenX,xn=t.screenY-bn.screenY):xn=_n=0,bn=t),_n)},movementY:function(t){return"movementY"in t?t.movementY:xn}}),Nn=mn(Cn),In=mn($({},Cn,{dataTransfer:0})),Pn=mn($({},Mn,{relatedTarget:0})),Ln=mn($({},En,{animationName:0,elapsedTime:0,pseudoElement:0})),On=mn($({},En,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),Rn=mn($({},En,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},An={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=An[t])&&!!e[t]}function Fn(){return Dn}var zn=mn($({},Mn,{key:function(t){if(t.key){var e=kn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=gn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Tn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fn,charCode:function(t){return"keypress"===t.type?gn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?gn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),jn=mn($({},Cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),qn=mn($({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fn})),Gn=mn($({},En,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=mn($({},Cn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Un=[9,13,27,32],Vn=w&&"CompositionEvent"in window,Xn=null;w&&"documentMode"in document&&(Xn=document.documentMode);var Yn=w&&"TextEvent"in window&&!Xn,Wn=w&&(!Vn||Xn&&8<Xn&&11>=Xn),Hn=String.fromCharCode(32),Qn=!1;function $n(t,e){switch(t){case"keyup":return-1!==Un.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Jn=!1;var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Zn[t.type]:"textarea"===e}function er(t,e,n,r){jt(r),0<(e=ni(e,"onChange")).length&&(n=new wn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nr=null,rr=null;function ir(t){Hr(t,0)}function or(t){if(st(Li(t)))return t}function sr(t,e){if("change"===t)return e}var ar=!1;if(w){var ur;if(w){var lr="oninput"in document;if(!lr){var cr=document.createElement("div");cr.setAttribute("oninput","return;"),lr="function"==typeof cr.oninput}ur=lr}else ur=!1;ar=ur&&(!document.documentMode||9<document.documentMode)}function hr(){nr&&(nr.detachEvent("onpropertychange",fr),rr=nr=null)}function fr(t){if("value"===t.propertyName&&or(rr)){var e=[];er(e,rr,t,Tt(t)),Vt(ir,e)}}function pr(t,e,n){"focusin"===t?(hr(),rr=n,(nr=e).attachEvent("onpropertychange",fr)):"focusout"===t&&hr()}function dr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return or(rr)}function gr(t,e){if("click"===t)return or(e)}function yr(t,e){if("input"===t||"change"===t)return or(e)}var vr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function mr(t,e){if(vr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!M.call(e,i)||!vr(t[i],e[i]))return!1}return!0}function _r(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xr(t,e){var n,r=_r(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=_r(r)}}function br(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?br(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function Er(){for(var t=window,e=at();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=at((t=e.contentWindow).document)}return e}function wr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Mr(t){var e=Er(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&br(n.ownerDocument.documentElement,n)){if(null!==r&&wr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=xr(n,o);var s=xr(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Sr=w&&"documentMode"in document&&11>=document.documentMode,Cr=null,Nr=null,Ir=null,Pr=!1;function Lr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Pr||null==Cr||Cr!==at(r)||("selectionStart"in(r=Cr)&&wr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ir&&mr(Ir,r)||(Ir=r,0<(r=ni(Nr,"onSelect")).length&&(e=new wn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cr)))}function Or(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Rr={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionend:Or("Transition","TransitionEnd")},kr={},Tr={};function Ar(t){if(kr[t])return kr[t];if(!Rr[t])return t;var e,n=Rr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Tr)return kr[t]=n[e];return t}w&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);var Dr=Ar("animationend"),Fr=Ar("animationiteration"),zr=Ar("animationstart"),jr=Ar("transitionend"),qr=new Map,Gr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(t,e){qr.set(t,e),b(e,[t])}for(var Ur=0;Ur<Gr.length;Ur++){var Vr=Gr[Ur];Br(Vr.toLowerCase(),"on"+(Vr[0].toUpperCase()+Vr.slice(1)))}Br(Dr,"onAnimationEnd"),Br(Fr,"onAnimationIteration"),Br(zr,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(jr,"onTransitionEnd"),E("onMouseEnter",["mouseout","mouseover"]),E("onMouseLeave",["mouseout","mouseover"]),E("onPointerEnter",["pointerout","pointerover"]),E("onPointerLeave",["pointerout","pointerover"]),b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),b("onBeforeInput",["compositionend","keypress","textInput","paste"]),b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function Wr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,a,u){if(te.apply(this,arguments),Qt){if(!Qt)throw Error(m(198));var l=$t;Qt=!1,$t=null,Kt||(Kt=!0,Jt=l)}}(r,e,void 0,t),t.currentTarget=null}function Hr(t,e){e=0!=(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break t;Wr(i,a,l),o=u}else for(s=0;s<r.length;s++){if(u=(a=r[s]).instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break t;Wr(i,a,l),o=u}}}if(Kt)throw t=Jt,Kt=!1,Jt=null,t}function Qr(t,e){var n=e[Si];void 0===n&&(n=e[Si]=new Set);var r=t+"__bubble";n.has(r)||(Zr(e,t,2,!1),n.add(r))}function $r(t,e,n){var r=0;e&&(r|=4),Zr(n,t,r,e)}var Kr="_reactListening"+Math.random().toString(36).slice(2);function Jr(t){if(!t[Kr]){t[Kr]=!0,_.forEach((function(e){"selectionchange"!==e&&(Yr.has(e)||$r(e,!1,t),$r(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Kr]||(e[Kr]=!0,$r("selectionchange",!1,e))}}function Zr(t,e,n,r){switch(cn(e)){case 1:var i=on;break;case 4:i=sn;break;default:i=an}n=i.bind(null,e,n,t),i=void 0,!Yt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ti(t,e,n,r,i){var o=r;if(0==(1&e)&&0==(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=Ii(a)))return;if(5===(u=s.tag)||6===u){r=o=s;continue t}a=a.parentNode}}r=r.return}Vt((function(){var r=o,i=Tt(n),s=[];t:{var a=qr.get(t);if(void 0!==a){var u=wn,l=t;switch(t){case"keypress":if(0===gn(n))break t;case"keydown":case"keyup":u=zn;break;case"focusin":l="focus",u=Pn;break;case"focusout":l="blur",u=Pn;break;case"beforeblur":case"afterblur":u=Pn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=Nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=In;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=qn;break;case Dr:case Fr:case zr:u=Ln;break;case jr:u=Gn;break;case"scroll":u=Sn;break;case"wheel":u=Bn;break;case"copy":case"cut":case"paste":u=On;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=jn}var c=0!=(4&e),h=!c&&"scroll"===t,f=c?null!==a?a+"Capture":null:a;c=[];for(var p,d=r;null!==d;){var g=(p=d).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==f&&(null!=(g=Xt(d,f))&&c.push(ei(d,g,p)))),h)break;d=d.return}0<c.length&&(a=new u(a,l,null,n,i),s.push({event:a,listeners:c}))}}if(0==(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===kt||!(l=n.relatedTarget||n.fromElement)||!Ii(l)&&!l[Mi])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Ii(l):null)&&(l!==(h=ee(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=Nn,g="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(c=jn,g="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==u?a:Li(u),p=null==l?a:Li(l),(a=new c(g,d+"leave",u,n,i)).target=h,a.relatedTarget=p,g=null,Ii(i)===r&&((c=new c(f,d+"enter",l,n,i)).target=p,c.relatedTarget=h,g=c),h=g,u&&l)t:{for(f=l,d=0,p=c=u;p;p=ri(p))d++;for(p=0,g=f;g;g=ri(g))p++;for(;0<d-p;)c=ri(c),d--;for(;0<p-d;)f=ri(f),p--;for(;d--;){if(c===f||null!==f&&c===f.alternate)break t;c=ri(c),f=ri(f)}c=null}else c=null;null!==u&&ii(s,a,u,c,!1),null!==l&&null!==h&&ii(s,h,l,c,!0)}if("select"===(u=(a=r?Li(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var y=sr;else if(tr(a))if(ar)y=yr;else{y=dr;var v=pr}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(y=gr);switch(y&&(y=y(t,r))?er(s,y,n,i):(v&&v(t,a,r),"focusout"===t&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&pt(a,"number",a.value)),v=r?Li(r):window,t){case"focusin":(tr(v)||"true"===v.contentEditable)&&(Cr=v,Nr=r,Ir=null);break;case"focusout":Ir=Nr=Cr=null;break;case"mousedown":Pr=!0;break;case"contextmenu":case"mouseup":case"dragend":Pr=!1,Lr(s,n,i);break;case"selectionchange":if(Sr)break;case"keydown":case"keyup":Lr(s,n,i)}var m;if(Vn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Jn?$n(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Wn&&"ko"!==n.locale&&(Jn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Jn&&(m=dn()):(fn="value"in(hn=i)?hn.value:hn.textContent,Jn=!0)),0<(v=ni(r,_)).length&&(_=new Rn(_,t,null,n,i),s.push({event:_,listeners:v}),m?_.data=m:null!==(m=Kn(n))&&(_.data=m))),(m=Yn?function(t,e){switch(t){case"compositionend":return Kn(e);case"keypress":return 32!==e.which?null:(Qn=!0,Hn);case"textInput":return(t=e.data)===Hn&&Qn?null:t;default:return null}}(t,n):function(t,e){if(Jn)return"compositionend"===t||!Vn&&$n(t,e)?(t=dn(),pn=fn=hn=null,Jn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=ni(r,"onBeforeInput")).length&&(i=new Rn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=m))}Hr(s,e)}))}function ei(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ni(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Xt(t,n))&&r.unshift(ei(t,o,i)),null!=(o=Xt(t,e))&&r.push(ei(t,o,i))),t=t.return}return r}function ri(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function ii(t,e,n,r,i){for(var o=e._reactName,s=[];null!==n&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(u=Xt(n,o))&&s.unshift(ei(n,u,a)):i||null!=(u=Xt(n,o))&&s.push(ei(n,u,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var oi=/\r\n?/g,si=/\u0000|\uFFFD/g;function ai(t){return("string"==typeof t?t:""+t).replace(oi,"\n").replace(si,"")}function ui(t,e,n){if(e=ai(e),ai(t)!==e&&n)throw Error(m(425))}function li(){}var ci=null,hi=null;function fi(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var pi="function"==typeof setTimeout?setTimeout:void 0,di="function"==typeof clearTimeout?clearTimeout:void 0,gi="function"==typeof Promise?Promise:void 0,yi="function"==typeof queueMicrotask?queueMicrotask:void 0!==gi?function(t){return gi.resolve(null).then(t).catch(vi)}:pi;function vi(t){setTimeout((function(){throw t}))}function mi(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void en(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);en(e)}function _i(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function xi(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var bi=Math.random().toString(36).slice(2),Ei="__reactFiber$"+bi,wi="__reactProps$"+bi,Mi="__reactContainer$"+bi,Si="__reactEvents$"+bi,Ci="__reactListeners$"+bi,Ni="__reactHandles$"+bi;function Ii(t){var e=t[Ei];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mi]||n[Ei]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=xi(t);null!==t;){if(n=t[Ei])return n;t=xi(t)}return e}n=(t=n).parentNode}return null}function Pi(t){return!(t=t[Ei]||t[Mi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Li(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(m(33))}function Oi(t){return t[wi]||null}var Ri=[],ki=-1;function Ti(t){return{current:t}}function Ai(t){0>ki||(t.current=Ri[ki],Ri[ki]=null,ki--)}function Di(t,e){ki++,Ri[ki]=t.current,t.current=e}var Fi={},zi=Ti(Fi),ji=Ti(!1),qi=Fi;function Gi(t,e){var n=t.type.contextTypes;if(!n)return Fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Bi(t){return null!=(t=t.childContextTypes)}function Ui(){Ai(ji),Ai(zi)}function Vi(t,e,n){if(zi.current!==Fi)throw Error(m(168));Di(zi,e),Di(ji,n)}function Xi(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(m(108,nt(t)||"Unknown",i));return $({},n,r)}function Yi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fi,qi=zi.current,Di(zi,t),Di(ji,ji.current),!0}function Wi(t,e,n){var r=t.stateNode;if(!r)throw Error(m(169));n?(t=Xi(t,e,qi),r.__reactInternalMemoizedMergedChildContext=t,Ai(ji),Ai(zi),Di(zi,t)):Ai(ji),Di(ji,n)}var Hi=null,Qi=!1,$i=!1;function Ki(t){null===Hi?Hi=[t]:Hi.push(t)}function Ji(){if(!$i&&null!==Hi){$i=!0;var t=0,e=Re;try{var n=Hi;for(Re=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Hi=null,Qi=!1}catch(e){throw null!==Hi&&(Hi=Hi.slice(t+1)),se(fe,Ji),e}finally{Re=e,$i=!1}}return null}var Zi=k.ReactCurrentBatchConfig;function to(t,e){if(t&&t.defaultProps){for(var n in e=$({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var eo=Ti(null),no=null,ro=null,io=null;function oo(){io=ro=no=null}function so(t){var e=eo.current;Ai(eo),t._currentValue=e}function ao(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){no=t,io=ro=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!=(t.lanes&e)&&(Oa=!0),t.firstContext=null)}function lo(t){var e=t._currentValue;if(io!==t)if(t={context:t,memoizedValue:e,next:null},null===ro){if(null===no)throw Error(m(308));ro=t,no.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return e}var co=null,ho=!1;function fo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function po(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yo(t,e){var n=t.updateQueue;null!==n&&(n=n.shared,hl(t)?(null===(t=n.interleaved)?(e.next=e,null===co?co=[n]:co.push(n)):(e.next=t.next,t.next=e),n.interleaved=e):(null===(t=n.pending)?e.next=e:(e.next=t.next,t.next=e),n.pending=e))}function vo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!=(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Oe(t,n)}}function mo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _o(t,e,n,r){var i=t.updateQueue;ho=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var u=a,l=u.next;u.next=null,null===s?o=l:s.next=l,s=u;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(null!==o){var h=i.baseState;for(s=0,c=l=u=null,a=o;;){var f=a.lane,p=a.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var d=t,g=a;switch(f=e,p=n,g.tag){case 1:if("function"==typeof(d=g.payload)){h=d.call(p,h,f);break t}h=d;break t;case 3:d.flags=-65537&d.flags|128;case 0:if(null==(f="function"==typeof(d=g.payload)?d.call(p,h,f):d))break t;h=$({},h,f);break t;case 2:ho=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(f=i.effects)?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(l=c=p,u=h):c=c.next=p,s|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(f=a).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Uu|=s,t.lanes=s,t.memoizedState=h}}function xo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(m(191,i));i.call(r)}}}var bo=(new y.Component).refs;function Eo(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:$({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var wo={isMounted:function(t){return!!(t=t._reactInternals)&&ee(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=al(),i=ul(t),o=go(r,i);o.payload=e,null!=n&&(o.callback=n),yo(t,o),null!==(e=ll(t,i,r))&&vo(e,t,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=al(),i=ul(t),o=go(r,i);o.tag=1,o.payload=e,null!=n&&(o.callback=n),yo(t,o),null!==(e=ll(t,i,r))&&vo(e,t,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=al(),r=ul(t),i=go(n,r);i.tag=2,null!=e&&(i.callback=e),yo(t,i),null!==(e=ll(t,r,n))&&vo(e,t,r)}};function Mo(t,e,n,r,i,o,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!mr(n,r)||!mr(i,o))}function So(t,e,n){var r=!1,i=Fi,o=e.contextType;return"object"==typeof o&&null!==o?o=lo(o):(i=Bi(e)?qi:zi.current,o=(r=null!=(r=e.contextTypes))?Gi(t,i):Fi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=wo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Co(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wo.enqueueReplaceState(e,e.state,null)}function No(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=bo,fo(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=lo(o):(o=Bi(e)?qi:zi.current,i.context=Gi(t,o)),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(Eo(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&wo.enqueueReplaceState(i,i.state,null),_o(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308)}var Io=[],Po=0,Lo=null,Oo=0,Ro=[],ko=0,To=null,Ao=1,Do="";function Fo(t,e){Io[Po++]=Oo,Io[Po++]=Lo,Lo=t,Oo=e}function zo(t,e,n){Ro[ko++]=Ao,Ro[ko++]=Do,Ro[ko++]=To,To=t;var r=Ao;t=Do;var i=32-_e(r)-1;r&=~(1<<i),n+=1;var o=32-_e(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ao=1<<32-_e(e)+i|n<<i|r,Do=o+t}else Ao=1<<o|n<<i|r,Do=t}function jo(t){null!==t.return&&(Fo(t,1),zo(t,1,0))}function qo(t){for(;t===Lo;)Lo=Io[--Po],Io[Po]=null,Oo=Io[--Po],Io[Po]=null;for(;t===To;)To=Ro[--ko],Ro[ko]=null,Do=Ro[--ko],Ro[ko]=null,Ao=Ro[--ko],Ro[ko]=null}var Go=null,Bo=null,Uo=!1,Vo=null;function Xo(t,e){var n=ql(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function Yo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,Go=t,Bo=_i(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,Go=t,Bo=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==To?{id:Ao,overflow:Do}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=ql(18,null,null,0)).stateNode=e,n.return=t,t.child=n,Go=t,Bo=null,!0);default:return!1}}function Wo(t){return 0!=(1&t.mode)&&0==(128&t.flags)}function Ho(t){if(Uo){var e=Bo;if(e){var n=e;if(!Yo(t,e)){if(Wo(t))throw Error(m(418));e=_i(n.nextSibling);var r=Go;e&&Yo(t,e)?Xo(r,n):(t.flags=-4097&t.flags|2,Uo=!1,Go=t)}}else{if(Wo(t))throw Error(m(418));t.flags=-4097&t.flags|2,Uo=!1,Go=t}}}function Qo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Go=t}function $o(t){if(t!==Go)return!1;if(!Uo)return Qo(t),Uo=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!fi(t.type,t.memoizedProps)),e&&(e=Bo)){if(Wo(t)){for(t=Bo;t;)t=_i(t.nextSibling);throw Error(m(418))}for(;e;)Xo(t,e),e=_i(e.nextSibling)}if(Qo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(m(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Bo=_i(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Bo=null}}else Bo=Go?_i(t.stateNode.nextSibling):null;return!0}function Ko(){Bo=Go=null,Uo=!1}function Jo(t){null===Vo?Vo=[t]:Vo.push(t)}function Zo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(m(309));var r=n.stateNode}if(!r)throw Error(m(147,t));var i=r,o=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===o?e.ref:((e=function(t){var e=i.refs;e===bo&&(e=i.refs={}),null===t?delete e[o]:e[o]=t})._stringRef=o,e)}if("string"!=typeof t)throw Error(m(284));if(!n._owner)throw Error(m(290,t))}return t}function ts(t,e){throw t=Object.prototype.toString.call(e),Error(m(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function es(t){return(0,t._init)(t._payload)}function ns(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Bl(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function a(t,e,n,r){return null===e||6!==e.tag?((e=Yl(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===D?c(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===X&&es(o)===e.type)?((r=i(e,n.props)).ref=Zo(t,e,n),r.return=t,r):((r=Ul(n.type,n.key,n.props,null,t.mode,r)).ref=Zo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Wl(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function c(t,e,n,r,o){return null===e||7!==e.tag?((e=Vl(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function h(t,e,n){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Yl(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case T:return(n=Ul(e.type,e.key,e.props,null,t.mode,n)).ref=Zo(t,null,e),n.return=t,n;case A:return(e=Wl(e,t.mode,n)).return=t,e;case X:return h(t,(0,e._init)(e._payload),n)}if(dt(e)||H(e))return(e=Vl(e,t.mode,n,null)).return=t,e;ts(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:a(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case T:return n.key===i?u(t,e,n,r):null;case A:return n.key===i?l(t,e,n,r):null;case X:return f(t,e,(i=n._init)(n._payload),r)}if(dt(n)||H(n))return null!==i?null:c(t,e,n,r,null);ts(t,n)}return null}function p(t,e,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return a(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case T:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case A:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i);case X:return p(t,e,n,(0,r._init)(r._payload),i)}if(dt(r)||H(r))return c(e,t=t.get(n)||null,r,i,null);ts(e,r)}return null}return function a(u,l,c,d){if("object"==typeof c&&null!==c&&c.type===D&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case T:t:{for(var g=c.key,y=l;null!==y;){if(y.key===g){if((g=c.type)===D){if(7===y.tag){n(u,y.sibling),(l=i(y,c.props.children)).return=u,u=l;break t}}else if(y.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===X&&es(g)===y.type){n(u,y.sibling),(l=i(y,c.props)).ref=Zo(u,y,c),l.return=u,u=l;break t}n(u,y);break}e(u,y),y=y.sibling}c.type===D?((l=Vl(c.props.children,u.mode,d,c.key)).return=u,u=l):((d=Ul(c.type,c.key,c.props,null,u.mode,d)).ref=Zo(u,l,c),d.return=u,u=d)}return s(u);case A:t:{for(y=c.key;null!==l;){if(l.key===y){if(4===l.tag&&l.stateNode.containerInfo===c.containerInfo&&l.stateNode.implementation===c.implementation){n(u,l.sibling),(l=i(l,c.children||[])).return=u,u=l;break t}n(u,l);break}e(u,l),l=l.sibling}(l=Wl(c,u.mode,d)).return=u,u=l}return s(u);case X:return a(u,l,(y=c._init)(c._payload),d)}if(dt(c))return function(i,s,a,u){for(var l=null,c=null,d=s,g=s=0,y=null;null!==d&&g<a.length;g++){d.index>g?(y=d,d=null):y=d.sibling;var v=f(i,d,a[g],u);if(null===v){null===d&&(d=y);break}t&&d&&null===v.alternate&&e(i,d),s=o(v,s,g),null===c?l=v:c.sibling=v,c=v,d=y}if(g===a.length)return n(i,d),Uo&&Fo(i,g),l;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],u))&&(s=o(d,s,g),null===c?l=d:c.sibling=d,c=d);return Uo&&Fo(i,g),l}for(d=r(i,d);g<a.length;g++)null!==(y=p(d,i,g,a[g],u))&&(t&&null!==y.alternate&&d.delete(null===y.key?g:y.key),s=o(y,s,g),null===c?l=y:c.sibling=y,c=y);return t&&d.forEach((function(t){return e(i,t)})),Uo&&Fo(i,g),l}(u,l,c,d);if(H(c))return function(i,s,a,u){var l=H(a);if("function"!=typeof l)throw Error(m(150));if(null==(a=l.call(a)))throw Error(m(151));for(var c=l=null,d=s,g=s=0,y=null,v=a.next();null!==d&&!v.done;g++,v=a.next()){d.index>g?(y=d,d=null):y=d.sibling;var _=f(i,d,v.value,u);if(null===_){null===d&&(d=y);break}t&&d&&null===_.alternate&&e(i,d),s=o(_,s,g),null===c?l=_:c.sibling=_,c=_,d=y}if(v.done)return n(i,d),Uo&&Fo(i,g),l;if(null===d){for(;!v.done;g++,v=a.next())null!==(v=h(i,v.value,u))&&(s=o(v,s,g),null===c?l=v:c.sibling=v,c=v);return Uo&&Fo(i,g),l}for(d=r(i,d);!v.done;g++,v=a.next())null!==(v=p(d,i,g,v.value,u))&&(t&&null!==v.alternate&&d.delete(null===v.key?g:v.key),s=o(v,s,g),null===c?l=v:c.sibling=v,c=v);return t&&d.forEach((function(t){return e(i,t)})),Uo&&Fo(i,g),l}(u,l,c,d);ts(u,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==l&&6===l.tag?(n(u,l.sibling),(l=i(l,c)).return=u,u=l):(n(u,l),(l=Yl(c,u.mode,d)).return=u,u=l),s(u)):n(u,l)}}var rs=ns(!0),is=ns(!1),os={},ss=Ti(os),as=Ti(os),us=Ti(os);function ls(t){if(t===os)throw Error(m(174));return t}function cs(t,e){switch(Di(us,e),Di(as,t),Di(ss,os),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bt(null,"");break;default:e=bt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ai(ss),Di(ss,e)}function hs(){Ai(ss),Ai(as),Ai(us)}function fs(t){ls(us.current);var e=ls(ss.current),n=bt(e,t.type);e!==n&&(Di(as,t),Di(ss,n))}function ps(t){as.current===t&&(Ai(ss),Ai(as))}var ds=Ti(0);function gs(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ys=[];function vs(){for(var t=0;t<ys.length;t++)ys[t]._workInProgressVersionPrimary=null;ys.length=0}var ms=k.ReactCurrentDispatcher,_s=k.ReactCurrentBatchConfig,xs=0,bs=null,Es=null,ws=null,Ms=!1,Ss=!1,Cs=0,Ns=0;function Is(){throw Error(m(321))}function Ps(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vr(t[n],e[n]))return!1;return!0}function Ls(t,e,n,r,i,o){if(xs=o,bs=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ms.current=null===t||null===t.memoizedState?pa:da,t=n(r,i),Ss){o=0;do{if(Ss=!1,Cs=0,25<=o)throw Error(m(301));o+=1,ws=Es=null,e.updateQueue=null,ms.current=ga,t=n(r,i)}while(Ss)}if(ms.current=fa,e=null!==Es&&null!==Es.next,xs=0,ws=Es=bs=null,Ms=!1,e)throw Error(m(300));return t}function Os(){var t=0!==Cs;return Cs=0,t}function Rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ws?bs.memoizedState=ws=t:ws=ws.next=t,ws}function ks(){if(null===Es){var t=bs.alternate;t=null!==t?t.memoizedState:null}else t=Es.next;var e=null===ws?bs.memoizedState:ws.next;if(null!==e)ws=e,Es=t;else{if(null===t)throw Error(m(310));t={memoizedState:(Es=t).memoizedState,baseState:Es.baseState,baseQueue:Es.baseQueue,queue:Es.queue,next:null},null===ws?bs.memoizedState=ws=t:ws=ws.next=t}return ws}function Ts(t,e){return"function"==typeof e?e(t):e}function As(t){var e=ks(),n=e.queue;if(null===n)throw Error(m(311));n.lastRenderedReducer=t;var r=Es,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((xs&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(a=u=h,s=r):u=u.next=h,bs.lanes|=c,Uu|=c}l=l.next}while(null!==l&&l!==o);null===u?s=r:u.next=a,vr(r,e.memoizedState)||(Oa=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{o=i.lane,bs.lanes|=o,Uu|=o,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ds(t){var e=ks(),n=e.queue;if(null===n)throw Error(m(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);vr(o,e.memoizedState)||(Oa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Fs(){}function zs(t,e){var n=bs,r=ks(),i=e(),o=!vr(r.memoizedState,i);if(o&&(r.memoizedState=i,Oa=!0),r=r.queue,Qs(Gs.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||null!==ws&&1&ws.memoizedState.tag){if(n.flags|=2048,Vs(9,qs.bind(null,n,r,i,e),void 0,null),null===Du)throw Error(m(349));0!=(30&xs)||js(n,e,i)}return i}function js(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=bs.updateQueue)?(e={lastEffect:null,stores:null},bs.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function qs(t,e,n,r){e.value=n,e.getSnapshot=r,Bs(e)&&ll(t,1,-1)}function Gs(t,e,n){return n((function(){Bs(e)&&ll(t,1,-1)}))}function Bs(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vr(t,n)}catch(t){return!0}}function Us(t){var e=Rs();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:t},e.queue=t,t=t.dispatch=aa.bind(null,bs,t),[e.memoizedState,t]}function Vs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=bs.updateQueue)?(e={lastEffect:null,stores:null},bs.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Xs(){return ks().memoizedState}function Ys(t,e,n,r){var i=Rs();bs.flags|=t,i.memoizedState=Vs(1|e,n,void 0,void 0===r?null:r)}function Ws(t,e,n,r){var i=ks();r=void 0===r?null:r;var o=void 0;if(null!==Es){var s=Es.memoizedState;if(o=s.destroy,null!==r&&Ps(r,s.deps))return void(i.memoizedState=Vs(e,n,o,r))}bs.flags|=t,i.memoizedState=Vs(1|e,n,o,r)}function Hs(t,e){return Ys(8390656,8,t,e)}function Qs(t,e){return Ws(2048,8,t,e)}function $s(t,e){return Ws(4,2,t,e)}function Ks(t,e){return Ws(4,4,t,e)}function Js(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Zs(t,e,n){return n=null!=n?n.concat([t]):null,Ws(4,4,Js.bind(null,e,t),n)}function ta(){}function ea(t,e){var n=ks();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ps(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function na(t,e){var n=ks();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Ps(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ra(t,e,n){return 0==(21&xs)?(t.baseState&&(t.baseState=!1,Oa=!0),t.memoizedState=n):(vr(n,e)||(n=Ie(),bs.lanes|=n,Uu|=n,t.baseState=!0),e)}function ia(t,e){var n=Re;Re=0!==n&&4>n?n:4,t(!0);var r=_s.transition;_s.transition={};try{t(!1),e()}finally{Re=n,_s.transition=r}}function oa(){return ks().memoizedState}function sa(t,e,n){var r=ul(t);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ua(t)?la(e,n):(ca(t,e,n),null!==(t=ll(t,r,n=al()))&&ha(t,e,r))}function aa(t,e,n){var r=ul(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ua(t))la(e,i);else{ca(t,e,i);var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,vr(a,s))return}catch(t){}null!==(t=ll(t,r,n=al()))&&ha(t,e,r)}}function ua(t){var e=t.alternate;return t===bs||null!==e&&e===bs}function la(t,e){Ss=Ms=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ca(t,e,n){hl(t)?(null===(t=e.interleaved)?(n.next=n,null===co?co=[e]:co.push(e)):(n.next=t.next,t.next=n),e.interleaved=n):(null===(t=e.pending)?n.next=n:(n.next=t.next,t.next=n),e.pending=n)}function ha(t,e,n){if(0!=(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,Oe(t,n)}}var fa={readContext:lo,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useInsertionEffect:Is,useLayoutEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useMutableSource:Is,useSyncExternalStore:Is,useId:Is,unstable_isNewReconciler:!1},pa={readContext:lo,useCallback:function(t,e){return Rs().memoizedState=[t,void 0===e?null:e],t},useContext:lo,useEffect:Hs,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,Ys(4194308,4,Js.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ys(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ys(4,2,t,e)},useMemo:function(t,e){var n=Rs();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rs();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sa.bind(null,bs,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Rs().memoizedState=t},useState:Us,useDebugValue:ta,useDeferredValue:function(t){return Rs().memoizedState=t},useTransition:function(){var t=Us(!1),e=t[0];return t=ia.bind(null,t[1]),Rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=bs,i=Rs();if(Uo){if(void 0===n)throw Error(m(407));n=n()}else{if(n=e(),null===Du)throw Error(m(349));0!=(30&xs)||js(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Hs(Gs.bind(null,r,o,t),[t]),r.flags|=2048,Vs(9,qs.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Rs(),e=Du.identifierPrefix;if(Uo){var n=Do;e=":"+e+"R"+(n=(Ao&~(1<<32-_e(Ao)-1)).toString(32)+n),0<(n=Cs++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=Ns++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},da={readContext:lo,useCallback:ea,useContext:lo,useEffect:Qs,useImperativeHandle:Zs,useInsertionEffect:$s,useLayoutEffect:Ks,useMemo:na,useReducer:As,useRef:Xs,useState:function(){return As(Ts)},useDebugValue:ta,useDeferredValue:function(t){return ra(ks(),Es.memoizedState,t)},useTransition:function(){return[As(Ts)[0],ks().memoizedState]},useMutableSource:Fs,useSyncExternalStore:zs,useId:oa,unstable_isNewReconciler:!1},ga={readContext:lo,useCallback:ea,useContext:lo,useEffect:Qs,useImperativeHandle:Zs,useInsertionEffect:$s,useLayoutEffect:Ks,useMemo:na,useReducer:Ds,useRef:Xs,useState:function(){return Ds(Ts)},useDebugValue:ta,useDeferredValue:function(t){var e=ks();return null===Es?e.memoizedState=t:ra(e,Es.memoizedState,t)},useTransition:function(){return[Ds(Ts)[0],ks().memoizedState]},useMutableSource:Fs,useSyncExternalStore:zs,useId:oa,unstable_isNewReconciler:!1};function ya(t,e){try{var n="",r=e;do{n+=tt(r),r=r.return}while(r);var i=n}catch(t){i="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:i}}function va(t,e){try{console.error(e.value)}catch(t){setTimeout((function(){throw t}))}}var ma,_a,xa,ba="function"==typeof WeakMap?WeakMap:Map;function Ea(t,e,n){(n=go(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ku||(Ku=!0,Ju=r),va(0,e)},n}function wa(t,e,n){(n=go(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){va(0,e)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){va(0,e),"function"!=typeof r&&(null===Zu?Zu=new Set([this]):Zu.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function Ma(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ba;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tl.bind(null,t,e,n),e.then(t,t))}function Sa(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function Ca(t,e,n,r,i){return 0==(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=go(-1,1)).tag=2,yo(n,e))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}function Na(t,e){if(!Uo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ia(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pa(t,e,n){var r=e.pendingProps;switch(qo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ia(e),null;case 1:case 17:return Bi(e.type)&&Ui(),Ia(e),null;case 3:return r=e.stateNode,hs(),Ai(ji),Ai(zi),vs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||($o(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0==(256&e.flags)||(e.flags|=1024,null!==Vo&&(gl(Vo),Vo=null))),Ia(e),null;case 5:ps(e);var i=ls(us.current);if(n=e.type,null!==t&&null!=e.stateNode)_a(t,e,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(m(166));return Ia(e),null}if(t=ls(ss.current),$o(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ei]=e,r[wi]=o,t=0!=(1&e.mode),n){case"dialog":Qr("cancel",r),Qr("close",r);break;case"iframe":case"object":case"embed":Qr("load",r);break;case"video":case"audio":for(i=0;i<Xr.length;i++)Qr(Xr[i],r);break;case"source":Qr("error",r);break;case"img":case"image":case"link":Qr("error",r),Qr("load",r);break;case"details":Qr("toggle",r);break;case"input":lt(r,o),Qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Qr("invalid",r);break;case"textarea":vt(r,o),Qr("invalid",r)}for(var s in Ot(n,o),i=null,o)if(o.hasOwnProperty(s)){var a=o[s];"children"===s?"string"==typeof a?r.textContent!==a&&(!0!==o.suppressHydrationWarning&&ui(r.textContent,a,t),i=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(!0!==o.suppressHydrationWarning&&ui(r.textContent,a,t),i=["children",""+a]):x.hasOwnProperty(s)&&null!=a&&"onScroll"===s&&Qr("scroll",r)}switch(n){case"input":ot(r),ft(r,o,!0);break;case"textarea":ot(r),_t(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=li)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=xt(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=s.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),"select"===n&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ei]=e,t[wi]=r,ma(t,e),e.stateNode=t;t:{switch(s=Rt(n,r),n){case"dialog":Qr("cancel",t),Qr("close",t),i=r;break;case"iframe":case"object":case"embed":Qr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xr.length;i++)Qr(Xr[i],t);i=r;break;case"source":Qr("error",t),i=r;break;case"img":case"image":case"link":Qr("error",t),Qr("load",t),i=r;break;case"details":Qr("toggle",t),i=r;break;case"input":lt(t,r),i=ut(t,r),Qr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$({},r,{value:void 0}),Qr("invalid",t);break;case"textarea":vt(t,r),i=yt(t,r),Qr("invalid",t)}for(o in Ot(n,i),a=i)if(a.hasOwnProperty(o)){var u=a[o];"style"===o?Pt(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&Mt(t,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&St(t,u):"number"==typeof u&&St(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(x.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Qr("scroll",t):null!=u&&R(t,o,u,s))}switch(n){case"input":ot(t),ft(t,r,!1);break;case"textarea":ot(t),_t(t);break;case"option":null!=r.value&&t.setAttribute("value",""+rt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(o=r.value)?gt(t,!!r.multiple,o,!1):null!=r.defaultValue&&gt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(t.onclick=li)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ia(e),null;case 6:if(t&&null!=e.stateNode)xa(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(m(166));if(n=ls(us.current),ls(ss.current),$o(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ei]=e,(o=r.nodeValue!==n)&&null!==(t=Go))switch(t.tag){case 3:ui(r.nodeValue,n,0!=(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&ui(r.nodeValue,n,0!=(1&t.mode))}o&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Ei]=e,e.stateNode=r}return Ia(e),null;case 13:if(Ai(ds),r=e.memoizedState,Uo&&null!==Bo&&0!=(1&e.mode)&&0==(128&e.flags)){for(r=Bo;r;)r=_i(r.nextSibling);return Ko(),e.flags|=98560,e}if(null!==r&&null!==r.dehydrated){if(r=$o(e),null===t){if(!r)throw Error(m(318));if(!(r=null!==(r=e.memoizedState)?r.dehydrated:null))throw Error(m(317));r[Ei]=e}else Ko(),0==(128&e.flags)&&(e.memoizedState=null),e.flags|=4;return Ia(e),null}return null!==Vo&&(gl(Vo),Vo=null),0!=(128&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?$o(e):n=null!==t.memoizedState,r!==n&&r&&(e.child.flags|=8192,0!=(1&e.mode)&&(null===t||0!=(1&ds.current)?0===Gu&&(Gu=3):Ml())),null!==e.updateQueue&&(e.flags|=4),Ia(e),null);case 4:return hs(),null===t&&Jr(e.stateNode.containerInfo),Ia(e),null;case 10:return so(e.type._context),Ia(e),null;case 19:if(Ai(ds),null===(o=e.memoizedState))return Ia(e),null;if(r=0!=(128&e.flags),null===(s=o.rendering))if(r)Na(o,!1);else{if(0!==Gu||null!==t&&0!=(128&t.flags))for(t=e.child;null!==t;){if(null!==(s=gs(t))){for(e.flags|=128,Na(o,!1),null!==(r=s.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Di(ds,1&ds.current|2),e.child}t=t.sibling}null!==o.tail&&ce()>Qu&&(e.flags|=128,r=!0,Na(o,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=gs(s))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Na(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Uo)return Ia(e),null}else 2*ce()-o.renderingStartTime>Qu&&1073741824!==n&&(e.flags|=128,r=!0,Na(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=o.last)?n.sibling=s:e.child=s,o.last=s)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ce(),e.sibling=null,n=ds.current,Di(ds,r?1&n|2:1&n),e):(Ia(e),null);case 22:case 23:return xl(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!=(1&e.mode)?0!=(1073741824&ju)&&(Ia(e),6&e.subtreeFlags&&(e.flags|=8192)):Ia(e),null;case 24:case 25:return null}throw Error(m(156,e.tag))}ma=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},_a=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ls(ss.current);var o,s=null;switch(n){case"input":i=ut(t,i),r=ut(t,r),s=[];break;case"select":i=$({},i,{value:void 0}),r=$({},r,{value:void 0}),s=[];break;case"textarea":i=yt(t,i),r=yt(t,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(t.onclick=li)}for(l in Ot(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(x.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(null!=u||null!=a))if("style"===l)if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,a=a?a.__html:void 0,null!=u&&a!==u&&(s=s||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(s=s||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(x.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Qr("scroll",t),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}},xa=function(t,e,n,r){n!==r&&(e.flags|=4)};var La=k.ReactCurrentOwner,Oa=!1;function Ra(t,e,n,r){e.child=null===t?is(e,null,n,r):rs(e,t.child,n,r)}function ka(t,e,n,r,i){n=n.render;var o=e.ref;return uo(e,i),r=Ls(t,e,n,r,o,i),n=Os(),null===t||Oa?(Uo&&n&&jo(e),e.flags|=1,Ra(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tu(t,e,i))}function Ta(t,e,n,r,i){if(null===t){var o=n.type;return"function"!=typeof o||Gl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ul(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,Aa(t,e,o,r,i))}if(o=t.child,0==(t.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:mr)(s,r)&&t.ref===e.ref)return tu(t,e,i)}return e.flags|=1,(t=Bl(o,r)).ref=e.ref,t.return=e,e.child=t}function Aa(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(mr(o,r)&&t.ref===e.ref){if(Oa=!1,e.pendingProps=r=o,0==(t.lanes&i))return e.lanes=t.lanes,tu(t,e,i);0!=(131072&t.flags)&&(Oa=!0)}}return za(t,e,n,r,i)}function Da(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0==(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Di(qu,ju),ju|=n;else{if(0==(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Di(qu,ju),ju|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Di(qu,ju),ju|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,Di(qu,ju),ju|=r;return Ra(t,e,i,n),e.child}function Fa(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function za(t,e,n,r,i){var o=Bi(n)?qi:zi.current;return o=Gi(e,o),uo(e,i),n=Ls(t,e,n,r,o,i),r=Os(),null===t||Oa?(Uo&&r&&jo(e),e.flags|=1,Ra(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tu(t,e,i))}function ja(t,e,n,r,i){if(Bi(n)){var o=!0;Yi(e)}else o=!1;if(uo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),So(e,n,r),No(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=n.contextType;"object"==typeof l&&null!==l?l=lo(l):l=Gi(e,l=Bi(n)?qi:zi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||u!==l)&&Co(e,s,r,l),ho=!1;var f=e.memoizedState;s.state=f,_o(e,r,s,i),u=e.memoizedState,a!==r||f!==u||ji.current||ho?("function"==typeof c&&(Eo(e,n,c,r),u=e.memoizedState),(a=ho||Mo(e,n,a,r,f,u,l))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.flags|=4194308)):("function"==typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):("function"==typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,po(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:to(e.type,a),s.props=l,h=e.pendingProps,f=s.context,"object"==typeof(u=n.contextType)&&null!==u?u=lo(u):u=Gi(e,u=Bi(n)?qi:zi.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==h||f!==u)&&Co(e,s,r,u),ho=!1,f=e.memoizedState,s.state=f,_o(e,r,s,i);var d=e.memoizedState;a!==h||f!==d||ji.current||ho?("function"==typeof p&&(Eo(e,n,p,r),d=e.memoizedState),(l=ho||Mo(e,n,l,r,f,d,u)||!1)?(c||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,d,u),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,d,u)),"function"==typeof s.componentDidUpdate&&(e.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),s.props=r,s.state=d,s.context=u,r=l):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return qa(t,e,n,r,o,i)}function qa(t,e,n,r,i,o){Fa(t,e);var s=0!=(128&e.flags);if(!r&&!s)return i&&Wi(e,n,!1),tu(t,e,o);r=e.stateNode,La.current=e;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=rs(e,t.child,null,o),e.child=rs(e,null,a,o)):Ra(t,e,a,o),e.memoizedState=r.state,i&&Wi(e,n,!0),e.child}function Ga(t){var e=t.stateNode;e.pendingContext?Vi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Vi(0,e.context,!1),cs(t,e.containerInfo)}function Ba(t,e,n,r,i){return Ko(),Jo(i),e.flags|=256,Ra(t,e,n,r),e.child}var Ua={dehydrated:null,treeContext:null,retryLane:0};function Va(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xa(t,e){return{baseLanes:t.baseLanes|e,cachePool:null,transitions:t.transitions}}function Ya(t,e,n){var r,i=e.pendingProps,o=ds.current,s=!1,a=0!=(128&e.flags);if((r=a)||(r=(null===t||null!==t.memoizedState)&&0!=(2&o)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Di(ds,1&o),null===t)return Ho(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0==(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},0==(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Xl(o,i,0,null),t=Vl(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Va(n),e.memoizedState=Ua,t):Wa(e,o));if(null!==(o=t.memoizedState)){if(null!==(r=o.dehydrated)){if(a)return 256&e.flags?(e.flags&=-257,$a(t,e,n,Error(m(422)))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=i.fallback,o=e.mode,i=Xl({mode:"visible",children:i.children},o,0,null),(s=Vl(s,o,n,null)).flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,0!=(1&e.mode)&&rs(e,t.child,null,n),e.child.memoizedState=Va(n),e.memoizedState=Ua,s);if(0==(1&e.mode))e=$a(t,e,n,null);else if("$!"===r.data)e=$a(t,e,n,Error(m(419)));else if(i=0!=(n&t.childLanes),Oa||i){if(null!==(i=Du)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!=(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,ll(t,i,-1))}Ml(),e=$a(t,e,n,Error(m(421)))}else"$?"===r.data?(e.flags|=128,e.child=t.child,e=Dl.bind(null,t),r._reactRetry=e,e=null):(n=o.treeContext,Bo=_i(r.nextSibling),Go=e,Uo=!0,Vo=null,null!==n&&(Ro[ko++]=Ao,Ro[ko++]=Do,Ro[ko++]=To,Ao=n.id,Do=n.overflow,To=e),(e=Wa(e,e.pendingProps.children)).flags|=4096);return e}return s?(i=Qa(t,e,i.children,i.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?Va(n):Xa(o,n),s.childLanes=t.childLanes&~n,e.memoizedState=Ua,i):(n=Ha(t,e,i.children,n),e.memoizedState=null,n)}return s?(i=Qa(t,e,i.children,i.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?Va(n):Xa(o,n),s.childLanes=t.childLanes&~n,e.memoizedState=Ua,i):(n=Ha(t,e,i.children,n),e.memoizedState=null,n)}function Wa(t,e){return(e=Xl({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ha(t,e,n,r){var i=t.child;return t=i.sibling,n=Bl(i,{mode:"visible",children:n}),0==(1&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n}function Qa(t,e,n,r,i){var o=e.mode,s=(t=t.child).sibling,a={mode:"hidden",children:n};return 0==(1&o)&&e.child!==t?((n=e.child).childLanes=0,n.pendingProps=a,e.deletions=null):(n=Bl(t,a)).subtreeFlags=14680064&t.subtreeFlags,null!==s?r=Bl(s,r):(r=Vl(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function $a(t,e,n,r){return null!==r&&Jo(r),rs(e,t.child,null,n),(t=Wa(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ka(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),ao(t.return,e,n)}function Ja(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Za(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ra(t,e,r.children,n),0!=(2&(r=ds.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!=(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ka(t,n,e);else if(19===t.tag)Ka(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Di(ds,r),0==(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===gs(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ja(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===gs(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ja(e,!0,n,null,o);break;case"together":Ja(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tu(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Uu|=e.lanes,0==(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(m(153));if(null!==e.child){for(n=Bl(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Bl(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function eu(t,e){switch(qo(e),e.tag){case 1:return Bi(e.type)&&Ui(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return hs(),Ai(ji),Ai(zi),vs(),0!=(65536&(t=e.flags))&&0==(128&t)?(e.flags=-65537&t|128,e):null;case 5:return ps(e),null;case 13:if(Ai(ds),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(m(340));Ko()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ai(ds),null;case 4:return hs(),null;case 10:return so(e.type._context),null;case 22:case 23:return xl(),null;default:return null}}var nu=!1,ru=!1,iu="function"==typeof WeakSet?WeakSet:Set,ou=null;function su(t,e){var n=t.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){kl(t,e,n)}else n.current=null}function au(t,e,n){try{n()}catch(n){kl(t,e,n)}}var uu=!1;function lu(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&au(e,n,o)}i=i.next}while(i!==r)}}function cu(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hu(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"==typeof e?e(t):e.current=t}}function fu(t){var e=t.alternate;null!==e&&(t.alternate=null,fu(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[Ei],delete e[wi],delete e[Si],delete e[Ci],delete e[Ni])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pu(t){return 5===t.tag||3===t.tag||4===t.tag}function du(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||pu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function gu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=li));else if(4!==r&&null!==(t=t.child))for(gu(t,e,n),t=t.sibling;null!==t;)gu(t,e,n),t=t.sibling}function yu(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(yu(t,e,n),t=t.sibling;null!==t;)yu(t,e,n),t=t.sibling}var vu=null,mu=!1;function _u(t,e,n){for(n=n.child;null!==n;)xu(t,e,n),n=n.sibling}function xu(t,e,n){if(me&&"function"==typeof me.onCommitFiberUnmount)try{me.onCommitFiberUnmount(ve,n)}catch(t){}switch(n.tag){case 5:ru||su(n,e);case 6:var r=vu,i=mu;vu=null,_u(t,e,n),mu=i,null!==(vu=r)&&(mu?(t=vu,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):vu.removeChild(n.stateNode));break;case 18:null!==vu&&(mu?(t=vu,n=n.stateNode,8===t.nodeType?mi(t.parentNode,n):1===t.nodeType&&mi(t,n),en(t)):mi(vu,n.stateNode));break;case 4:r=vu,i=mu,vu=n.stateNode.containerInfo,mu=!0,_u(t,e,n),vu=r,mu=i;break;case 0:case 11:case 14:case 15:if(!ru&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!=(2&o)||0!=(4&o))&&au(n,e,s),i=i.next}while(i!==r)}_u(t,e,n);break;case 1:if(!ru&&(su(n,e),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(t){kl(n,e,t)}_u(t,e,n);break;case 21:_u(t,e,n);break;case 22:1&n.mode?(ru=(r=ru)||null!==n.memoizedState,_u(t,e,n),ru=r):_u(t,e,n);break;default:_u(t,e,n)}}function bu(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new iu),e.forEach((function(e){var r=Fl.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Eu(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;t:for(;null!==a;){switch(a.tag){case 5:vu=a.stateNode,mu=!1;break t;case 3:case 4:vu=a.stateNode.containerInfo,mu=!0;break t}a=a.return}if(null===vu)throw Error(m(160));xu(o,s,i),vu=null,mu=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(t){kl(i,e,t)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)wu(e,t),e=e.sibling}function wu(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Eu(e,t),Mu(t),4&r){try{lu(3,t,t.return),cu(3,t)}catch(e){kl(t,t.return,e)}try{lu(5,t,t.return)}catch(e){kl(t,t.return,e)}}break;case 1:Eu(e,t),Mu(t),512&r&&null!==n&&su(n,n.return);break;case 5:if(Eu(e,t),Mu(t),512&r&&null!==n&&su(n,n.return),32&t.flags){var i=t.stateNode;try{St(i,"")}catch(e){kl(t,t.return,e)}}if(4&r&&null!=(i=t.stateNode)){var o=t.memoizedProps,s=null!==n?n.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===a&&"radio"===o.type&&null!=o.name&&ct(i,o),Rt(a,s);var l=Rt(a,o);for(s=0;s<u.length;s+=2){var c=u[s],h=u[s+1];"style"===c?Pt(i,h):"dangerouslySetInnerHTML"===c?Mt(i,h):"children"===c?St(i,h):R(i,c,h,l)}switch(a){case"input":ht(i,o);break;case"textarea":mt(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?gt(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?gt(i,!!o.multiple,o.defaultValue,!0):gt(i,!!o.multiple,o.multiple?[]:"",!1))}i[wi]=o}catch(e){kl(t,t.return,e)}}break;case 6:if(Eu(e,t),Mu(t),4&r){if(null===t.stateNode)throw Error(m(162));l=t.stateNode,c=t.memoizedProps;try{l.nodeValue=c}catch(e){kl(t,t.return,e)}}break;case 3:if(Eu(e,t),Mu(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{en(e.containerInfo)}catch(e){kl(t,t.return,e)}break;case 4:default:Eu(e,t),Mu(t);break;case 13:Eu(e,t),Mu(t),8192&(l=t.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Hu=ce()),4&r&&bu(t);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&t.mode?(ru=(c=ru)||l,Eu(e,t),ru=c):Eu(e,t),Mu(t),8192&r){c=null!==t.memoizedState;t:for(h=null,f=t;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(a=f.stateNode,s=null!=(u=f.memoizedProps.style)&&u.hasOwnProperty("display")?u.display:null,a.style.display=It("display",s))}catch(e){kl(t,t.return,e)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(e){kl(t,t.return,e)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===t)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===t)break t;for(;null===f.sibling;){if(null===f.return||f.return===t)break t;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}if(c&&!l&&0!=(1&t.mode))for(ou=t,t=t.child;null!==t;){for(l=ou=t;null!==ou;){switch(h=(c=ou).child,c.tag){case 0:case 11:case 14:case 15:lu(4,c,c.return);break;case 1:if(su(c,c.return),"function"==typeof(o=c.stateNode).componentWillUnmount){f=c,p=c.return;try{i=f,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(t){kl(f,p,t)}}break;case 5:su(c,c.return);break;case 22:if(null!==c.memoizedState){Iu(l);continue}}null!==h?(h.return=c,ou=h):Iu(l)}t=t.sibling}}break;case 19:Eu(e,t),Mu(t),4&r&&bu(t);case 21:}}function Mu(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(pu(n)){var r=n;break t}n=n.return}throw Error(m(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(St(i,""),r.flags&=-33),yu(t,du(t),i);break;case 3:case 4:var o=r.stateNode.containerInfo;gu(t,du(t),o);break;default:throw Error(m(161))}}catch(e){kl(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function Su(t,e,n){ou=t,Cu(t,e,n)}function Cu(t,e,n){for(var r=0!=(1&t.mode);null!==ou;){var i=ou,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||nu;if(!s){var a=i.alternate,u=null!==a&&null!==a.memoizedState||ru;a=nu;var l=ru;if(nu=s,(ru=u)&&!l)for(ou=i;null!==ou;)u=(s=ou).child,22===s.tag&&null!==s.memoizedState?Pu(i):null!==u?(u.return=s,ou=u):Pu(i);for(;null!==o;)ou=o,Cu(o,e,n),o=o.sibling;ou=i,nu=a,ru=l}Nu(t)}else 0!=(8772&i.subtreeFlags)&&null!==o?(o.return=i,ou=o):Nu(t)}}function Nu(t){for(;null!==ou;){var e=ou;if(0!=(8772&e.flags)){var n=e.alternate;try{if(0!=(8772&e.flags))switch(e.tag){case 0:case 11:case 15:ru||cu(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!ru)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:to(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&xo(e,o,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}xo(e,s,n)}break;case 5:var a=e.stateNode;if(null===n&&4&e.flags){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===e.memoizedState){var l=e.alternate;if(null!==l){var c=l.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&en(h)}}}break;default:throw Error(m(163))}ru||512&e.flags&&hu(e)}catch(t){kl(e,e.return,t)}}if(e===t){ou=null;break}if(null!==(n=e.sibling)){n.return=e.return,ou=n;break}ou=e.return}}function Iu(t){for(;null!==ou;){var e=ou;if(e===t){ou=null;break}var n=e.sibling;if(null!==n){n.return=e.return,ou=n;break}ou=e.return}}function Pu(t){for(;null!==ou;){var e=ou;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cu(4,e)}catch(t){kl(e,n,t)}break;case 1:var r=e.stateNode;if("function"==typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(t){kl(e,i,t)}}var o=e.return;try{hu(e)}catch(t){kl(e,o,t)}break;case 5:var s=e.return;try{hu(e)}catch(t){kl(e,s,t)}}}catch(t){kl(e,e.return,t)}if(e===t){ou=null;break}var a=e.sibling;if(null!==a){a.return=e.return,ou=a;break}ou=e.return}}var Lu,Ou=Math.ceil,Ru=k.ReactCurrentDispatcher,ku=k.ReactCurrentOwner,Tu=k.ReactCurrentBatchConfig,Au=0,Du=null,Fu=null,zu=0,ju=0,qu=Ti(0),Gu=0,Bu=null,Uu=0,Vu=0,Xu=0,Yu=null,Wu=null,Hu=0,Qu=1/0,$u=null,Ku=!1,Ju=null,Zu=null,tl=!1,el=null,nl=0,rl=0,il=null,ol=-1,sl=0;function al(){return 0!=(6&Au)?ce():-1!==ol?ol:ol=ce()}function ul(t){return 0==(1&t.mode)?1:0!=(2&Au)&&0!==zu?zu&-zu:null!==Zi.transition?(0===sl&&(sl=Ie()),sl):0!==(t=Re)?t:t=void 0===(t=window.event)?16:cn(t.type)}function ll(t,e,n){if(50<rl)throw rl=0,il=null,Error(m(185));var r=cl(t,e);return null===r?null:(Le(r,e,n),0!=(2&Au)&&r===Du||(r===Du&&(0==(2&Au)&&(Vu|=e),4===Gu&&yl(r,zu)),fl(r,n),1===e&&0===Au&&0==(1&t.mode)&&(Qu=ce()+500,Qi&&Ji())),r)}function cl(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function hl(t){return(null!==Du||null!==co)&&0!=(1&t.mode)&&0==(2&Au)}function fl(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-_e(o),a=1<<s,u=i[s];-1===u?0!=(a&n)&&0==(a&r)||(i[s]=Ce(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var r,i=Se(t,t===Du?zu:0);if(0===i)null!==n&&ae(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(null!=n&&ae(n),1===e)0===t.tag?(r=vl.bind(null,t),Qi=!0,Ki(r)):Ki(vl.bind(null,t)),yi((function(){0===Au&&Ji()})),n=null;else{switch(ke(i)){case 1:n=fe;break;case 4:n=pe;break;case 16:default:n=de;break;case 536870912:n=ye}n=zl(n,pl.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pl(t,e){if(ol=-1,sl=0,0!=(6&Au))throw Error(m(327));var n=t.callbackNode;if(Ol()&&t.callbackNode!==n)return null;var r=Se(t,t===Du?zu:0);if(0===r)return null;if(0!=(30&r)||0!=(r&t.expiredLanes)||e)e=Sl(t,r);else{e=r;var i=Au;Au|=2;var o=wl();for(Du===t&&zu===e||($u=null,Qu=ce()+500,bl(t,e));;)try{Nl();break}catch(e){El(t,e)}oo(),Ru.current=o,Au=i,null!==Fu?e=0:(Du=null,zu=0,e=Gu)}if(0!==e){if(2===e&&(0!==(i=Ne(t))&&(r=i,e=dl(t,i))),1===e)throw n=Bu,bl(t,0),yl(t,r),fl(t,ce()),n;if(6===e)yl(t,r);else{if(i=t.current.alternate,0==(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!vr(o(),i))return!1}catch(t){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=Sl(t,r))&&(0!==(o=Ne(t))&&(r=o,e=dl(t,o))),1===e))throw n=Bu,bl(t,0),yl(t,r),fl(t,ce()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(m(345));case 2:case 5:Ll(t,Wu,$u);break;case 3:if(yl(t,r),(130023424&r)===r&&10<(e=Hu+500-ce())){if(0!==Se(t,0))break;if(((i=t.suspendedLanes)&r)!==r){al(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=pi(Ll.bind(null,t,Wu,$u),e);break}Ll(t,Wu,$u);break;case 4:if(yl(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-_e(r);o=1<<s,(s=e[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=ce()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ou(r/1960))-r)){t.timeoutHandle=pi(Ll.bind(null,t,Wu,$u),r);break}Ll(t,Wu,$u);break;default:throw Error(m(329))}}}return fl(t,ce()),t.callbackNode===n?pl.bind(null,t):null}function dl(t,e){var n=Yu;return t.current.memoizedState.isDehydrated&&(bl(t,e).flags|=256),2!==(t=Sl(t,e))&&(e=Wu,Wu=n,null!==e&&gl(e)),t}function gl(t){null===Wu?Wu=t:Wu.push.apply(Wu,t)}function yl(t,e){for(e&=~Xu,e&=~Vu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_e(e),r=1<<n;t[n]=-1,e&=~r}}function vl(t){if(0!=(6&Au))throw Error(m(327));Ol();var e=Se(t,0);if(0==(1&e))return fl(t,ce()),null;var n=Sl(t,e);if(0!==t.tag&&2===n){var r=Ne(t);0!==r&&(e=r,n=dl(t,r))}if(1===n)throw n=Bu,bl(t,0),yl(t,e),fl(t,ce()),n;if(6===n)throw Error(m(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ll(t,Wu,$u),fl(t,ce()),null}function ml(t,e){var n=Au;Au|=1;try{return t(e)}finally{0===(Au=n)&&(Qu=ce()+500,Qi&&Ji())}}function _l(t){null!==el&&0===el.tag&&0==(6&Au)&&Ol();var e=Au;Au|=1;var n=Tu.transition,r=Re;try{if(Tu.transition=null,Re=1,t)return t()}finally{Re=r,Tu.transition=n,0==(6&(Au=e))&&Ji()}}function xl(){ju=qu.current,Ai(qu)}function bl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,di(n)),null!==Fu)for(n=Fu.return;null!==n;){var r=n;switch(qo(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ui();break;case 3:hs(),Ai(ji),Ai(zi),vs();break;case 5:ps(r);break;case 4:hs();break;case 13:case 19:Ai(ds);break;case 10:so(r.type._context);break;case 22:case 23:xl()}n=n.return}if(Du=t,Fu=t=Bl(t.current,null),zu=ju=e,Gu=0,Bu=null,Xu=Vu=Uu=0,Wu=Yu=null,null!==co){for(e=0;e<co.length;e++)if(null!==(r=(n=co[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}co=null}return t}function El(t,e){for(;;){var n=Fu;try{if(oo(),ms.current=fa,Ms){for(var r=bs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Ms=!1}if(xs=0,ws=Es=bs=null,Ss=!1,Cs=0,ku.current=null,null===n||null===n.return){Gu=1,Bu=e,Fu=null;break}t:{var o=t,s=n.return,a=n,u=e;if(e=zu,a.flags|=32768,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u,c=a,h=c.tag;if(0==(1&c.mode)&&(0===h||11===h||15===h)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Sa(s);if(null!==p){p.flags&=-257,Ca(p,s,a,0,e),1&p.mode&&Ma(o,l,e),u=l;var d=(e=p).updateQueue;if(null===d){var g=new Set;g.add(u),e.updateQueue=g}else d.add(u);break t}if(0==(1&e)){Ma(o,l,e),Ml();break t}u=Error(m(426))}else if(Uo&&1&a.mode){var y=Sa(s);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),Ca(y,s,a,0,e),Jo(u);break t}}o=u,4!==Gu&&(Gu=2),null===Yu?Yu=[o]:Yu.push(o),u=ya(u,a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e,mo(a,Ea(0,u,e));break t;case 1:o=u;var v=a.type,_=a.stateNode;if(0==(128&a.flags)&&("function"==typeof v.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Zu||!Zu.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e,mo(a,wa(a,o,e));break t}}a=a.return}while(null!==a)}Pl(n)}catch(t){e=t,Fu===n&&null!==n&&(Fu=n=n.return);continue}break}}function wl(){var t=Ru.current;return Ru.current=fa,null===t?fa:t}function Ml(){0!==Gu&&3!==Gu&&2!==Gu||(Gu=4),null===Du||0==(268435455&Uu)&&0==(268435455&Vu)||yl(Du,zu)}function Sl(t,e){var n=Au;Au|=2;var r=wl();for(Du===t&&zu===e||($u=null,bl(t,e));;)try{Cl();break}catch(e){El(t,e)}if(oo(),Au=n,Ru.current=r,null!==Fu)throw Error(m(261));return Du=null,zu=0,Gu}function Cl(){for(;null!==Fu;)Il(Fu)}function Nl(){for(;null!==Fu&&!ue();)Il(Fu)}function Il(t){var e=Lu(t.alternate,t,ju);t.memoizedProps=t.pendingProps,null===e?Pl(t):Fu=e,ku.current=null}function Pl(t){var e=t;do{var n=e.alternate;if(t=e.return,0==(32768&e.flags)){if(null!==(n=Pa(n,e,ju)))return void(Fu=n)}else{if(null!==(n=eu(n,e)))return n.flags&=32767,void(Fu=n);if(null===t)return Gu=6,void(Fu=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Fu=e);Fu=e=t}while(null!==e);0===Gu&&(Gu=5)}function Ll(t,e,n){var r=Re,i=Tu.transition;try{Tu.transition=null,Re=1,function(t,e,n,r){do{Ol()}while(null!==el);if(0!=(6&Au))throw Error(m(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(m(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_e(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,o),t===Du&&(Fu=Du=null,zu=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||tl||(tl=!0,zl(de,(function(){return Ol(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=Re;Re=1;var a=Au;Au|=4,ku.current=null,function(t,e){if(ci=rn,wr(t=Er())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(t){n=null;break t}var s=0,a=-1,u=-1,l=0,c=0,h=t,f=null;e:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(a=s+i),h!==o||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===t)break e;if(f===n&&++l===i&&(a=s),f===o&&++c===r&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===a||-1===u?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(hi={focusedElem:t,selectionRange:n},rn=!1,ou=e;null!==ou;)if(t=(e=ou).child,0!=(1028&e.subtreeFlags)&&null!==t)t.return=e,ou=t;else for(;null!==ou;){e=ou;try{var d=e.alternate;if(0!=(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==d){var g=d.memoizedProps,y=d.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:to(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var b=x.body;null!=b&&(b.textContent="")}break;default:throw Error(m(163))}}catch(t){kl(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,ou=t;break}ou=e.return}d=uu,uu=!1}(t,n),wu(n,t),Mr(hi),rn=!!ci,hi=ci=null,t.current=n,Su(n,t,i),le(),Au=a,Re=s,Tu.transition=o}else t.current=n;if(tl&&(tl=!1,el=t,nl=i),0===(o=t.pendingLanes)&&(Zu=null),function(t){if(me&&"function"==typeof me.onCommitFiberRoot)try{me.onCommitFiberRoot(ve,t,void 0,128==(128&t.current.flags))}catch(t){}}(n.stateNode),fl(t,ce()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)r(e[n]);if(Ku)throw Ku=!1,t=Ju,Ju=null,t;0!=(1&nl)&&0!==t.tag&&Ol(),0!=(1&(o=t.pendingLanes))?t===il?rl++:(rl=0,il=t):rl=0,Ji()}(t,e,n,r)}finally{Tu.transition=i,Re=r}return null}function Ol(){if(null!==el){var t=ke(nl),e=Tu.transition,n=Re;try{if(Tu.transition=null,Re=16>t?16:t,null===el)var r=!1;else{if(t=el,el=null,nl=0,0!=(6&Au))throw Error(m(331));var i=Au;for(Au|=4,ou=t.current;null!==ou;){var o=ou,s=o.child;if(0!=(16&ou.flags)){var a=o.deletions;if(null!==a){for(var u=0;u<a.length;u++){var l=a[u];for(ou=l;null!==ou;){var c=ou;switch(c.tag){case 0:case 11:case 15:lu(8,c,o)}var h=c.child;if(null!==h)h.return=c,ou=h;else for(;null!==ou;){var f=(c=ou).sibling,p=c.return;if(fu(c),c===l){ou=null;break}if(null!==f){f.return=p,ou=f;break}ou=p}}}var d=o.alternate;if(null!==d){var g=d.child;if(null!==g){d.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}ou=o}}if(0!=(2064&o.subtreeFlags)&&null!==s)s.return=o,ou=s;else t:for(;null!==ou;){if(0!=(2048&(o=ou).flags))switch(o.tag){case 0:case 11:case 15:lu(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,ou=v;break t}ou=o.return}}var _=t.current;for(ou=_;null!==ou;){var x=(s=ou).child;if(0!=(2064&s.subtreeFlags)&&null!==x)x.return=s,ou=x;else t:for(s=_;null!==ou;){if(0!=(2048&(a=ou).flags))try{switch(a.tag){case 0:case 11:case 15:cu(9,a)}}catch(t){kl(a,a.return,t)}if(a===s){ou=null;break t}var b=a.sibling;if(null!==b){b.return=a.return,ou=b;break t}ou=a.return}}if(Au=i,Ji(),me&&"function"==typeof me.onPostCommitFiberRoot)try{me.onPostCommitFiberRoot(ve,t)}catch(t){}r=!0}return r}finally{Re=n,Tu.transition=e}}return!1}function Rl(t,e,n){yo(t,e=Ea(0,e=ya(n,e),1)),e=al(),null!==(t=cl(t,1))&&(Le(t,1,e),fl(t,e))}function kl(t,e,n){if(3===t.tag)Rl(t,t,n);else for(;null!==e;){if(3===e.tag){Rl(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Zu||!Zu.has(r))){yo(e,t=wa(e,t=ya(n,t),1)),t=al(),null!==(e=cl(e,1))&&(Le(e,1,t),fl(e,t));break}}e=e.return}}function Tl(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=al(),t.pingedLanes|=t.suspendedLanes&n,Du===t&&(zu&n)===n&&(4===Gu||3===Gu&&(130023424&zu)===zu&&500>ce()-Hu?bl(t,0):Xu|=n),fl(t,e)}function Al(t,e){0===e&&(0==(1&t.mode)?e=1:(e=we,0==(130023424&(we<<=1))&&(we=4194304)));var n=al();null!==(t=cl(t,e))&&(Le(t,e,n),fl(t,n))}function Dl(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Al(t,n)}function Fl(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(m(314))}null!==r&&r.delete(e),Al(t,n)}function zl(t,e){return se(t,e)}function jl(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ql(t,e,n,r){return new jl(t,e,n,r)}function Gl(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Bl(t,e){var n=t.alternate;return null===n?((n=ql(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,i,o){var s=2;if(r=t,"function"==typeof t)Gl(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case D:return Vl(n.children,i,o,e);case F:s=8,i|=8;break;case z:return(t=ql(12,n,e,2|i)).elementType=z,t.lanes=o,t;case B:return(t=ql(13,n,e,i)).elementType=B,t.lanes=o,t;case U:return(t=ql(19,n,e,i)).elementType=U,t.lanes=o,t;case Y:return Xl(n,i,o,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case j:s=10;break t;case q:s=9;break t;case G:s=11;break t;case V:s=14;break t;case X:s=16,r=null;break t}throw Error(m(130,null==t?t:typeof t,""))}return(e=ql(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Vl(t,e,n,r){return(t=ql(7,t,r,e)).lanes=n,t}function Xl(t,e,n,r){return(t=ql(22,t,r,e)).elementType=Y,t.lanes=n,t.stateNode={},t}function Yl(t,e,n){return(t=ql(6,t,null,e)).lanes=n,t}function Wl(t,e,n){return(e=ql(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hl(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pe(0),this.expirationTimes=Pe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ql(t,e,n,r,i,o,s,a,u){return t=new Hl(t,e,n,a,u),1===e?(e=1,!0===o&&(e|=8)):e=0,o=ql(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fo(o),t}function $l(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:A,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Kl(t){if(!t)return Fi;t:{if(ee(t=t._reactInternals)!==t||1!==t.tag)throw Error(m(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Bi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(m(171))}if(1===t.tag){var n=t.type;if(Bi(n))return Xi(t,n,e)}return e}function Jl(t,e,n,r,i,o,s,a,u){return(t=Ql(n,r,!0,t,0,o,0,a,u)).context=Kl(null),n=t.current,(o=go(r=al(),i=ul(n))).callback=null!=e?e:null,yo(n,o),t.current.lanes=i,Le(t,i,r),fl(t,r),t}function Zl(t,e,n,r){var i=e.current,o=al(),s=ul(i);return n=Kl(n),null===e.context?e.context=n:e.pendingContext=n,(e=go(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),yo(i,e),null!==(t=ll(i,s,o))&&vo(t,i,s),s}function tc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function ec(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function nc(t,e){ec(t,e),(t=t.alternate)&&ec(t,e)}Lu=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||ji.current)Oa=!0;else{if(0==(t.lanes&n)&&0==(128&e.flags))return Oa=!1,function(t,e,n){switch(e.tag){case 3:Ga(e),Ko();break;case 5:fs(e);break;case 1:Bi(e.type)&&Yi(e);break;case 4:cs(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Di(eo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Di(ds,1&ds.current),e.flags|=128,null):0!=(n&e.child.childLanes)?Ya(t,e,n):(Di(ds,1&ds.current),null!==(t=tu(t,e,n))?t.sibling:null);Di(ds,1&ds.current);break;case 19:if(r=0!=(n&e.childLanes),0!=(128&t.flags)){if(r)return Za(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Di(ds,ds.current),r)break;return null;case 22:case 23:return e.lanes=0,Da(t,e,n)}return tu(t,e,n)}(t,e,n);Oa=0!=(131072&t.flags)}else Oa=!1,Uo&&0!=(1048576&e.flags)&&zo(e,Oo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps;var i=Gi(e,zi.current);uo(e,n),i=Ls(null,e,r,t,i,n);var o=Os();return e.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bi(r)?(o=!0,Yi(e)):o=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fo(e),i.updater=wo,e.stateNode=i,i._reactInternals=e,No(e,r,t,n),e=qa(null,e,r,!0,o,n)):(e.tag=0,Uo&&o&&jo(e),Ra(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"==typeof t)return Gl(t)?1:0;if(null!=t){if((t=t.$$typeof)===G)return 11;if(t===V)return 14}return 2}(r),t=to(r,t),i){case 0:e=za(null,e,r,t,n);break t;case 1:e=ja(null,e,r,t,n);break t;case 11:e=ka(null,e,r,t,n);break t;case 14:e=Ta(null,e,r,to(r.type,t),n);break t}throw Error(m(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,za(t,e,r,i=e.elementType===r?i:to(r,i),n);case 1:return r=e.type,i=e.pendingProps,ja(t,e,r,i=e.elementType===r?i:to(r,i),n);case 3:t:{if(Ga(e),null===t)throw Error(m(387));r=e.pendingProps,i=(o=e.memoizedState).element,po(t,e),_o(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Ba(t,e,r,n,i=Error(m(423)));break t}if(r!==i){e=Ba(t,e,r,n,i=Error(m(424)));break t}for(Bo=_i(e.stateNode.containerInfo.firstChild),Go=e,Uo=!0,Vo=null,n=is(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ko(),r===i){e=tu(t,e,n);break t}Ra(t,e,r,n)}e=e.child}return e;case 5:return fs(e),null===t&&Ho(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,fi(r,i)?s=null:null!==o&&fi(r,o)&&(e.flags|=32),Fa(t,e),Ra(t,e,s,n),e.child;case 6:return null===t&&Ho(e),null;case 13:return Ya(t,e,n);case 4:return cs(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=rs(e,null,r,n):Ra(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ka(t,e,r,i=e.elementType===r?i:to(r,i),n);case 7:return Ra(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ra(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Di(eo,r._currentValue),r._currentValue=s,null!==o)if(vr(o.value,s)){if(o.children===i.children&&!ji.current){e=tu(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){s=o.child;for(var u=a.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=go(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var c=(l=l.shared).pending;null===c?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),ao(o.return,n,e),a.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(m(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),ao(s,n,e),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Ra(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,uo(e,n),r=r(i=lo(i)),e.flags|=1,Ra(t,e,r,n),e.child;case 14:return i=to(r=e.type,e.pendingProps),Ta(t,e,r,i=to(r.type,i),n);case 15:return Aa(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:to(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Bi(r)?(t=!0,Yi(e)):t=!1,uo(e,n),So(e,r,i),No(e,r,i,n),qa(null,e,r,!0,t,n);case 19:return Za(t,e,n);case 22:return Da(t,e,n)}throw Error(m(156,e.tag))};var rc="function"==typeof reportError?reportError:function(t){console.error(t)};function ic(t){this._internalRoot=t}function oc(t){this._internalRoot=t}function sc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function ac(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function uc(){}function lc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"==typeof i){var a=i;i=function(){var t=tc(s);a.call(t)}}Zl(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var t=tc(s);o.call(t)}}var s=Jl(e,r,t,0,null,!1,0,"",uc);return t._reactRootContainer=s,t[Mi]=s.current,Jr(8===t.nodeType?t.parentNode:t),_l(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"==typeof r){var a=r;r=function(){var t=tc(u);a.call(t)}}var u=Ql(t,0,!1,null,0,!1,0,"",uc);return t._reactRootContainer=u,t[Mi]=u.current,Jr(8===t.nodeType?t.parentNode:t),_l((function(){Zl(e,u,n,r)})),u}(n,e,t,i,r);return tc(s)}oc.prototype.render=ic.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(m(409));Zl(t,e,null,null)},oc.prototype.unmount=ic.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;_l((function(){Zl(null,t,null,null)})),e[Mi]=null}},oc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fe();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ye.length&&0!==e&&e<Ye[n].priority;n++);Ye.splice(n,0,t),0===n&&$e(t)}},Te=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Me(e.pendingLanes);0!==n&&(Oe(e,1|n),fl(e,ce()),0==(6&Au)&&(Qu=ce()+500,Ji()))}break;case 13:var r=al();_l((function(){return ll(t,1,r)})),nc(t,1)}},Ae=function(t){13===t.tag&&(ll(t,134217728,al()),nc(t,134217728))},De=function(t){if(13===t.tag){var e=al(),n=ul(t);ll(t,n,e),nc(t,n)}},Fe=function(){return Re},ze=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}},At=function(t,e,n){switch(e){case"input":if(ht(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Oi(r);if(!i)throw Error(m(90));st(r),ht(r,i)}}}break;case"textarea":mt(t,n);break;case"select":null!=(e=n.value)&&gt(t,!!n.multiple,e,!1)}},Gt=ml,Bt=_l;var cc={usingClientEntryPoint:!1,Events:[Pi,Li,Oi,jt,qt,ml]},hc={findFiberByHostInstance:Ii,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},fc={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ie(t))?null:t.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var pc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pc.isDisabled&&pc.supportsFiber)try{ve=pc.inject(fc),me=pc}catch(wt){}}r=cc,i=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!sc(e))throw Error(m(200));return $l(t,e,null,n)},s=function(t,e){if(!sc(t))throw Error(m(299));var n=!1,r="",i=rc;return null!=e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Ql(t,1,!1,null,0,n,0,r,i),t[Mi]=e.current,Jr(8===t.nodeType?t.parentNode:t),new ic(e)},a=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(m(188));throw t=Object.keys(t).join(","),Error(m(268,t))}return t=null===(t=ie(e))?null:t.stateNode},u=function(t){return _l(t)},l=function(t,e,n){if(!ac(e))throw Error(m(200));return lc(null,t,e,!0,n)},c=function(t,e,n){if(!sc(t))throw Error(m(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=rc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Jl(e,null,t,1,null!=n?n:null,i,0,o,s),t[Mi]=e.current,Jr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new oc(e)},h=function(t,e,n){if(!ac(e))throw Error(m(200));return lc(null,t,e,!1,n)},f=function(t){if(!ac(t))throw Error(m(40));return!!t._reactRootContainer&&(_l((function(){lc(null,null,t,!1,(function(){t._reactRootContainer=null,t[Mi]=null}))})),!0)},p=ml,d=function(t,e,n,r){if(!ac(n))throw Error(m(200));if(null==t||void 0===t._reactInternals)throw Error(m(38));return lc(t,e,n,!1,r)},g="18.1.0-next-22edb9f77-20220426"})),o.register("fO90s",(function(t,e){t.exports=o("gcnCG")})),o.register("gcnCG",(function(e,n){var r,i,o,s,a,u,l,c,h,f,p,d,g,y,v,m,_,x,b;function E(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<S(i,e)))break t;t[r]=e,t[n]=i,n=r}}function w(t){return 0===t.length?null:t[0]}function M(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,a=t[s],u=s+1,l=t[u];if(0>S(a,n))u<i&&0>S(l,a)?(t[r]=l,t[u]=n,r=u):(t[r]=a,t[s]=n,r=s);else{if(!(u<i&&0>S(l,n)))break t;t[r]=l,t[u]=n,r=u}}}return e}function S(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if(t(e.exports,"unstable_now",(()=>r),(t=>r=t)),t(e.exports,"unstable_IdlePriority",(()=>i),(t=>i=t)),t(e.exports,"unstable_ImmediatePriority",(()=>o),(t=>o=t)),t(e.exports,"unstable_LowPriority",(()=>s),(t=>s=t)),t(e.exports,"unstable_NormalPriority",(()=>a),(t=>a=t)),t(e.exports,"unstable_Profiling",(()=>u),(t=>u=t)),t(e.exports,"unstable_UserBlockingPriority",(()=>l),(t=>l=t)),t(e.exports,"unstable_cancelCallback",(()=>c),(t=>c=t)),t(e.exports,"unstable_continueExecution",(()=>h),(t=>h=t)),t(e.exports,"unstable_forceFrameRate",(()=>f),(t=>f=t)),t(e.exports,"unstable_getCurrentPriorityLevel",(()=>p),(t=>p=t)),t(e.exports,"unstable_getFirstCallbackNode",(()=>d),(t=>d=t)),t(e.exports,"unstable_next",(()=>g),(t=>g=t)),t(e.exports,"unstable_pauseExecution",(()=>y),(t=>y=t)),t(e.exports,"unstable_requestPaint",(()=>v),(t=>v=t)),t(e.exports,"unstable_runWithPriority",(()=>m),(t=>m=t)),t(e.exports,"unstable_scheduleCallback",(()=>_),(t=>_=t)),t(e.exports,"unstable_shouldYield",(()=>x),(t=>x=t)),t(e.exports,"unstable_wrapCallback",(()=>b),(t=>b=t)),"object"==typeof performance&&"function"==typeof performance.now){var C=performance;r=function(){return C.now()}}else{var N=Date,I=N.now();r=function(){return N.now()-I}}var P=[],L=[],O=1,R=null,k=3,T=!1,A=!1,D=!1,F="function"==typeof setTimeout?setTimeout:null,z="function"==typeof clearTimeout?clearTimeout:null,j="undefined"!=typeof setImmediate?setImmediate:null;function q(t){for(var e=w(L);null!==e;){if(null===e.callback)M(L);else{if(!(e.startTime<=t))break;M(L),e.sortIndex=e.expirationTime,E(P,e)}e=w(L)}}function G(t){if(D=!1,q(t),!A)if(null!==w(P))A=!0,Z(B);else{var e=w(L);null!==e&&tt(G,e.startTime-t)}}function B(t,e){A=!1,D&&(D=!1,z(Y),Y=-1),T=!0;var n=k;try{for(q(e),R=w(P);null!==R&&(!(R.expirationTime>e)||t&&!Q());){var i=R.callback;if("function"==typeof i){R.callback=null,k=R.priorityLevel;var o=i(R.expirationTime<=e);e=r(),"function"==typeof o?R.callback=o:R===w(P)&&M(P),q(e)}else M(P);R=w(P)}if(null!==R)var s=!0;else{var a=w(L);null!==a&&tt(G,a.startTime-e),s=!1}return s}finally{R=null,k=n,T=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var U,V=!1,X=null,Y=-1,W=5,H=-1;function Q(){return!(r()-H<W)}function $(){if(null!==X){var t=r();H=t;var e=!0;try{e=X(!0,t)}finally{e?U():(V=!1,X=null)}}else V=!1}if("function"==typeof j)U=function(){j($)};else if("undefined"!=typeof MessageChannel){var K=new MessageChannel,J=K.port2;K.port1.onmessage=$,U=function(){J.postMessage(null)}}else U=function(){F($,0)};function Z(t){X=t,V||(V=!0,U())}function tt(t,e){Y=F((function(){t(r())}),e)}i=5,o=1,s=4,a=3,u=null,l=2,c=function(t){t.callback=null},h=function(){A||T||(A=!0,Z(B))},f=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<t?Math.floor(1e3/t):5},p=function(){return k},d=function(){return w(P)},g=function(t){switch(k){case 1:case 2:case 3:var e=3;break;default:e=k}var n=k;k=e;try{return t()}finally{k=n}},y=function(){},v=function(){},m=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=k;k=t;try{return e()}finally{k=n}},_=function(t,e,n){var i=r();switch("object"==typeof n&&null!==n?n="number"==typeof(n=n.delay)&&0<n?i+n:i:n=i,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return t={id:O++,callback:e,priorityLevel:t,startTime:n,expirationTime:o=n+o,sortIndex:-1},n>i?(t.sortIndex=n,E(L,t),null===w(P)&&t===w(L)&&(D?(z(Y),Y=-1):D=!0,tt(G,n-i))):(t.sortIndex=o,E(P,t),A||T||(A=!0,Z(B))),t},x=Q,b=function(t){var e=k;return function(){var n=k;k=e;try{return t.apply(this,arguments)}finally{k=n}}}}));var s,a;s=o("1b2ls");var u;!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),a=(u=o("Xw6Mv")).createRoot,u.hydrateRoot;var l=o("acw62");function c(t,e,n){return t=Math.max(t,e),t=Math.min(t,n)}function h(t,e,n){let r,i=!1;function o(){i=!1,r&&(s.apply(n,r),r=void 0)}function s(...s){i?r=s:(t.apply(n,s),setTimeout(o,e),i=!0)}return s}const f=Math.pow(2,32);function p(t){const e=Math.sin(t[1]*Math.PI/180);const n=t[0]*f/360,r=Math.log((1+e)/(1-e))*f/(4*Math.PI),i=f/2;return[c(n,-i,i),c(r,-i,i)]}function d(t){const e=-2*Math.PI/f;return[360*t[0]/f,90-2*(n=Math.atan(Math.exp(t[1]*e)),n/Math.PI*180)];var n}function g(t,e,n,r,i,o){if(i-r<=n)return;const s=r+i>>1;y(t,e,s,r,i,o%2),g(t,e,n,r,s-1,o+1),g(t,e,n,s+1,i,o+1)}function y(t,e,n,r,i,o){for(;i>r;){if(i-r>600){const s=i-r+1,a=n-r+1,u=Math.log(s),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(s-l)/s)*(a-s/2<0?-1:1);y(t,e,n,Math.max(r,Math.floor(n-a*l/s+c)),Math.min(i,Math.floor(n+(s-a)*l/s+c)),o)}const s=e[2*n+o];let a=r,u=i;for(v(t,e,r,n),e[2*i+o]>s&&v(t,e,r,i);a<u;){for(v(t,e,a,u),a++,u--;e[2*a+o]<s;)a++;for(;e[2*u+o]>s;)u--}e[2*r+o]===s?v(t,e,r,u):(u++,v(t,e,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function v(t,e,n,r){m(t,n,r),m(e,2*n,2*r),m(e,2*n+1,2*r+1)}function m(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i,o,s){const a=[0,t.length-1,0],u=[];let l,c;for(;a.length;){const h=a.pop(),f=a.pop(),p=a.pop();if(f-p<=s){for(let s=p;s<=f;s++)l=e[2*s],c=e[2*s+1],l>=n&&l<=i&&c>=r&&c<=o&&u.push(t[s]);continue}const d=Math.floor((p+f)/2);l=e[2*d],c=e[2*d+1],l>=n&&l<=i&&c>=r&&c<=o&&u.push(t[d]);const g=(h+1)%2;(0===h?n<=l:r<=c)&&(a.push(p),a.push(d-1),a.push(g)),(0===h?i>=l:o>=c)&&(a.push(d+1),a.push(f),a.push(g))}return u}function x(t,e,n,r,i,o){const s=[0,t.length-1,0],a=[],u=i*i;for(;s.length;){const l=s.pop(),c=s.pop(),h=s.pop();if(c-h<=o){for(let i=h;i<=c;i++)b(e[2*i],e[2*i+1],n,r)<=u&&a.push(t[i]);continue}const f=Math.floor((h+c)/2),p=e[2*f],d=e[2*f+1];b(p,d,n,r)<=u&&a.push(t[f]);const g=(l+1)%2;(0===l?n-i<=p:r-i<=d)&&(s.push(h),s.push(f-1),s.push(g)),(0===l?n+i>=p:r+i>=d)&&(s.push(f+1),s.push(c),s.push(g))}return a}function b(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}const E=t=>t[0],w=t=>t[1];class M{constructor(t,e=E,n=w,r=64,i=Float64Array){this.nodeSize=r,this.points=t;const o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),a=this.coords=new i(2*t.length);for(let r=0;r<t.length;r++)s[r]=r,a[2*r]=e(t[r]),a[2*r+1]=n(t[r]);g(s,a,r,0,s.length-1,0)}range(t,e,n,r){return _(this.ids,this.coords,t,e,n,r,this.nodeSize)}within(t,e,n){return x(this.ids,this.coords,t,e,n,this.nodeSize)}}l=o("acw62");const S=(0,(l=o("acw62")).createContext)({});function C(t){const e=new Map;t.features.forEach((t=>{const n=t.properties.track_id,r=e.get(n);r?r.push(t):e.set(n,[t])}));const n={type:"FeatureCollection",features:[]};return e.forEach(((t,e)=>{t.sort(((t,e)=>new Date(t.properties.capture_time)<new Date(e.properties.capture_time)?-1:1)),n.features.push({type:"Feature",properties:{track_id:e,points:t},geometry:{type:"LineString",coordinates:t.map((t=>t.geometry.coordinates))}})})),n}function N(t){const e=[];return t.features.forEach((({geometry:t,properties:n})=>{if("Point"!==t.type)return;const r=p(t.coordinates);e.push({x:r[0],y:r[1],properties:n})})),e}var I=Math.PI/2,P=Math.PI/4,L=2*Math.PI,O={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},R={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},k=/[\s_\-\/\(\)]/g;function T(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(k,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(k,"")===i)return t[n]}function A(t){var e,n,r,i={},o=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=.017453292519943295*t},lat_1:function(t){i.lat1=.017453292519943295*t},lat_2:function(t){i.lat2=.017453292519943295*t},lat_ts:function(t){i.lat_ts=.017453292519943295*t},lon_0:function(t){i.long0=.017453292519943295*t},lon_1:function(t){i.long1=.017453292519943295*t},lon_2:function(t){i.long2=.017453292519943295*t},alpha:function(t){i.alpha=.017453292519943295*parseFloat(t)},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=.017453292519943295*t},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=T(R,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=.017453292519943295*t},pm:function(t){var e=T(O,t);i.from_greenwich=.017453292519943295*(e||parseFloat(t))},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in o)n=o[e],e in s?"function"==typeof(r=s[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}var D=/\s/,F=/[A-Za-z]/,z=/[A-Za-z84_]/,j=/[,\]]/,q=/[\d\.E\-\+]/;function G(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function B(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return U(e,t),t}),r);e&&(t[e]=i)}function U(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void U(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&U(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&U(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void B(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return U(t,e[n]);return B(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}G.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;D.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},G.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(j.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},G.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},G.prototype.number=function(t){if(!q.test(t)){if(j.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},G.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},G.prototype.keyword=function(t){if(z.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!j.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},G.prototype.neutral=function(t){if(F.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(q.test(t))return this.word=t,void(this.state=3);if(!j.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},G.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var V;function X(t){return.017453292519943295*t}function Y(t){var e=new G(t).output(),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return U(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",X],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",X],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",X],["lat0","latitude_of_origin",X],["lat0","standard_parallel_1",X],["lat1","standard_parallel_1",X],["lat2","standard_parallel_2",X],["azimuth","Azimuth"],["alpha","azimuth",X],["srsCode","name"]].forEach((function(e){return n=t,i=(r=e)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=X(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function W(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?W[t]=A(arguments[1]):W[t]=Y(arguments[1]):W[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?W.apply(e,t):W(t)}));if("string"==typeof t){if(t in W)return W[t]}else"EPSG"in t?W["EPSG:"+t.EPSG]=t:"ESRI"in t?W["ESRI:"+t.ESRI]=t:"IAU2000"in t?W["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(V=W)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),V("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),V("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),V.WGS84=V["EPSG:4326"],V["EPSG:3785"]=V["EPSG:3857"],V.GOOGLE=V["EPSG:3857"],V["EPSG:900913"]=V["EPSG:3857"],V["EPSG:102113"]=V["EPSG:3857"];var H=W;var Q=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var $=["3857","900913","3785","102113"];var K=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in H}(t))return H[t];if(function(t){return Q.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Y(t);if(function(t){var e=T(t,"authority");if(e){var n=T(e,"epsg");return n&&$.indexOf(n)>-1}}(e))return H["EPSG:3857"];var n=function(t){var e=T(t,"extension");if(e)return T(e,"proj4")}(e);return n?A(n):e}return function(t){return"+"===t[0]}(t)?A(t):void 0};function J(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function Z(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function tt(t){return t<0?-1:1}function et(t){return Math.abs(t)<=3.14159265359?t:t-tt(t)*L}function nt(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(I-e))/r}function rt(t,e){for(var n,r,i=.5*t,o=I-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),o+=r=I-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999}function it(t){return t}var ot=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Z(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(57.29577951308232*i>90&&57.29577951308232*i<-90&&57.29577951308232*r>180&&57.29577951308232*r<-180)return null;if(Math.abs(Math.abs(i)-I)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*et(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(P+.5*i));else{var o=Math.sin(i),s=nt(this.e,i,o);e=this.x0+this.a*this.k0*et(r-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=I-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=rt(this.e,o)))return null}return e=et(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:it,inverse:it,names:["longlat","identity"]}],st={},at=[];function ut(t,e){var n=at.length;return t.names?(at[n]=t,t.names.forEach((function(t){st[t.toLowerCase()]=n})),this):(console.log(e),!0)}var lt={start:function(){ot.forEach(ut)},add:ut,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==st[e]&&at[st[e]]?at[st[e]]:void 0}},ct={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ht=ct.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};function ft(t,e,n,r,i){if(!t){var o=T(ct,r);o||(o=ht),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<1e-10)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}ct.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var pt={};pt.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},pt.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},pt.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},pt.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},pt.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},pt.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},pt.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},pt.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},pt.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},pt.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},pt.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},pt.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},pt.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},pt.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},pt.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},pt.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},pt.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var dt=function(t,e,n,r,i,o,s){var a={};return a.datum_type=void 0===t||"none"===t?5:4,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=1),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=2,a.datum_params[3]*=484813681109536e-20,a.datum_params[4]*=484813681109536e-20,a.datum_params[5]*=484813681109536e-20,a.datum_params[6]=a.datum_params[6]/1e6+1))),s&&(a.datum_type=3,a.grids=s),a.a=n,a.b=r,a.es=i,a.ep2=o,a},gt={};function yt(t){return void 0===t?null:t.split(",").map(vt)}function vt(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:gt[t]||null,isNull:!1}}function mt(t){return t/3600*Math.PI/180}function _t(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function xt(t){return t.map((function(t){return[mt(t.longitudeShift),mt(t.latitudeShift)]}))}function bt(t,e,n){return{name:_t(t,e+8,e+16).trim(),parent:_t(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Et(t,e,n,r){for(var i=e+176,o=[],s=0;s<n.gridNodeCount;s++){var a={latitudeShift:t.getFloat32(i+16*s,r),longitudeShift:t.getFloat32(i+16*s+4,r),latitudeAccuracy:t.getFloat32(i+16*s+8,r),longitudeAccuracy:t.getFloat32(i+16*s+12,r)};o.push(a)}return o}function wt(t,e){if(!(this instanceof wt))return new wt(t);e=e||function(t){if(t)throw t};var n=K(t);if("object"==typeof n){var r=wt.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=T(pt,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o,s,a,u,l,c,h,f=ft(n.a,n.b,n.rf,n.ellps,n.sphere),p=(o=f.a,s=f.b,f.rf,a=n.R_A,c=((u=o*o)-(l=s*s))/u,h=0,a?(u=(o*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*o,c=0):h=Math.sqrt(c),{es:c,e:h,ep2:(u-l)/l}),d=yt(n.nadgrids),g=n.datum||dt(n.datumCode,n.datum_params,f.a,f.b,p.es,p.ep2,d);J(this,n),J(this,r),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=g,this.init(),e(null,this)}else e(t)}else e(t)}wt.projections=lt,wt.projections.start();var Mt=wt;function St(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function Ct(t,e,n){var r,i,o,s,a=t.x,u=t.y,l=t.z?t.z:0;if(u<-I&&u>-1.001*I)u=-I;else if(u>I&&u<1.001*I)u=I;else{if(u<-I)return{x:-1/0,y:-1/0,z:t.z};if(u>I)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),i=Math.sin(u),s=Math.cos(u),o=i*i,{x:((r=n/Math.sqrt(1-e*o))+l)*s*Math.cos(a),y:(r+l)*s*Math.sin(a),z:(r*(1-e)+l)*i}}function Nt(t,e,n,r){var i,o,s,a,u,l,c,h,f,p,d,g,y,v,m,_=1e-12,x=t.x,b=t.y,E=t.z?t.z:0;if(i=Math.sqrt(x*x+b*b),o=Math.sqrt(x*x+b*b+E*E),i/n<_){if(v=0,o/n<_)return I,m=-r,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(b,x);s=E/o,h=(a=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*a*a)),f=s*u,y=0;do{y++,l=e*(c=n/Math.sqrt(1-e*f*f))/(c+(m=i*h+E*f-c*(1-e*f*f))),g=(d=s*(u=1/Math.sqrt(1-l*(2-l)*a*a)))*h-(p=a*(1-l)*u)*f,h=p,f=d}while(g*g>1e-24&&y<30);return{x:v,y:Math.atan(d/Math.abs(p)),z:m}}function It(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],l=n[6];return{x:l*(t.x-u*t.y+a*t.z)+r,y:l*(u*t.x+t.y-s*t.z)+i,z:l*(-a*t.x+s*t.y+t.z)+o}}}function Pt(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],l=n[6],c=(t.x-r)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-a*f,y:-u*c+h+s*f,z:a*c-s*h+f}}}function Lt(t){return 1===t||2===t}function Ot(t,e,n){if(St(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var r=t.a,i=t.es;if(3===t.datum_type){if(0!==Rt(t,!1,n))return;r=6378137,i=.0066943799901413165}var o=e.a,s=e.b,a=e.es;if(3===e.datum_type&&(o=6378137,s=6356752.314,a=.0066943799901413165),i===a&&r===o&&!Lt(t.datum_type)&&!Lt(e.datum_type))return n;if((n=Ct(n,i,r),Lt(t.datum_type)&&(n=It(n,t.datum_type,t.datum_params)),Lt(e.datum_type)&&(n=Pt(n,e.datum_type,e.datum_params)),n=Nt(n,a,o,s),3===e.datum_type)&&0!==Rt(e,!0,n))return;return n}function Rt(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},o=[],s=0;s<t.grids.length;s++){var a=t.grids[s];if(o.push(a.name),a.isNull){i=r;break}if(a.mandatory,null!==a.grid){var u=a.grid.subgrids[0],l=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,c=u.ll[0]-l,h=u.ll[1]-l,f=u.ll[0]+(u.lim[0]-1)*u.del[0]+l,p=u.ll[1]+(u.lim[1]-1)*u.del[1]+l;if(!(h>r.y||c>r.x||p<r.y||f<r.x||(i=kt(r,e,u),isNaN(i.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+57.29577951308232*-r.x+" "+57.29577951308232*r.y+" tried: '"+o+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function kt(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=et(i.x-Math.PI)+Math.PI;var o=Tt(i,n);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var s,a,u=9;do{if(a=Tt(o,n),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:i.x-(a.x+o.x),y:i.y-(a.y+o.y)},o.x+=s.x,o.y+=s.y}while(u--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=et(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function Tt(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),o=Math.floor(r.y),s=r.x-1*i,a=r.y-1*o,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(o<0||o>=e.lim[1])return u;n=o*e.lim[0]+i;var l=e.cvs[n][0],c=e.cvs[n][1];n++;var h=e.cvs[n][0],f=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],d=e.cvs[n][1];n--;var g=e.cvs[n][0],y=e.cvs[n][1],v=s*a,m=s*(1-a),_=(1-s)*(1-a),x=(1-s)*a;return u.x=_*l+m*h+x*g+v*p,u.y=_*c+m*f+x*y+v*d,u}function At(t,e,n){var r,i,o,s=n.x,a=n.y,u=n.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(r=s,i=-1!=="ew".indexOf(t.axis[o])?"x":"y"):1===o?(r=a,i=-1!=="ns".indexOf(t.axis[o])?"y":"x"):(r=u,i="z"),t.axis[o]){case"e":case"n":l[i]=r;break;case"w":case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l}function Dt(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Ft(t){zt(t.x),zt(t.y)}function zt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function jt(t,e,n,r){var i;if(Array.isArray(n)&&(n=Dt(n)),Ft(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=jt(t,i=new Mt("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=At(t,!1,n)),"longlat"===t.projName)n={x:.017453292519943295*n.x,y:.017453292519943295*n.y,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=Ot(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:57.29577951308232*n.x,y:57.29577951308232*n.y,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?At(e,!0,n):n}var qt=Mt("WGS84");function Gt(t,e,n,r){var i,o,s;return Array.isArray(n)?(i=jt(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(o=jt(t,e,n,r),2===(s=Object.keys(n)).length||s.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;o[r]=n[r]})),o)}function Bt(t){return t instanceof Mt?t:t.oProj?t.oProj:Mt(t)}var Ut=function(t,e,n){t=Bt(t);var r,i=!1;return void 0===e?(e=t,t=qt,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=qt,i=!0),e=Bt(e),n?Gt(t,e,n):(r={forward:function(n,r){return Gt(t,e,n,r)},inverse:function(n,r){return Gt(e,t,n,r)}},i&&(r.oProj=e),r)},Vt={forward:Xt,inverse:function(t){var e=Qt(Jt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:Yt};function Xt(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,d=t.northing,g=t.zoneNumber,y=Kt(g),v=Math.floor(p/1e5),m=Math.floor(d/1e5)%20,i=v,o=m,s=y,a=s-1,u="AJSAJS".charCodeAt(a),l="AFAFAF".charCodeAt(a),c=u+i-1,h=l+o,f=!1,c>90&&(c=c-90+65-1,f=!0),(73===c||u<73&&c>73||(c>73||u<73)&&f)&&c++,(79===c||u<79&&c>79||(c>79||u<79)&&f)&&73==++c&&c++,c>90&&(c=c-90+65-1),h>86?(h=h-86+65-1,f=!0):f=!1,(73===h||l<73&&h>73||(h>73||l<73)&&f)&&h++,(79===h||l<79&&h>79||(h>79||l<79)&&f)&&73==++h&&h++,h>86&&(h=h-86+65-1),String.fromCharCode(c)+String.fromCharCode(h))+n.substr(n.length-5,e)+r.substr(r.length-5,e);var i,o,s,a,u,l,c,h,f;var p,d,g,y,v,m}(function(t){var e,n,r,i,o,s,a,u,l=t.lat,c=t.lon,h=6378137,f=.00669438,p=.9996,d=Wt(l),g=Wt(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60);l>=56&&l<64&&c>=3&&c<12&&(u=32);l>=72&&l<84&&(c>=0&&c<9?u=31:c>=9&&c<21?u=33:c>=21&&c<33?u=35:c>=33&&c<42&&(u=37));a=Wt(6*(u-1)-180+3),e=f/(1-f),n=h/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),r=Math.tan(d)*Math.tan(d),i=e*Math.cos(d)*Math.cos(d),o=Math.cos(d)*(g-a),s=h*((1-f/4-3*f*f/64-5*f*f*f/256)*d-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*d)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*d)-35*f*f*f/3072*Math.sin(6*d));var y=p*n*(o+(1-r+i)*o*o*o/6+(5-18*r+r*r+72*i-58*e)*o*o*o*o*o/120)+5e5,v=p*(s+n*Math.tan(d)*(o*o/2+(5-r+9*i+4*i*i)*o*o*o*o/24+(61-58*r+r*r+600*i-330*e)*o*o*o*o*o*o/720));l<0&&(v+=1e7);return{northing:Math.round(v),easting:Math.round(y),zoneNumber:u,zoneLetter:$t(l)}}({lat:t[1],lon:t[0]}),e)}function Yt(t){var e=Qt(Jt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Wt(t){return t*(Math.PI/180)}function Ht(t){return t/Math.PI*180}function Qt(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,s,a,u,l,c,h,f,p,d=.9996,g=6378137,y=.00669438,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=n-5e5,_=e;r<"N"&&(_-=1e7),h=6*(i-1)-180+3,o=.006739496752268451,p=(f=_/d/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*f)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*f)+151*v*v*v/96*Math.sin(6*f),s=g/Math.sqrt(1-y*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),u=o*Math.cos(p)*Math.cos(p),l=.99330562*g/Math.pow(1-y*Math.sin(p)*Math.sin(p),1.5),c=m/(s*d);var x=p-s*Math.tan(p)/l*(c*c/2-(5+3*a+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*a+298*u+45*a*a-1.6983531815716497-3*u*u)*c*c*c*c*c*c/720);x=Ht(x);var b,E=(c-(1+2*a+u)*c*c*c/6+(5-2*u+28*a-3*u*u+8*o+24*a*a)*c*c*c*c*c/120)/Math.cos(p);if(E=h+Ht(E),t.accuracy){var w=Qt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:w.lat,right:w.lon,bottom:x,left:E}}else b={lat:x,lon:E};return b}function $t(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Kt(t){var e=t%6;return 0===e&&(e=6),e}function Jt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var s=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;r=t.substring(o,o+=2);for(var u=Kt(s),l=function(t,e){var n="AJSAJS".charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(73===++n&&n++,79===n&&n++,n>90){if(i)throw"Bad character: "+t;n=65,i=!0}r+=1e5}return r}(r.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n="AFAFAF".charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(73===++n&&n++,79===n&&n++,n>86){if(i)throw"Bad character: "+t;n=65,i=!0}r+=1e5}return r}(r.charAt(1),u);c<Zt(a);)c+=2e6;var h=n-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,y=0,v=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*f,d=t.substring(o+g),v=parseFloat(d)*f),{easting:y+l,northing:v+c,zoneLetter:a,zoneNumber:s,accuracy:f}}function Zt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function te(t,e,n){if(!(this instanceof te))return new te(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}te.fromMGRS=function(t){return new te(Yt(t))},te.prototype.toMGRS=function(t){return Xt([this.x,this.y],t)};var ee=te;function ne(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+.01068115234375*t))),e[1]=t*(.75-t*(.046875+t*(.01953125+.01068115234375*t)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function re(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function ie(t,e,n){for(var r=1/(1-e),i=t,o=20;o;--o){var s=Math.sin(i),a=1-e*s*s;if(i-=a=(re(i,s,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,Math.abs(a)<1e-10)return i}return i}var oe={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ne(this.es),this.ml0=re(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,o=t.y,s=et(i-this.long0),a=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*s,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>1e-10?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(a,2),l/=Math.sqrt(e);var y=re(o,a,u,this.en);n=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,r=this.a*(this.k0*(y-this.ml0+a*s*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var v=u*Math.sin(s);if(Math.abs(Math.abs(v)-1)<1e-10)return 93;if(n=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,r=u*Math.cos(s)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(r))>=1){if(v-1>1e-10)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(n=ie(e=this.ml0+s/this.k0,this.es,this.en),Math.abs(n)<I){var a=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>1e-10?Math.tan(n):0,c=this.ep2*Math.pow(u,2),h=Math.pow(c,2),f=Math.pow(l,2),p=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var d=o*Math.sqrt(e)/this.k0,g=Math.pow(d,2);r=n-(e*=l)*g/(1-this.es)*.5*(1-g/12*(5+3*f-9*c*f+c-4*h-g/30*(61+90*f-252*c*f+45*p+46*c-g/56*(1385+3633*f+4095*p+1574*p*f)))),i=et(this.long0+d*(1-g/6*(1+2*f+c-g/20*(5+28*f+24*p+8*c*f+6*c-g/42*(61+662*f+1320*p+720*p*f))))/u)}else r=I*tt(s),i=0;else{var y=Math.exp(o/this.k0),v=.5*(y-1/y),m=this.lat0+s/this.k0,_=Math.cos(m);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(v,2))),r=Math.asin(e),s<0&&(r=-r),i=0===v&&0===_?0:et(Math.atan2(v,_)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function se(t){var e=Math.exp(t);return e=(e-1/e)/2}function ae(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function ue(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}function le(t){var e=Math.abs(t);return e=ue(e*(1+e/(ae(1,e)+1))),t<0?-e:e}function ce(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return e+n*Math.sin(2*e)}function he(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,o=t[i],s=0;--i>=0;)n=r*o-s+t[i],s=o,o=n;return Math.sin(e)*n}function fe(t){var e=Math.exp(t);return e=(e+1/e)/2}function pe(t,e,n){for(var r,i,o=Math.sin(e),s=Math.cos(e),a=se(n),u=fe(n),l=2*s*u,c=-2*o*a,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)r=d,i=p,f=l*(d=f)-r-c*(p=g)+t[h],g=c*d-i+l*p;return[(l=o*u)*f-(c=s*a)*g,l*g+c*f]}var de={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(oe.init.apply(this),this.forward=oe.forward,this.inverse=oe.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(.3125+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+-1.713007555715889*e),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=ce(this.cbg,this.lat0);this.Zb=-this.Qn*(r+he(this.gtu,2*r))},forward:function(t){var e=et(t.x-this.long0),n=t.y;n=ce(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(e),s=Math.cos(e);n=Math.atan2(r,s*i),e=Math.atan2(o*i,ae(r,i*s)),e=le(Math.tan(e));var a,u,l=pe(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,u=1/0),t.x=a,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=pe(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(se(r));var s=Math.sin(i),a=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(s*l,ae(u,l*a)),e=et((r=Math.atan2(u,l*a))+this.long0),n=ce(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};function ge(t,e){if(void 0===t){if((t=Math.floor(30*(et(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}var ye={init:function(){var t=ge(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(t)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,de.init.apply(this),this.forward=de.forward,this.inverse=de.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ve(t,e){return Math.pow((1-t)/(1+t),e)}var me={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+P)/(Math.pow(Math.tan(.5*this.lat0+P),this.C)*ve(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+P),this.C)*ve(this.e*Math.sin(n),this.ratexp))-I,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+P)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*ve(this.e*Math.sin(t.y),-.5*this.e))-I,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var _e={init:function(){me.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=et(t.x-this.long0),me.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),n=Math.cos(s),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,me.inverse.apply(this,[t]),t.x=et(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var xe={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+tt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*Z(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/nt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Z(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-I,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,o,s,a=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),h=et(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=1e-10&&Math.abs(u+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(h)),t.x=this.a*e*c*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,l,this.e))-I,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(o=nt(this.e,u*this.con,this.con*l),s=2*this.a*this.k0*o/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,o;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,n=this.lat0,s<=1e-10?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?et(this.long0+Math.atan2(t.x,-1*t.y)):et(this.long0+Math.atan2(t.x,t.y)):et(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=1e-10){if(s<=1e-10)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=s*this.cons/(2*this.a*this.k0),n=this.con*rt(this.e,r),e=this.con*et(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=1e-10?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/s),e=et(this.long0+Math.atan2(t.x*Math.sin(i),s*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*rt(this.e,Math.tan(.5*(I+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(I+t))*Math.pow((1-e)/(1+e),.5*n)}};var be={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=l,t},names:["somerc"]};var Ee={init:function(){var t,e,n,r,i,o,s,a,u,l,c,h,f,p=0,d=0,g=0,y=0,v=0,m=0,_=0;this.no_off=(f="object"==typeof(h=this).PROJECTION?Object.keys(h.PROJECTION)[0]:h.PROJECTION,"no_uoff"in h||"no_off"in h||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var b=!1;if("rectified_grid_angle"in this&&(b=!0),x&&(_=this.alpha),b&&(p=.017453292519943295*this.rectified_grid_angle),x||b)d=this.longc;else if(g=this.long1,v=this.lat1,y=this.long2,m=this.lat2,Math.abs(v-m)<=1e-7||(t=Math.abs(v))<=1e-7||Math.abs(t-I)<=1e-7||Math.abs(Math.abs(this.lat0)-I)<=1e-7||Math.abs(Math.abs(m)-I)<=1e-7)throw new Error;var E=1-this.es;e=Math.sqrt(E),Math.abs(this.lat0)>1e-10?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/E),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(nt(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),x||b?(x?(c=Math.asin(Math.sin(_)/r),b||(p=_)):(c=p,_=Math.asin(r*Math.sin(c))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(o=Math.pow(nt(this.e,v,Math.sin(v)),this.B),s=Math.pow(nt(this.e,m,Math.sin(m)),this.B),i=this.E/o,u=(s-o)/(s+o),l=((l=this.E*this.E)-s*o)/(l+s*o),(t=g-y)<-Math.pi?y-=L:t>Math.pi&&(y+=L),this.lam0=et(.5*(g+y)-Math.atan(l*Math.tan(.5*this.B*(g-y))/u)/this.B),c=Math.atan(2*Math.sin(this.B*et(g-this.lam0))/(i-1/i)),p=_=Math.asin(r*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(P-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(P+i))},forward:function(t){var e,n,r,i,o,s,a,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-I)>1e-10){if(e=.5*((o=this.E/Math.pow(nt(this.e,t.y,Math.sin(t.y)),this.B))-(s=1/o)),n=.5*(o+s),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<1e-10)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),s=Math.cos(this.B*t.x),a=Math.abs(s)<1e-7?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,s)}else u=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(l.x=a,l.y=u):(a-=this.u_0,l.x=u*this.cosrot+a*this.sinrot,l.y=a*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,n,r,i,o,s,a,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),o=.5*(r+1/r),a=((s=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(a)-1)<1e-10)u.x=0,u.y=a<0?-I:I;else{if(u.y=this.E/Math.sqrt((1+a)/(1-a)),u.y=rt(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var we={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=Z(this.e,e,n),i=nt(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Z(this.e,o,s),u=nt(this.e,this.lat2,o),l=nt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(r/a)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=tt(n)*(I-2e-10));var r,i,o=Math.abs(Math.abs(n)-I);if(o>1e-10)r=nt(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var s=this.ns*et(e-this.long0);return t.x=this.k0*(i*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,r,i,o,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),n=1):(e=-Math.sqrt(s*s+a*a),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*s,n*a)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=rt(this.e,r)))return null}else i=-I;return o=et(u/this.ns+this.long0),t.x=o,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var Me={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,o,s,a,u=t.x,l=t.y,c=et(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,o,s,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,a=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,l+=1}while(0===a&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function Se(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function Ce(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Ne(t){return.375*t*(1+.25*t*(1+.46875*t))}function Ie(t){return.05859375*t*t*(1+.75*t)}function Pe(t){return t*t*t*(35/3072)}function Le(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function Oe(t){return Math.abs(t)<I?t:t-tt(t)*Math.PI}function Re(t,e,n,r,i){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN}var ke={init:function(){this.sphere||(this.e0=Ce(this.es),this.e1=Ne(this.es),this.e2=Ie(this.es),this.e3=Pe(this.es),this.ml0=this.a*Se(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=et(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),s=Math.cos(i),a=Le(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),c=l*l,h=this.es*s*s/(1-this.es);e=a*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),n=this.a*Se(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*o/s*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var o=i+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var s=Re(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-I)<=1e-10)return t.x=this.long0,t.y=I,i<0&&(t.y*=-1),t;var a=Le(this.a,this.e,Math.sin(s)),u=a*a*a/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(s),2),c=r*this.a/a,h=c*c;e=s-a*Math.tan(s)/u*c*c*(.5-(1+3*l)*c*c/24),n=c*(1-h*(l/3+(1+3*l)*l*h/15))/Math.cos(s)}return t.x=et(n+this.long0),t.y=Oe(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Te(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var Ae={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-I)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Te(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Te(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,o,s,a,u,l,c,h=t.x,f=t.y;if(h=et(h-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=1e-10)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(h),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<1e-10)return null;n=P-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(a=0,u=0,l=0,r=Math.cos(h),i=Math.sin(h),o=Math.sin(f),s=Te(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,u=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:l=1+this.sinb1*a+this.cosb1*u*r;break;case this.EQUIT:l=1+u*r;break;case this.N_POLE:l=I+f,s=this.qp-s;break;case this.S_POLE:l=f-I,s=this.qp+s}if(Math.abs(l)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*a-this.sinb1*u*r):(l=Math.sqrt(2/(1+u*r)))*a*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(l=Math.sqrt(s))*i,n=r*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,o,s,a,u,l,c,h=t.x/this.a,f=t.y/this.a;if(this.sphere){var p,d=0,g=0;if((n=.5*(p=Math.sqrt(h*h+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(g=Math.sin(n),d=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=1e-10?0:Math.asin(f*g/p),h*=g,f=d*p;break;case this.OBLIQ:n=Math.abs(p)<=1e-10?this.lat0:Math.asin(d*this.sinph0+f*g*this.cosph0/p),h*=g*this.cosph0,f=(d-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:f=-f,n=I-n;break;case this.S_POLE:n-=I}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,f*=this.dd,(s=Math.sqrt(h*h+f*f))<1e-10)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*s/this.rq),r=Math.cos(i),h*=i=Math.sin(i),this.mode===this.OBLIQ?(a=r*this.sinb1+f*i*this.cosb1/s,o=this.qp*a,f=s*this.cosb1*r-f*this.sinb1*i):(a=f*i/s,o=this.qp*a,f=s*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=h*h+f*f))return t.x=this.long0,t.y=this.lat0,t;a=1-o/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(h,f),u=Math.asin(a),l=this.apa,c=u+u,n=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=et(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function De(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var Fe={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Z(this.e3,this.sin_po,this.cos_po),this.qs1=Te(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Z(this.e3,this.sin_po,this.cos_po),this.qs2=Te(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Te(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Te(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*et(e-this.long0),s=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,n)),o=et(i/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,o,s=De(.5*e);if(t<1e-10)return s;for(var a=t*t,u=1;u<=25;u++)if(s+=o=.5*(i=1-(r=t*(n=Math.sin(s)))*r)*i/Math.cos(s)*(e/(1-a)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-7)return s;return null}};var ze={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,o,s,a,u=t.x,l=t.y;return r=et(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,(o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=1e-10?(s=this.x0+1*this.a*n*Math.sin(r)/o,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/o):(s=this.x0+this.infinity_dist*n*Math.sin(r),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),s=De((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=et(this.long0+o)):(s=this.phic0,o=0),t.x=o,t.y=s,t},names:["gnom"]};function je(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*I:I;for(var r,i,o,s,a=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(a),o=Math.cos(a),s=t*i,a+=r=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-i/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(r)<=1e-10)return a;return NaN}var qe={init:function(){this.sphere||(this.k0=Z(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,o=et(r-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var s=Te(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=et(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=je(this.e,2*t.y*this.k0/this.a),e=et(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var Ge={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=et(e-this.long0),i=Oe(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=et(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Oe(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Be={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ce(this.es),this.e1=Ne(this.es),this.e2=Ie(this.es),this.e3=Pe(this.es),this.ml0=this.a*Se(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,o=t.y,s=et(i-this.long0);if(r=s*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(o),n=this.a*(Oe(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*s,n=-1*this.ml0;else{var a=Le(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(r),n=this.a*Se(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,o,s,a,u,l;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=et(r/this.a+this.long0),n=0;else{var c;for(s=this.lat0+i/this.a,a=r*r/this.a/this.a+s*s,u=s,o=20;o;--o)if(u+=l=-1*(s*(u*(c=Math.tan(u))+1)-u-.5*(u*u+a)*c)/((u-s)/c-1),Math.abs(l)<=1e-10){n=u;break}e=et(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=1e-10)n=0,e=et(this.long0+r/this.a);else{var h,f,p,d,g;for(s=(this.ml0+i)/this.a,a=r*r/this.a/this.a+s*s,u=s,o=20;o;--o)if(g=this.e*Math.sin(u),h=Math.sqrt(1-g*g)*Math.tan(u),f=this.a*Se(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(s*(h*(d=f/this.a)+1)-d-.5*h*(d*d+a))/(this.es*Math.sin(2*u)*(d*d+a-2*s*d)/(4*h)+(s-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=1e-10){n=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=et(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var Ue={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=(t.y-this.lat0)/484813681109536e-20*1e-5,i=n-this.long0,o=1,s=0;for(e=1;e<=10;e++)o*=r,s+=this.A[e]*o;var a,u=s,l=i,c=1,h=0,f=0,p=0;for(e=1;e<=6;e++)a=h*u+c*l,c=c*u-h*l,h=a,f=f+this.B_re[e]*c-this.B_im[e]*h,p=p+this.B_im[e]*c+this.B_re[e]*h;return t.x=p*this.a+this.x0,t.y=f*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,o=r-this.x0,s=(i-this.y0)/this.a,a=o/this.a,u=1,l=0,c=0,h=0;for(e=1;e<=6;e++)n=l*s+u*a,u=u*s-l*a,l=n,c=c+this.C_re[e]*u-this.C_im[e]*l,h=h+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var p,d=c,g=h,y=s,v=a;for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,y+=(e-1)*(this.B_re[e]*d-this.B_im[e]*g),v+=(e-1)*(this.B_im[e]*d+this.B_re[e]*g);d=1,g=0;var m=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=g*c+d*h,d=d*c-g*h,g=p,m+=e*(this.B_re[e]*d-this.B_im[e]*g),_+=e*(this.B_im[e]*d+this.B_re[e]*g);var x=m*m+_*_;c=(y*m+v*_)/x,h=(v*m-y*_)/x}var b=c,E=h,w=1,M=0;for(e=1;e<=9;e++)w*=b,M+=this.D[e]*w;var S=this.lat0+484813681109536e-20*M*1e5,C=this.long0+E;return t.x=C,t.y=S,t},names:["New_Zealand_Map_Grid","nzmg"]};var Ve={init:function(){},forward:function(t){var e=t.x,n=t.y,r=et(e-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=et(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var Xe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ne(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=et(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),s=20;s;--s){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*re(i,u,l,this.en),e=this.a*r*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=De((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=De(Math.sin(e)/this.n)),n=et(n+this.long0),e=Oe(e)):(e=ie(t.y/this.a,this.es,this.en),(r=Math.abs(e))<I?(r=Math.sin(e),n=et(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-1e-10<I&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var Ye={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=et(e-this.long0),i=n,o=Math.PI*Math.sin(n);;){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<1e-10)break}i/=2,Math.PI/2-Math.abs(n)<1e-10&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=et(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var We={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ce(this.es),this.e1=Ne(this.es),this.e2=Ie(this.es),this.e3=Pe(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Z(this.e,this.sinphi,this.cosphi),this.ml1=Se(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Z(this.e,this.sinphi,this.cosphi),this.ml2=Se(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Se(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Se(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var o=this.ns*et(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;return 0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=et(this.long0+o/this.ns),r=Oe(this.g-n/this.a),t.x=i,t.y=r,t):(r=Re(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=et(this.long0+o/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]};var He={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,o=et(r-this.long0);Math.abs(i)<=1e-10&&(e=this.x0+this.R*o,n=this.y0);var s=De(2*Math.abs(i/Math.PI));(Math.abs(o)<=1e-10||Math.abs(Math.abs(i)-I)<=1e-10)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/o-o/Math.PI),u=a*a,l=Math.sin(s),c=Math.cos(s),h=c/(l+c-1),f=h*h,p=h*(2/l-1),d=p*p,g=Math.PI*this.R*(a*(h-d)+Math.sqrt(u*(h-d)*(h-d)-(d+u)*(f-d)))/(d+u);o<0&&(g=-g),e=this.x0+g;var y=u+h;return g=Math.PI*this.R*(p*y-a*Math.sqrt((d+u)*(u+1)-y*y))/(d+u),n=i>=0?this.y0+g:this.y0-g,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,o,s,a,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(u=-2*(s=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(a=s-2*i*i+r*r)*a*a/u/u/u-9*s*a/u/u)/27)/(l=(s-a*a/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI,e=Math.abs(r)<1e-10?this.long0:et(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Qe={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,s,a,u,l,c,h,f,p,d,g,y,v,m,_,x,b,E,w=t.x,M=t.y,S=Math.sin(t.y),C=Math.cos(t.y),N=et(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(I-M)*Math.sin(N),t.y=this.y0-this.a*(I-M)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(I+M)*Math.sin(N),t.y=this.y0+this.a*(I+M)*Math.cos(N),t):(m=this.sin_p12*S+this.cos_p12*C*Math.cos(N),v=(y=Math.acos(m))?y/Math.sin(y):1,t.x=this.x0+this.a*v*C*Math.sin(N),t.y=this.y0+this.a*v*(this.cos_p12*S-this.sin_p12*C*Math.cos(N)),t):(e=Ce(this.es),n=Ne(this.es),r=Ie(this.es),i=Pe(this.es),Math.abs(this.sin_p12-1)<=1e-10?(o=this.a*Se(e,n,r,i,I),s=this.a*Se(e,n,r,i,M),t.x=this.x0+(o-s)*Math.sin(N),t.y=this.y0-(o-s)*Math.cos(N),t):Math.abs(this.sin_p12+1)<=1e-10?(o=this.a*Se(e,n,r,i,I),s=this.a*Se(e,n,r,i,M),t.x=this.x0+(o+s)*Math.sin(N),t.y=this.y0+(o+s)*Math.cos(N),t):(a=S/C,u=Le(this.a,this.e,this.sin_p12),l=Le(this.a,this.e,S),c=Math.atan((1-this.es)*a+this.es*u*this.sin_p12/(l*C)),_=0===(h=Math.atan2(Math.sin(N),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(N)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(h)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(N)*Math.cos(c)/Math.sin(h)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),y=u*_*(1-(x=_*_)*(g=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-g)/6+(b=x*_)/8*(d=f*p)*(1-2*g)+(E=b*_)/120*(g*(4-7*g)-3*f*f*(1-7*g))-E*_/48*d),t.x=this.x0+y*Math.sin(h),t.y=this.y0+y*Math.cos(h),t))},inverse:function(t){var e,n,r,i,o,s,a,u,l,c,h,f,p,d,g,y,v,m,_,x,b,E,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*I*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=1e-10?s=this.lat0:(s=De(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-I,o=Math.abs(a)<=1e-10?this.lat0>=0?et(this.long0+Math.atan2(t.x,-t.y)):et(this.long0-Math.atan2(-t.x,t.y)):et(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=o,t.y=s,t}return u=Ce(this.es),l=Ne(this.es),c=Ie(this.es),h=Pe(this.es),Math.abs(this.sin_p12-1)<=1e-10?(s=Re(((f=this.a*Se(u,l,c,h,I))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,h),o=et(this.long0+Math.atan2(t.x,-1*t.y)),t.x=o,t.y=s,t):Math.abs(this.sin_p12+1)<=1e-10?(f=this.a*Se(u,l,c,h,I),s=Re(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,u,l,c,h),o=et(this.long0+Math.atan2(t.x,t.y)),t.x=o,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=Le(this.a,this.e,this.sin_p12),y=Math.cos(g),m=-(v=this.e*this.cos_p12*y)*v/(1-this.es),_=3*this.es*(1-m)*this.sin_p12*this.cos_p12*y/(1-this.es),E=1-m*(b=(x=e/p)-m*(1+m)*Math.pow(x,3)/6-_*(1+3*m)*Math.pow(x,4)/24)*b/2-x*b*b*b/6,d=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*y),o=et(this.long0+Math.asin(Math.sin(g)*Math.sin(b)/Math.cos(d))),w=Math.sin(d),s=Math.atan2((w-this.es*E*this.sin_p12)*Math.tan(d),w*(1-this.es)),t.x=o,t.y=s,t)},names:["Azimuthal_Equidistant","aeqd"]};var $e={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,o,s,a,u=t.x,l=t.y;return r=et(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),1,((o=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(o)<=1e-10)&&(s=1*this.a*n*Math.sin(r),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=s,t.y=a,t},inverse:function(t){var e,n,r,i,o,s,a;return t.x-=this.x0,t.y-=this.y0,n=De((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=1e-10?(a=this.lat0,t.x=s,t.y=a,t):(a=De(i*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-I,Math.abs(o)<=1e-10?(s=this.lat0>=0?et(this.long0+Math.atan2(t.x,-t.y)):et(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=a,t):(s=et(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=s,t.y=a,t))},names:["ortho"]},Ke=1,Je=2,Ze=3,tn=4,en=5,nn=6,rn=1,on=2,sn=3,an=4;function un(t,e,n,r){var i;return t<1e-10?(r.value=rn,i=0):(i=Math.atan2(e,n),Math.abs(i)<=P?r.value=rn:i>P&&i<=I+P?(r.value=on,i-=I):i>I+P||i<=-(I+P)?(r.value=sn,i=i>=0?i-3.14159265359:i+3.14159265359):(r.value=an,i+=I)),i}function ln(t,e){var n=t+e;return n<-3.14159265359?n+=L:n>3.14159265359&&(n-=L),n}var cn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=I-P/2?this.face=en:this.lat0<=-(I-P/2)?this.face=nn:Math.abs(this.long0)<=P?this.face=Ke:Math.abs(this.long0)<=I+P?this.face=this.long0>0?Je:tn:this.face=Ze,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,o,s,a={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===en)i=I-e,n>=P&&n<=I+P?(u.value=rn,r=n-I):n>I+P||n<=-(I+P)?(u.value=on,r=n>0?n-3.14159265359:n+3.14159265359):n>-(I+P)&&n<=-P?(u.value=sn,r=n+I):(u.value=an,r=n);else if(this.face===nn)i=I+e,n>=P&&n<=I+P?(u.value=rn,r=-n+I):n<P&&n>=-P?(u.value=on,r=-n):n<-P&&n>=-(I+P)?(u.value=sn,r=-n-I):(u.value=an,r=n>0?3.14159265359-n:-n-3.14159265359);else{var l,c,h,f,p,d;this.face===Je?n=ln(n,+I):this.face===Ze?n=ln(n,3.14159265359):this.face===tn&&(n=ln(n,-I)),f=Math.sin(e),p=Math.cos(e),d=Math.sin(n),l=p*Math.cos(n),c=p*d,h=f,this.face===Ke?r=un(i=Math.acos(l),h,c,u):this.face===Je?r=un(i=Math.acos(c),h,-l,u):this.face===Ze?r=un(i=Math.acos(-l),h,-c,u):this.face===tn?r=un(i=Math.acos(-c),h,l,u):(i=r=0,u.value=rn)}return s=Math.atan(12/3.14159265359*(r+Math.acos(Math.sin(r)*Math.cos(P))-I)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(r))))),u.value===on?s+=I:u.value===sn?s+=3.14159265359:u.value===an&&(s+=1.5*3.14159265359),a.x=o*Math.cos(s),a.y=o*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function(t){var e,n,r,i,o,s,a,u,l,c,h,f,p={lam:0,phi:0},d={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?d.value=rn:t.y>=0&&t.y>=Math.abs(t.x)?(d.value=on,e-=I):t.x<0&&-t.x>=Math.abs(t.y)?(d.value=sn,e=e<0?e+3.14159265359:e-3.14159265359):(d.value=an,e+=I),l=3.14159265359/12*Math.tan(e),o=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),s=Math.atan(o),(a=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?a=-1:a>1&&(a=1),this.face===en)u=Math.acos(a),p.phi=I-u,d.value===rn?p.lam=s+I:d.value===on?p.lam=s<0?s+3.14159265359:s-3.14159265359:d.value===sn?p.lam=s-I:p.lam=s;else if(this.face===nn)u=Math.acos(a),p.phi=u-I,d.value===rn?p.lam=-s+I:d.value===on?p.lam=-s:d.value===sn?p.lam=-s-I:p.lam=s<0?-s-3.14159265359:3.14159265359-s;else{var g,y,v;l=(g=a)*g,y=(l+=(v=l>=1?0:Math.sqrt(1-l)*Math.sin(s))*v)>=1?0:Math.sqrt(1-l),d.value===on?(l=y,y=-v,v=l):d.value===sn?(y=-y,v=-v):d.value===an&&(l=y,y=v,v=-l),this.face===Je?(l=g,g=-y,y=l):this.face===Ze?(g=-g,y=-y):this.face===tn&&(l=g,g=y,y=-l),p.phi=Math.acos(-v)-I,p.lam=Math.atan2(y,g),this.face===Je?p.lam=ln(p.lam,-I):this.face===Ze?p.lam=ln(p.lam,-3.14159265359):this.face===tn&&(p.lam=ln(p.lam,+I))}return 0!==this.es&&(c=p.phi<0?1:0,h=Math.tan(p.phi),f=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},hn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],fn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],pn=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var dn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=et(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(11.459155902616464*n);r<0?r=0:r>=18&&(r=17);var i={x:pn(hn[r],n=57.29577951308232*(n-.08726646259971647*r))*e,y:pn(fn[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=hn[18][0],e.y=t.y<0?-I:I;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(fn[n][0]>e.y)--n;else{if(!(fn[n+1][0]<=e.y))break;++n}var r=fn[n],i=5*(e.y-r[0])/(fn[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var o=t(i);if(i-=o,Math.abs(o)<n)break}return i}((function(t){return(pn(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,1e-10,100),e.x/=pn(hn[n],i),e.y=.017453292519943295*(5*n+i),t.y<0&&(e.y=-e.y)}return e.x=et(e.x+this.long0),e},names:["Robinson","robin"]};var gn={init:function(){this.name="geocent"},forward:function(t){return Ct(t,this.es,this.a)},inverse:function(t){return Nt(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},yn=0,vn=1,mn=2,_n=3,xn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var bn={init:function(){if(Object.keys(xn).forEach(function(t){if(void 0===this[t])this[t]=xn[t].def;else{if(xn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);xn[t].num&&(this[t]=parseFloat(this[t]))}xn[t].degrees&&(this[t]=.017453292519943295*this[t])}.bind(this)),Math.abs(Math.abs(this.lat0)-I)<1e-10?this.mode=this.lat0<0?vn:yn:Math.abs(this.lat0)<1e-10?this.mode=mn:(this.mode=_n,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,o=Math.sin(t.y),s=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case _n:n=this.sinph0*o+this.cosph0*s*a;break;case mn:n=s*a;break;case vn:n=-o;break;case yn:n=o}switch(e=(n=this.pn1/(this.p-n))*s*Math.sin(t.x),this.mode){case _n:n*=this.cosph0*o-this.sinph0*s*a;break;case mn:n*=o;break;case yn:n*=-s*a;break;case vn:n*=s*a}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var o=ae(t.x,t.y);if(Math.abs(o)<1e-10)i.x=0,i.y=t.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case _n:i.y=Math.asin(s*this.sinph0+t.y*a*this.cosph0/o),t.y=(s-this.sinph0*Math.sin(i.y))*o,t.x*=a*this.cosph0;break;case mn:i.y=Math.asin(t.y*a/o),t.y=s*o,t.x*=a;break;case yn:i.y=Math.asin(s),t.y=-t.y;break;case vn:i.y=-Math.asin(s)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};var En,wn={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,o=t.x,s=t.y;if(o-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var a=this.radius_p/ae(this.radius_p*Math.cos(s),Math.sin(s));if(n=a*Math.cos(o)*Math.cos(s),r=a*Math.sin(o)*Math.cos(s),i=a*Math.sin(s),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/ae(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/ae(r,e)))}else"sphere"===this.shape&&(e=Math.cos(s),n=Math.cos(o)*e,r=Math.sin(o)*e,i=Math.sin(s),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/ae(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/ae(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,o=-1,s=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*ae(1,a)):(s=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*ae(1,s));var u=a/this.radius_p;if(e=s*s+u*u+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,s*=i,a*=i,t.x=Math.atan2(s,o),t.y=Math.atan(a*Math.cos(t.x)/o),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(s=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+a*a+o*o,(r=(n=2*this.radius_g*o)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),o=this.radius_g+i*o,s*=i,a*=i,t.x=Math.atan2(s,o),t.y=Math.atan(a*Math.cos(t.x)/o)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Ut.defaultDatum="WGS84",Ut.Proj=Mt,Ut.WGS84=new Ut.Proj("WGS84"),Ut.Point=ee,Ut.toPoint=Dt,Ut.defs=H,Ut.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:_t(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o=function(t,e,n){for(var r=176,i=[],o=0;o<e.nSubgrids;o++){var s=bt(t,r,n),a=Et(t,r,s,n),u=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),l=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);i.push({ll:[mt(s.lowerLongitude),mt(s.lowerLatitude)],del:[mt(s.longitudeInterval),mt(s.latitudeInterval)],lim:[u,l],count:s.gridNodeCount,cvs:xt(a)})}return i}(n,i,r),s={header:i,subgrids:o};return gt[t]=s,s},Ut.transform=jt,Ut.mgrs=Vt,Ut.version="__VERSION__",(En=Ut).Proj.projections.add(oe),En.Proj.projections.add(de),En.Proj.projections.add(ye),En.Proj.projections.add(_e),En.Proj.projections.add(xe),En.Proj.projections.add(be),En.Proj.projections.add(Ee),En.Proj.projections.add(we),En.Proj.projections.add(Me),En.Proj.projections.add(ke),En.Proj.projections.add(Ae),En.Proj.projections.add(Fe),En.Proj.projections.add(ze),En.Proj.projections.add(qe),En.Proj.projections.add(Ge),En.Proj.projections.add(Be),En.Proj.projections.add(Ue),En.Proj.projections.add(Ve),En.Proj.projections.add(Xe),En.Proj.projections.add(Ye),En.Proj.projections.add(We),En.Proj.projections.add(He),En.Proj.projections.add(Qe),En.Proj.projections.add($e),En.Proj.projections.add(cn),En.Proj.projections.add(dn),En.Proj.projections.add(gn),En.Proj.projections.add(bn),En.Proj.projections.add(wn);var Mn=Ut;Mn.defs("EPSG:3395","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs");const Sn=Mn("EPSG:3395","EPSG:4326"),Cn=window.baseUrl??"https://roadmap-wfs-api-production.api.2gis.ru/";async function Nn(t){const e=`${Cn}?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typeNames=similar_tracks&featureID=${t}&srsName=EPSG:4326&crsName=EPSG:4326`;return await fetch(e)}async function In(t){const e=`${Cn}?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&BBOX=${t}&srsName=EPSG:3395&crsName=EPSG:3395&MaxFeatures=100000&outputFormat=application/json`;return await fetch(e)}async function Pn({coords:t}){const{southWest:e,northEast:n}=t.bounds,r=[...Sn.inverse(e),...Sn.inverse(n)].join(",");try{const t=await In(r);return await t.json()}catch(t){return console.error(t),{features:[],type:"FeatureCollection"}}}function Ln({bounds:t,zoom:e}){e=Math.floor(e);const n=p(t.northEast),r=p(t.southWest),i=On(n,e),o=On(r,e),s=[];for(let t=o.x;t<=i.x;t++)for(let n=o.y;n<=i.y;n++){const r=Rn(t,n,e),i=Rn(t+1,n+1,e),o={northEast:d(r),southWest:d(i)};s.push({x:t,y:n,zoom:e,bounds:o})}return s}function On(t,e){const n=2147483648,r=kn(e);return{x:Math.floor((t[0]+n)/r),y:Math.floor((t[1]+n)/r),zoom:e}}function Rn(t,e,n){const r=kn(n),i=2147483648;return[t*r-i,e*r-i]}function kn(t){return 2**(32-t)}const Tn=({x:t,y:e,zoom:n})=>`${t}_${e}_${n}`,An=t=>{const[e,n]=(0,l.useState)({}),r=(0,l.useMemo)((()=>Ln({bounds:t.mapState.bounds,zoom:14})),[t.mapState.bounds,14]);(0,l.useEffect)((()=>{if(!(t.mapState.zoom<=13))for(const t of r){const r=Tn(t);e[r]||(n((e=>({...e,[r]:{coords:t}}))),Pn({coords:t}).then((e=>{Dn(e),n((n=>({...n,[r]:{coords:t,data:e}})))})))}}),[r]);const{lines:i,points:o,kdbush:a,isFetching:u}=(0,l.useMemo)((()=>{const t={type:"FeatureCollection",features:Object.values(e).filter((t=>14===t.coords.zoom)).map((t=>t.data?.features??[])).flat()},n=C(t),i=N(t);return{lines:n,points:i,kdbush:new M(i,(t=>t.x),(t=>t.y),64,Int32Array),isFetching:r.some((t=>{const n=Tn(t);return void 0===e[n]?.data}))}}),[e]);return(0,s.jsx)(S.Provider,{value:{find:({lngLat:t,radius:e})=>{const[n,r]=p(t),i=a.within(n,r,e).map((t=>o[t]));return i.sort(((t,e)=>(t.x-n)**2+(t.y-r)**2-((e.x-n)**2+(e.y-r)**2))),i.map((({x:t,y:e,properties:n})=>({lngLat:d([t,e]),properties:n})))},findLinePoints:t=>{for(const e of i.features)if(e.properties.track_id===t.properties.track_id)return e.properties.points},lines:i,isFetching:u},children:t.children})};function Dn(t){t.features.forEach((({geometry:t})=>{if("Point"===t.type)t.coordinates=Sn.forward(t.coordinates);else console.error(`Unknown geojson type ${t.type} at lngLat converting`)}))}l=o("acw62");const Fn=t=>{const{isFetching:e}=(0,l.useContext)(S);return t.zoom<=13?(0,s.jsx)("div",{className:"_4R_xZW_root",children:"Please zoom in to view the data"}):e?(0,s.jsx)("div",{className:"_4R_xZW_root",children:"Loading data..."}):null};l=o("acw62");const zn=(0,(l=o("acw62")).createContext)({});var jn,qn,Gn={},Bn={};function Un(){throw new Error("setTimeout has not been defined")}function Vn(){throw new Error("clearTimeout has not been defined")}function Xn(t){if(jn===setTimeout)return setTimeout(t,0);if((jn===Un||!jn)&&setTimeout)return jn=setTimeout,setTimeout(t,0);try{return jn(t,0)}catch(e){try{return jn.call(null,t,0)}catch(e){return jn.call(this,t,0)}}}!function(){try{jn="function"==typeof setTimeout?setTimeout:Un}catch(t){jn=Un}try{qn="function"==typeof clearTimeout?clearTimeout:Vn}catch(t){qn=Vn}}();var Yn,Wn=[],Hn=!1,Qn=-1;function $n(){Hn&&Yn&&(Hn=!1,Yn.length?Wn=Yn.concat(Wn):Qn=-1,Wn.length&&Kn())}function Kn(){if(!Hn){var t=Xn($n);Hn=!0;for(var e=Wn.length;e;){for(Yn=Wn,Wn=[];++Qn<e;)Yn&&Yn[Qn].run();Qn=-1,e=Wn.length}Yn=null,Hn=!1,function(t){if(qn===clearTimeout)return clearTimeout(t);if((qn===Vn||!qn)&&clearTimeout)return qn=clearTimeout,clearTimeout(t);try{qn(t)}catch(e){try{return qn.call(null,t)}catch(e){return qn.call(this,t)}}}(t)}}function Jn(t,e){this.fun=t,this.array=e}function Zn(){}function tr(t,e,n){let r,i=1/0;const[o,s]=p(t);for(const t of e){if(n&&t.properties.track_id!=n)continue;const[e,a]=p(t.lngLat),u=(e-o)**2+(a-s)**2;u<i&&(r=t,i=u)}return r}function er(t,e,n,r){const i=(0,Gn.lineArc)(t,r/1e3,e-n/2,e+n/2).geometry.coordinates;return n<360&&(i.unshift(t),i.push(t)),[i]}Bn.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Wn.push(new Jn(t,e)),1!==Wn.length||Hn||Xn(Kn)},Jn.prototype.run=function(){this.fun.apply(null,this.array)},Bn.title="browser",Bn.browser=!0,Bn.env={},Bn.argv=[],Bn.version="",Bn.versions={},Bn.on=Zn,Bn.addListener=Zn,Bn.once=Zn,Bn.off=Zn,Bn.removeListener=Zn,Bn.removeAllListeners=Zn,Bn.emit=Zn,Bn.prependListener=Zn,Bn.prependOnceListener=Zn,Bn.listeners=function(t){return[]},Bn.binding=function(t){throw new Error("process.binding is not supported")},Bn.cwd=function(){return"/"},Bn.chdir=function(t){throw new Error("process.chdir is not supported")},Bn.umask=function(){return 0},function(t){var e=6371008.8,n={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*e,kilometers:6371.0088,kilometres:6371.0088,meters:e,metres:e,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:e/1852,radians:1,yards:6967335.223679999},r={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e,yards:1.0936133},i={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function o(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){switch(t){case"Point":return a(e).geometry;case"LineString":return h(e).geometry;case"Polygon":return l(e).geometry;case"MultiPoint":return g(e).geometry;case"MultiLineString":return d(e).geometry;case"MultiPolygon":return y(e).geometry;default:throw new Error(t+" is invalid")}}function a(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!N(t[0])||!N(t[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return a(t,e)})),n)}function l(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return l(t,e)})),n)}function h(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:t},e,n)}function f(t,e,n){return void 0===n&&(n={}),p(t.map((function(t){return h(t,e)})),n)}function p(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function d(t,e,n){return void 0===n&&(n={}),o({type:"MultiLineString",coordinates:t},e,n)}function g(t,e,n){return void 0===n&&(n={}),o({type:"MultiPoint",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),o({type:"MultiPolygon",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),o({type:"GeometryCollection",geometries:t},e,n)}function m(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function _(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t*r}function x(t,e){void 0===e&&(e="kilometers");var r=n[e];if(!r)throw new Error(e+" units is invalid");return t/r}function b(t,e){return w(x(t,e))}function E(t){var e=t%360;return e<0&&(e+=360),e}function w(t){return t%(2*Math.PI)*180/Math.PI}function M(t){return t%360*Math.PI/180}function S(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return _(x(t,e),n)}function C(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=i[e];if(!r)throw new Error("invalid original units");var o=i[n];if(!o)throw new Error("invalid final units");return t/r*o}function N(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function I(t){return!!t&&t.constructor===Object}function P(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!N(t))throw new Error("bbox must only contain numbers")}))}function L(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var O=Object.freeze({__proto__:null,earthRadius:e,factors:n,unitsFactors:r,areaFactors:i,feature:o,geometry:s,point:a,points:u,polygon:l,polygons:c,lineString:h,lineStrings:f,featureCollection:p,multiLineString:d,multiPoint:g,multiPolygon:y,geometryCollection:v,round:m,radiansToLength:_,lengthToRadians:x,lengthToDegrees:b,bearingToAzimuth:E,radiansToDegrees:w,degreesToRadians:M,convertLength:S,convertArea:C,isNumber:N,isObject:I,validateBBox:P,validateId:L});function R(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,v=0;v<y;v++){a=(c=!!(l=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,v,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,v,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,v,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,v,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===R(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function k(t,e,n,r){var i=n;return R(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i}function T(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function A(t,e,n){var r=n;return T(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function D(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function F(t,e,n){var r=n;return D(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function z(t){var e=[];return R(t,(function(t){e.push(t)})),e}function j(t,e){var n,r,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function q(t,e,n){var r=n;return j(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r}function G(t,e){j(t,(function(t,n,r,i,s){var a,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(o(t,r,{bbox:i,id:s}),n,0)&&void 0}switch(u){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(o({type:a,coordinates:c},r),n,l))return!1}}))}function B(t,e,n){var r=n;return G(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function U(t,e){G(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==R(t,(function(o,c,f,p,d){if(void 0===s||n>a||p>u||d>l)return s=o,a=n,u=p,l=d,void(i=0);var g=h([s,o],t.properties);if(!1===e(g,n,r,d,i))return!1;i++,s=o}))&&void 0}}}))}function V(t,e,n){var r=n,i=!1;return U(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r}function X(t,e){if(!t)throw new Error("geojson is required");G(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(h(o[s],t.properties),n,r,s))return!1}}}))}function Y(t,e,n){var r=n;return X(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r}function W(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),h([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),h([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),h([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),h([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function H(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return a(l,u,e);case"MultiPoint":return i<0&&(i=l.length+i),a(l[i],u,e);case"LineString":return s<0&&(s=l.length+s),a(l[s],u,e);case"Polygon":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),a(l[o][s],u,e);case"MultiLineString":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),a(l[i][s],u,e);case"MultiPolygon":return i<0&&(i=l.length+i),o<0&&(o=l[i].length+o),s<0&&(s=l[i][o].length-s),a(l[i][o][s],u,e)}throw new Error("geojson is invalid")}var Q=Object.freeze({__proto__:null,coordAll:z,coordEach:R,coordReduce:k,featureEach:D,featureReduce:F,findPoint:H,findSegment:W,flattenEach:G,flattenReduce:B,geomEach:j,geomReduce:q,lineEach:X,lineReduce:Y,propEach:T,propReduce:A,segmentEach:U,segmentReduce:V});function $(t){var e=[1/0,1/0,-1/0,-1/0];return R(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function K(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function J(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Z(t){if(t.length>1&&N(t[0])&&N(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Z(t[0]);throw new Error("coordinates must only contain numbers")}function tt(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function et(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function nt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function rt(t){return"Feature"===t.type?t.geometry:t}function it(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}$.default=$;var ot=Object.freeze({__proto__:null,getCoord:K,getCoords:J,containsNumber:Z,geojsonType:tt,featureOf:et,collectionOf:nt,getGeom:rt,getType:it}),st=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function lt(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ct=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=lt(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))at.call(n,s)&&(i[s]=n[s]);if(st){r=st(n);for(var a=0;a<r.length;a++)ut.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i},ht={successCallback:null,verbose:!1},ft={};
/**
     * @license GNU Affero General Public License.
     * Copyright (c) 2015, 2015 Ronny Lorenz <ronny@tbi.univie.ac.at>
     * v. 1.2.0
     * https://github.com/RaumZeit/MarchingSquares.js
     *
     * MarchingSquaresJS is free software: you can redistribute it and/or modify
     * it under the terms of the GNU Affero General Public License as published by
     * the Free Software Foundation, either version 3 of the License, or
     * (at your option) any later version.
     *
     * MarchingSquaresJS is distributed in the hope that it will be useful,
     * but WITHOUT ANY WARRANTY; without even the implied warranty of
     * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     * GNU Affero General Public License for more details.
     *
     * As additional permission under GNU Affero General Public License version 3
     * section 7, third-party projects (personal or commercial) may distribute,
     * include, or link against UNMODIFIED VERSIONS of MarchingSquaresJS without the
     * requirement that said third-party project for that reason alone becomes
     * subject to any requirement of the GNU Affero General Public License version 3.
     * Any modifications to MarchingSquaresJS, however, must be shared with the public
     * and made available.
     *
     * In summary this:
     * - allows you to use MarchingSquaresJS at no cost
     * - allows you to use MarchingSquaresJS for both personal and commercial purposes
     * - allows you to distribute UNMODIFIED VERSIONS of MarchingSquaresJS under any
     *   license as long as this license notice is included
     * - enables you to keep the source code of your program that uses MarchingSquaresJS
     *   undisclosed
     * - forces you to share any modifications you have made to MarchingSquaresJS,
     *   e.g. bug-fixes
     *
     * You should have received a copy of the GNU Affero General Public License
     * along with MarchingSquaresJS.  If not, see <http://www.gnu.org/licenses/>.
     */function pt(t,e,n){n=n||{};for(var r=Object.keys(ht),i=0;i<r.length;i++){var o=r[i],s=n[o];s=null!=s?s:ht[o],ft[o]=s}ft.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a,u,l,c,h=(a=function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],l=t[o+1][s+1],c=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(l)||isNaN(c)||isNaN(h))){a|=u>=e?8:0,a|=l>=e?4:0,a|=c>=e?2:0;var f,p,d,g,y=!1;if(5==(a|=h>=e?1:0)||10===a){var v=(u+l+c+h)/4;5===a&&v<e?(a=10,y=!0):10===a&&v<e&&(a=5,y=!0)}0!==a&&15!==a&&(f=p=d=g=.5,1===a?(d=1-dt(e,u,h),p=1-dt(e,c,h)):2===a?(p=dt(e,h,c),g=1-dt(e,l,c)):3===a?(d=1-dt(e,u,h),g=1-dt(e,l,c)):4===a?(f=dt(e,u,l),g=dt(e,c,l)):5===a?(f=dt(e,u,l),g=dt(e,c,l),p=1-dt(e,c,h),d=1-dt(e,u,h)):6===a?(p=dt(e,h,c),f=dt(e,u,l)):7===a?(d=1-dt(e,u,h),f=dt(e,u,l)):8===a?(d=dt(e,h,u),f=1-dt(e,l,u)):9===a?(p=1-dt(e,c,h),f=1-dt(e,l,u)):10===a?(f=1-dt(e,l,u),g=1-dt(e,l,c),p=dt(e,h,c),d=dt(e,h,u)):11===a?(f=1-dt(e,l,u),g=1-dt(e,l,c)):12===a?(d=dt(e,h,u),g=dt(e,c,l)):13===a?(p=1-dt(e,c,h),g=dt(e,c,l)):14===a?(d=dt(e,h,u),p=dt(e,h,c)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:y,top:f,right:g,bottom:p,left:d})}}}return i}(t,e),u=[],l=0,c=1e-7,a.cells.forEach((function(t,e){t.forEach((function(t,n){if(void 0!==t&&5!==(p=t).cval&&10!==p.cval&&!gt(t)){var r=function(t,e,n){var r,i,o=t.length,s=[],a=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],h=t[e][n],f=h.cval,p=l[f],d=vt(h,p);s.push([n+d[0],e+d[1]]),d=vt(h,p=c[f]),s.push([n+d[0],e+d[1]]),yt(h);for(var g=n+a[f],y=e+u[f],v=f;g>=0&&y>=0&&y<o&&(g!=n||y!=e)&&void 0!==(h=t[y][g]);){if(0===(f=h.cval)||15===f)return{path:s,info:"mergeable"};p=c[f],r=a[f],i=u[f],5!==f&&10!==f||(5===f?h.flipped?-1===u[v]?(p="left",r=-1,i=0):(p="right",r=1,i=0):-1===a[v]&&(p="bottom",r=0,i=-1):10===f&&(h.flipped?-1===a[v]?(p="top",r=0,i=1):(p="bottom",r=0,i=-1):1===u[v]&&(p="left",r=-1,i=0))),d=vt(h,p),s.push([g+d[0],y+d[1]]),yt(h),g+=r,y+=i,v=f}return{path:s,info:"closed"}}(a.cells,e,n),i=!1;if("mergeable"===r.info)for(var o=r.path[r.path.length-1][0],s=r.path[r.path.length-1][1],h=l-1;h>=0;h--)if(Math.abs(u[h][0][0]-o)<=c&&Math.abs(u[h][0][1]-s)<=c){for(var f=r.path.length-2;f>=0;--f)u[h].unshift(r.path[f]);i=!0;break}i||(u[l++]=r.path)}var p}))})),u);return"function"==typeof ft.successCallback&&ft.successCallback(h),h}function dt(t,e,n){return(t-e)/(n-e)}function gt(t){return 0===t.cval||15===t.cval}function yt(t){gt(t)||5===t.cval||10===t.cval||(t.cval=15)}function vt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function mt(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=J(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return J(t)[0]-J(e)[0]}))})).sort((function(t,n){return e?J(t[0])[1]-J(n[0])[1]:J(n[0])[1]-J(t[0])[1]}))}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var _t=bt,xt=bt;function bt(t,e,n,r,i){Et(t,e,n||0,r||t.length-1,i||Mt)}function Et(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);Et(t,e,Math.max(n,Math.floor(e-s*u/o+l)),Math.min(r,Math.floor(e+(o-s)*u/o+l)),i)}var c=t[e],h=n,f=r;for(wt(t,n,e),i(t[r],c)>0&&wt(t,n,r);h<f;){for(wt(t,h,f),h++,f--;i(t[h],c)<0;)h++;for(;i(t[f],c)>0;)f--}0===i(t[n],c)?wt(t,n,f):wt(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function wt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Mt(t,e){return t<e?-1:t>e?1:0}_t.default=xt;var St=Nt,Ct=Nt;function Nt(t,e){if(!(this instanceof Nt))return new Nt(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function It(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Pt(t,e){Lt(t,0,t.children.length,e,t)}function Lt(t,e,n,r,i){i||(i=zt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],Ot(i,t.leaf?r(o):o);return i}function Ot(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Rt(t,e){return t.minX-e.minX}function kt(t,e){return t.minY-e.minY}function Tt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function At(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Dt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ft(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function zt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function jt(t,e,n,r,i){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,_t(t,o,e,n,i),s.push(e,o,o,n))}function qt(t){var e={exports:{}};return t(e,e.exports),e.exports}Nt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ft(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],Ft(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):Dt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ft(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Ft(t,s=e.leaf?n(o):o)){if(e.leaf||Dt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=zt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],l=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=l.pop(),o=!0),s.leaf&&-1!==(i=It(t,s.children,e)))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Dt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:Rt,compareMinY:kt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return Pt(i=zt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=zt([])).leaf=!1,i.height=r;var a,u,l,c,h=Math.ceil(o/s),f=h*Math.ceil(Math.sqrt(s));for(jt(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(jt(t,a,l=Math.min(a+f-1,n),h,this.compareMinY),u=a;u<=l;u+=h)c=Math.min(u+h-1,l),i.children.push(this._build(t,u,c,r-1));return Pt(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,l,c,h,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(c=h=1/0,i=0,o=e.children.length;i<o;i++)u=Tt(s=e.children[i]),f=t,p=s,(l=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=l,c=u<c?u:c,a=s):l===h&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Ot(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=zt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Pt(n,this.toBBox),Pt(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=zt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Pt(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,l,c,h,f,p,d,g,y;for(u=l=1/0,r=e;r<=n-e;r++)h=i=Lt(t,0,r,this.toBBox),f=o=Lt(t,r,n,this.toBBox),p=void 0,d=void 0,g=void 0,y=void 0,p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),g=Math.min(h.maxX,f.maxX),y=Math.min(h.maxY,f.maxY),s=Math.max(0,g-p)*Math.max(0,y-d),a=Tt(i)+Tt(o),s<u?(u=s,c=r,l=a<l?a:l):s===u&&a<l&&(l=a,c=r);return c},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Rt,i=t.leaf?this.compareMinY:kt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Lt(t,0,e,s),u=Lt(t,n-e,n,s),l=At(a)+At(u);for(i=e;i<n-e;i++)o=t.children[i],Ot(a,t.leaf?s(o):o),l+=At(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Ot(u,t.leaf?s(o):o),l+=At(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ot(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Pt(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},St.default=Ct;var Gt=function(t,e,n){var r=t*e,i=Bt*t,o=i-(i-t),s=t-o,a=Bt*e,u=a-(a-e),l=e-u,c=s*l-(r-o*u-s*u-o*l);return n?(n[0]=c,n[1]=r,n):[c,r]},Bt=+(Math.pow(2,27)+1),Ut=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=p,(l+=1)<r&&(d=c(p=e[l]))),u<n&&f<d||l>=r?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=e[l])));for(var g,y,v=i+o,m=v-i,_=o-m,x=_,b=v;u<n&&l<r;)f<d?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=e[l]))),(_=(o=x)-(m=(v=i+o)-i))&&(s[a++]=_),x=b-((g=b+v)-(y=g-b))+(v-y),b=g;for(;u<n;)(_=(o=x)-(m=(v=(i=h)+o)-i))&&(s[a++]=_),x=b-((g=b+v)-(y=g-b))+(v-y),b=g,(u+=1)<n&&(h=t[u]);for(;l<r;)(_=(o=x)-(m=(v=(i=p)+o)-i))&&(s[a++]=_),x=b-((g=b+v)-(y=g-b))+(v-y),b=g,(l+=1)<r&&(p=e[l]);return x&&(s[a++]=x),b&&(s[a++]=b),a||(s[a++]=0),s.length=a,s},Vt=function(t,e,n){var r=t+e,i=r-t,o=e-i,s=t-(r-i);return n?(n[0]=s+o,n[1]=r,n):[s+o,r]},Xt=function(t,e){var n=t.length;if(1===n){var r=Gt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Gt(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Gt(t[u],e,s);var l=o[1];Vt(l,s[0],o),o[0]&&(i[a++]=o[0]);var c=s[1],h=o[1],f=c+h,p=h-(f-c);o[1]=f,p&&(i[a++]=p)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i},Yt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,s=new Array(n+r),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),p=-e[l],d=c(p);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=p,(l+=1)<r&&(d=c(p=-e[l]))),u<n&&f<d||l>=r?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=-e[l])));for(var g,y,v=i+o,m=v-i,_=o-m,x=_,b=v;u<n&&l<r;)f<d?(i=h,(u+=1)<n&&(f=c(h=t[u]))):(i=p,(l+=1)<r&&(d=c(p=-e[l]))),(_=(o=x)-(m=(v=i+o)-i))&&(s[a++]=_),x=b-((g=b+v)-(y=g-b))+(v-y),b=g;for(;u<n;)(_=(o=x)-(m=(v=(i=h)+o)-i))&&(s[a++]=_),x=b-((g=b+v)-(y=g-b))+(v-y),b=g,(u+=1)<n&&(h=t[u]);for(;l<r;)(_=(o=x)-(m=(v=(i=p)+o)-i))&&(s[a++]=_),x=b-((g=b+v)-(y=g-b))+(v-y),b=g,(l+=1)<r&&(p=-e[l]);return x&&(s[a++]=x),b&&(s[a++]=b),a||(s[a++]=0),s.length=a,s},Wt=qt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(s=o,1&s?"-":""),t[0][o],")"].join(""));var s;return i}function i(t){for(var i=[],o=[],s=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),a=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,r(e(s,u))):o.push.apply(o,r(e(s,u))),a.push("m"+u);var l=n(i),c=n(o),h="orientation"+t+"Exact",f=["function ",h,"(",a.join(),"){var p=",l,",n=",c,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Ut,Gt,Xt,Yt)}var o=i(3),s=i(4),a=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),s=(t[0]-n[0])*(e[1]-n[1]),a=i-s;if(i>0){if(s<=0)return a;r=i+s}else{if(!(i<0))return a;if(s>=0)return a;r=-(i+s)}var u=33306690738754716e-32*r;return a>=u||a<=-u?a:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],u=t[1]-r[1],l=e[1]-r[1],c=n[1]-r[1],h=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*c,g=a*l,y=a*u,v=i*c,m=i*l,_=o*u,x=h*(d-g)+f*(y-v)+p*(m-_),b=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(y)+Math.abs(v))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return x>b||-x>b?x:s(t,e,n,r)}];function u(t){var e=a[t.length];return e||(e=a[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;a.length<=5;)a.push(i(a.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var s=Function.apply(void 0,n);for(t.exports=s.apply(void 0,[u].concat(a)),r=0;r<=5;++r)t.exports[r]=a[r]}()})),Ht=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[i[0],i[1]],s=[i[0],i[1]];for(r=2;r<e;++r){for(var a=i[r],u=t[a],l=o.length;l>1&&Qt(t[o[l-2]],t[o[l-1]],u)<=0;)l-=1,o.pop();for(o.push(a),l=s.length;l>1&&Qt(t[s[l-2]],t[s[l-1]],u)>=0;)l-=1,s.pop();s.push(a)}n=new Array(s.length+o.length-2);for(var c=0,h=(r=0,o.length);r<h;++r)n[c++]=o[r];for(var f=s.length-2;f>0;--f)n[c++]=s[f];return n},Qt=Wt[3],$t=Jt,Kt=Jt;function Jt(t,e){if(!(this instanceof Jt))return new Jt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Zt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Zt(t,e){return t<e?-1:t>e?1:0}Jt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},$t.default=Kt;var te=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],l=e[s][0],c=e[s][1];u>r!=c>r&&n<(l-a)*(r-u)/(c-u)+a&&(i=!i)}return i},ee=Wt[3],ne=ie,re=ie;function ie(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)te(t[o],a)||u.push(t[o]);var l=Ht(u),c=[];for(o=0;o<l.length;o++)c.push(u[l[o]]);return c}(t),o=St(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=he(u,r),s.push(r)}var l=St(16);for(a=0;a<s.length;a++)l.insert(ce(s[a]));for(var c=e*e,h=n*n;s.length;){var f=s.shift(),p=f.p,d=f.next.p,g=fe(p,d);if(!(g<h)){var y=g/c;(u=oe(o,f.prev.p,p,d,f.next.next.p,y,l))&&Math.min(fe(u,p),fe(u,d))<=y&&(s.push(f),s.push(he(u,f)),o.remove(u),l.remove(f),l.insert(ce(f)),l.insert(ce(f.next)))}}f=r;var v=[];do{v.push(f.p),f=f.next}while(f!==r);return v.push(f.p),v}function oe(t,e,n,r,i,o,s){for(var a=new $t(null,se),u=t.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],h=u.leaf?pe(c,n,r):ae(n,r,c);h>o||a.push({node:c,dist:h})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),p=f.node,d=pe(p,e,n),g=pe(p,r,i);if(f.dist<d&&f.dist<g&&le(n,p,s)&&le(r,p,s))return p}(u=a.pop())&&(u=u.node)}return null}function se(t,e){return t.dist-e.dist}function ae(t,e,n){if(ue(t,n)||ue(e,n))return 0;var r=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=de(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=de(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=de(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function ue(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function le(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),c=Math.max(t[1],e[1]),h=n.search({minX:a,minY:u,maxX:l,maxY:c}),f=0;f<h.length;f++)if(r=h[f].p,i=h[f].next.p,o=t,r!==(s=e)&&i!==o&&ee(r,i,o)>0!=ee(r,i,s)>0&&ee(o,s,r)>0!=ee(o,s,i)>0)return!1;return!0}function ce(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function he(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function fe(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function pe(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function de(t,e,n,r,i,o,s,a){var u,l,c,h,f=n-t,p=r-e,d=s-i,g=a-o,y=t-i,v=e-o,m=f*f+p*p,_=f*d+p*g,x=d*d+g*g,b=f*y+p*v,E=d*y+g*v,w=m*x-_*_,M=w,S=w;0===w?(l=0,M=1,h=E,S=x):(h=m*E-_*b,(l=_*E-x*b)<0?(l=0,h=E,S=x):l>M&&(l=M,h=E+_,S=x)),h<0?(h=0,-b<0?l=0:-b>m?l=M:(l=-b,M=m)):h>S&&(h=S,-b+_<0?l=0:-b+_>m?l=M:(l=-b+_,M=m));var C=(1-(c=0===h?0:h/S))*i+c*s-((1-(u=0===l?0:l/M))*t+u*n),N=(1-c)*o+c*a-((1-u)*e+u*r);return C*C+N*N}function ge(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(R(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=ne(n,e.concavity);return r.length>3?l([r]):null}function ye(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=K(t),i=rt(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length&&!u;l++)if(ve(r,a[l][0],n.ignoreBoundary)){for(var c=!1,h=1;h<a[l].length&&!c;)ve(r,a[l][h],!n.ignoreBoundary)&&(c=!0),h++;c||(u=!0)}return u}function ve(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],l=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+l*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(l-t[1])<=0)return!n;a>t[1]!=l>t[1]&&t[0]<(u-s)*(t[1]-a)/(l-a)+s&&(r=!r)}return r}function me(t,e){var n=[];return D(t,(function(t){var r=!1;if("Point"===t.geometry.type)j(e,(function(e){ye(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];j(e,(function(e){R(t,(function(t){ye(t,e)&&(r=!0,i.push(t))}))})),r&&n.push(g(i))}})),p(n)}function _e(t,e,n){void 0===n&&(n={});var r=K(t),i=K(e),o=M(i[1]-r[1]),s=M(i[0]-r[0]),a=M(r[1]),u=M(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return _(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function xe(t,e){var n=!1;return p(function(t){if(t.length<3)return[];t.sort(Ee);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,c=t[a].y,h=c,f=1e-12;a--;)t[a].y<c&&(c=t[a].y),t[a].y>h&&(h=t[a].y);var p,d=l-u,g=h-c,y=d>g?d:g,v=.5*(l+u),m=.5*(h+c),_=[new be({__sentinel:!0,x:v-20*y,y:m-y},{__sentinel:!0,x:v,y:m+20*y},{__sentinel:!0,x:v+20*y,y:m-y})],x=[],b=[];for(a=t.length;a--;){for(b.length=0,p=_.length;p--;)(d=t[a].x-_[p].x)>0&&d*d>_[p].r?(x.push(_[p]),_.splice(p,1)):d*d+(g=t[a].y-_[p].y)*g>_[p].r||(b.push(_[p].a,_[p].b,_[p].b,_[p].c,_[p].c,_[p].a),_.splice(p,1));for(we(b),p=b.length;p;)n=b[--p],e=b[--p],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>f&&_.push(new be(e,n,r))}for(Array.prototype.push.apply(x,_),a=x.length;a--;)(x[a].a.__sentinel||x[a].b.__sentinel||x[a].c.__sentinel)&&x.splice(a,1);return x}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},l([[e,r,i,e]],o)})))}ne.default=re;var be=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,l=o*(t.x+e.x)+s*(t.y+e.y),c=a*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*l-s*c)/h,this.y=(o*c-a*l)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function Ee(t,e){return e.x-t.x}function we(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function Me(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Se(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Se(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ne(t);default:throw new Error("unknown GeoJSON type")}}function Se(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=Ce(t.properties),e.geometry=Ne(t.geometry),e}function Ce(t){var e={};return t?(Object.keys(t).forEach((function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:Array.isArray(r)?e[n]=r.map((function(t){return t})):e[n]=Ce(r):e[n]=r})),e):e}function Ne(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Ne(t)})),e):(e.coordinates=Ie(t.coordinates),e)}function Ie(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return Ie(t)}))}function Pe(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Me(t));var r=[],i=Y(t,(function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Le(r[0]),s=Le(r[r.length-1]),a=Le(i[0]),u=Le(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return h(n)}(t,e);return n||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:d(r.map((function(t){return t.coordinates}))):null}function Le(t){return t[0].toString()+","+t[1].toString()}function Oe(t){return t}function Re(t,e){var n=function(t){if(null==t)return Oe;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*r+o,c[1]=(n+=t[1])*i+s;u<l;)c[u]=t[u],++u;return c}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,s=i.length;o<s;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,s)}function o(t){return n(t)}function s(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(a)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=s(e.arcs);break;case"MultiLineString":n=e.arcs.map(s);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function ke(t,e){var n={},r={},i={},o=[],s=-1;function a(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++s],e[s]=n,e[r]=i)})),e.forEach((function(e){var n,o,s=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),a=s[0],u=s[1];if(n=i[a])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=a,o=i[a]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=a]=i[n.end=u]=n})),a(i,r),a(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}function Te(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function s(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Re(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=ke(t,i)).length)>1)for(var o,a,u=1,l=s(i[0]);u<r;++u)(o=s(i[u]))>l&&(a=i[0],i[0]=i[u],i[u]=a,l=o);return i})).filter((function(t){return t.length>0}))}}var Ae=Object.prototype.hasOwnProperty;function De(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var s=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=new o(t),u=t-1,l=0;l<t;++l)s[l]=i;function c(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l]=o;if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=o,o}function h(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l];if(++h>=t)throw new Error("full hashmap");c=s[l=l+1&u]}return s[l]=r,a[l]=o,o}function f(r,o){for(var l=e(r)&u,c=s[l],h=0;c!=i;){if(n(c,r))return a[l];if(++h>=t)break;c=s[l=l+1&u]}return o}function p(){for(var t=[],e=0,n=s.length;e<n;++e){var r=s[e];r!=i&&t.push(r)}return t}return{set:c,maybeSet:h,get:f,keys:p}}function Fe(t,e){return t[0]===e[0]&&t[1]===e[1]}var ze=new ArrayBuffer(16),je=new Float64Array(ze),qe=new Uint32Array(ze);function Ge(t){je[0]=t[0],je[1]=t[1];var e=qe[0]^qe[1];return 2147483647&(e<<5^e>>7^qe[2]^qe[3])}function Be(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=De(1.4*o.length,b,E,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),c=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)l[e]=c[e]=h[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],g=d[0],y=d[1];for(r=u[g],i=u[++g],++p,f[r]=1;++g<=y;)x(e,r,r=i,i=u[g]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var v=a[e],m=v[0]+1,_=v[1];for(x(e,u[_-1],r=u[m-1],i=u[m]);++m<=_;)x(e,r,r=i,i=u[m])}function x(t,e,n,r){if(l[n]!==t){l[n]=t;var i=c[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else c[n]=e,h[n]=r}}function b(t){return Ge(o[t])}function E(t,e){return Fe(o[t],o[e])}l=c=h=null;var w,M=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=t-1,a=0;a<t;++a)o[a]=i;function u(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)throw new Error("full hashset");u=o[a=a+1&s]}return o[a]=r,!0}function l(r){for(var a=e(r)&s,u=o[a],l=0;u!=i;){if(n(u,r))return!0;if(++l>=t)break;u=o[a=a+1&s]}return!1}function c(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:u,has:l,values:c}}(1.4*p,Ge,Fe);for(e=0,n=o.length;e<n;++e)f[w=u[e]]&&M.add(o[w]);return M}function Ue(t,e,n,r){Ve(t,e,n),Ve(t,e,e+r),Ve(t,e+r,n)}function Ve(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Xe(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Ye:"Feature"===n.type?We:He)(n);return r}function Ye(t){var e={type:"GeometryCollection",geometries:t.features.map(We)};return null!=t.bbox&&(e.bbox=t.bbox),e}function We(t){var e,n=He(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function He(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(He)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Qe(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&Ae.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var o=t[0],s=t[1];o<e&&(e=o),o>r&&(r=o),s<n&&(n=s),s>i&&(i=s)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var c in t)o(t[c]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=Xe(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=o-r?(n-1)/(o-r):1,u=s-i?(n-1)/(s-i):1;function l(t){return[Math.round((t[0]-r)*a),Math.round((t[1]-i)*u)]}function c(t,e){for(var n,o,s,l,c,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)n=t[h],l=Math.round((n[0]-r)*a),c=Math.round((n[1]-i)*u),l===o&&c===s||(d[f++]=[o=l,s=c]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return c(t,2)}function f(t){return c(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&Ae.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=l(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(l)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var y in t)d(t[y]);return{scale:[1/a,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=s.length+a.length;for(delete t.lines,delete t.rings,r=0,i=s.length;r<i;++r)for(e=s[r];e=e.next;)++u;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++u;var l=De(2*u*1.4,Ge,Fe),c=t.arcs=[];for(r=0,i=s.length;r<i;++r){e=s[r];do{h(e)}while(e=e.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{h(n)}while(n=n.next);else f(n);function h(t){var e,n,r,i,s,a,u,h;if(r=l.get(e=o[t[0]]))for(u=0,h=r.length;u<h;++u)if(p(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(s=l.get(n=o[t[1]]))for(u=0,h=s.length;u<h;++u)if(d(a=s[u],t))return t[1]=a[0],void(t[0]=a[1]);r?r.push(t):l.set(e,[t]),s?s.push(t):l.set(n,[t]),c.push(t)}function f(t){var e,n,r,i,s;if(n=l.get(o[t[0]]))for(i=0,s=n.length;i<s;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=o[t[0]+v(t)]))for(i=0,s=n.length;i<s;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(y(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),c.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Fe(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],s=e[1];if(n-i!=r-s)return!1;for(;n<=i;++n,--s)if(!Fe(o[n],o[s]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var s=v(t),a=v(e),u=0;u<i;++u)if(!Fe(o[n+(u+s)%i],o[r+(u+a)%i]))return!1;return!0}function y(t,e){var n=t[0],r=e[0],i=t[1],s=e[1],a=i-n;if(a!==s-r)return!1;for(var u=v(t),l=a-v(e),c=0;c<a;++c)if(!Fe(o[n+(c+u)%a],o[s-(c+l)%a]))return!1;return!0}function v(t){for(var e=t[0],n=t[1],r=e,i=r,s=o[r];++r<n;){var a=o[r];(a[0]<s[0]||a[0]===s[0]&&a[1]<s[1])&&(i=r,s=a)}return i-e}return t}(function(t){var e,n,r,i=Be(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Ue(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&Ae.call(s,t.type)&&s[t.type](t)}var s={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=a(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(a)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function a(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var s={0:e-o+1,1:e};return n.push(s),s}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var s={0:e-o+1,1:e};return r.push(s),s}function l(t){return t.map(u)}for(var c in t)o(t[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,s=De(1.4*i.arcs.length,$e,Ke);function a(t){t&&Ae.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return s.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(a)},LineString:function(t){t.arcs=l(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(l)},Polygon:function(t){t.arcs=t.arcs.map(l)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function l(t){var e=[];do{var n=s.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function c(t){return t.map(l)}for(var h in t)a(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,l=o[0],c=l[0],h=l[1];++s<u;)r=(l=o[s])[0],i=l[1],r===c&&i===h||(o[a++]=[r-c,i-h],c=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t}(i.arcs)),i}function $e(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Ke(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Je(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Me(t));var n=[];G(t,(function(t){n.push(t.geometry)}));var r=Qe({geoms:v(n).geometry});return function(t){return Re(t,Te.apply(this,arguments))}(r,r.objects.geoms.geometries)}function Ze(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Me(t));var r=function(t){var e={};G(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return Pe(i,e);case"Polygon":return Je(i,e);default:throw new Error(r+" is not supported")}}function tn(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=it(t),i=[];switch(r){case"LineString":i=en(t);break;case"MultiLineString":case"Polygon":J(t).forEach((function(t){i.push(en(t))}));break;case"MultiPolygon":J(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(en(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var s={};J(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(s,e)||(i.push(t),s[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):o({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function en(t){var e=J(t);if(2===e.length&&!nn(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var s=n[n.length-1];e[o][0]===s[0]&&e[o][1]===s[1]||(n.push(e[o]),(i=n.length)>2&&rn(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,nn(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return rn(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function nn(t,e){return t[0]===e[0]&&t[1]===e[1]}function rn(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,c=u-s;return 0==(r-o)*c-(i-s)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=a:a<=r&&r<=o:c>0?s<=i&&i<=u:u<=i&&i<=s)}function on(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function sn(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=on(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&sn(t,e,o,r,i),i.push(t[o]),n-o>1&&sn(t,o,n,r,i))}function an(t,e){var n=t.length-1,r=[t[0]];return sn(t,0,n,e,r),r.push(t[n]),r}function un(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return an(t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],l=1,c=t.length;l<c;l++)i=a,o=void 0,s=void 0,(o=(r=n=t[l]).x-i.x)*o+(s=r.y-i.y)*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),r)}function ln(t,e,n){return un(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function cn(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=un(r,e,n).map((function(t){return[t.x,t.y]}));!hn(i);)i=un(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function hn(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var fn=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r,i,o,s,a,u,l=Math.floor((this.points.length-1)*n);return r=(this.length-1)*n-l,i=this.points[l],o=this.controls[l][1],s=this.controls[l+1][0],a=this.points[l+1],u=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(r),{x:a.x*u[0]+s.x*u[1]+o.x*u[2]+i.x*u[3],y:a.y*u[0]+s.y*u[1]+o.y*u[2]+i.y*u[3],z:a.z*u[0]+s.z*u[1]+o.z*u[2]+i.z*u[3]}},t}();function pn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=rt(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),s=new fn({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),h(i,e.properties)}function dn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return l([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}function gn(t){return dn($(t))}function yn(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(_e(t.slice(0,2),[r,n])>=_e(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function vn(t,e,n,r){void 0===r&&(r={});var i=K(t),o=M(i[0]),s=M(i[1]),u=M(n),l=x(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(u));return a([w(o+Math.atan2(Math.sin(u)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c))),w(c)],r.properties)}function mn(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(vn(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),l([o],i)}function _n(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=_n(e,t);return(n+180)%360}(t,e);var r=K(t),i=K(e),o=M(r[0]),s=M(i[0]),a=M(r[1]),u=M(i[1]),l=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return w(Math.atan2(l,c))}function xn(t,e){void 0===e&&(e={});var n=$(t);return a([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function bn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return R(t,(function(t){n+=t[0],r+=t[1],i++}),!0),a([n/i,r/i],e.properties)}function En(t){var e=[];return"FeatureCollection"===t.type?D(t,(function(t){R(t,(function(n){e.push(a(n,t.properties))}))})):R(t,(function(n){e.push(a(n,t.properties))})),p(e)}var wn=Sn,Mn=Sn;function Sn(t,e,n){n=n||2;var r,i,o,s,a,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=Cn(t,0,h,n,!0),p=[];if(!f)return p;if(c&&(f=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=Cn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(Dn(s));for(a.sort(kn),i=0;i<a.length;i++)Tn(a[i],n),n=Nn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<h;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-r,s-i))?1/l:0}return In(f,p,n,r,i,l),p}function Cn(t,e,n,r,i){var o,s;if(i===Wn(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Vn(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Vn(o,t[o],t[o+1],s);return s&&qn(s,s.next)&&(Xn(s),s=s.next),s}function Nn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!qn(r,r.next)&&0!==jn(r.prev,r,r.next))r=r.next;else{if(Xn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function In(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=An(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,r,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Ln(t,r,i,o):Pn(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Xn(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?In(t=On(t,e,n),e,n,r,i,o,2):2===s&&Rn(t,e,n,r,i,o):In(Nn(t),e,n,r,i,o,1);break}}}function Pn(t){var e=t.prev,n=t,r=t.next;if(jn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Fn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&jn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ln(t,e,n,r){var i=t.prev,o=t,s=t.next;if(jn(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=An(a,u,e,n,r),f=An(l,c,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&jn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&jn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Fn(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&jn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function On(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!qn(i,o)&&Gn(i,r,r.next,o)&&Bn(i,o)&&Bn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Xn(r),Xn(r.next),r=t=o),r=r.next}while(r!==t);return r}function Rn(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&zn(s,a)){var u=Un(s,a);return s=Nn(s,s.next),u=Nn(u,u.next),In(s,e,n,r,i,o),void In(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function kn(t,e){return t.x-e.x}function Tn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&Fn(o<h?i:s,o,c,h,o<h?s:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Bn(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=Un(e,t);Nn(n,n.next)}}function An(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Dn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Fn(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function zn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Gn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Bn(t,e)&&Bn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function jn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function qn(t,e){return t.x===e.x&&t.y===e.y}function Gn(t,e,n,r){return!!(qn(t,e)&&qn(n,r)||qn(t,r)&&qn(n,e))||jn(t,e,n)>0!=jn(t,e,r)>0&&jn(n,r,t)>0!=jn(n,r,e)>0}function Bn(t,e){return jn(t.prev,t,t.next)<0?jn(t,e,t.next)>=0&&jn(t,t.prev,e)>=0:jn(t,e,t.prev)<0||jn(t,t.next,e)<0}function Un(t,e){var n=new Yn(t.i,t.x,t.y),r=new Yn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Vn(t,e,n,r){var i=new Yn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Xn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Yn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wn(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function Hn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=wn(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var s=i.slice(o,o+3);s.push(i[o]),r.push(l([s]))}return r}function Qn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return D(e,(function(e,n){var o=_e(t,e);o<r&&(i=n,r=o)})),(n=Me(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function $n(t){if(!t)throw new Error("geojson is required");var e=[];return G(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=J(r);break;case"LineString":n=[J(r)]}n.forEach((function(n){var r,i,o;(r=n,i=t.properties,o=[],r.reduce((function(t,e){var n=h([t,e],i);return n.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,e),o.push(n),e})),o).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),p(e)}Sn.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Wn(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Wn(t,l,c,n))}var h=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,p=r[a+1]*n,d=r[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},Sn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},wn.default=Mn;var Kn=qt((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var s=o[i];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return a(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),s(t.map((function(t){return o(t,e)})),n)},e.featureCollection=s,e.multiLineString=a,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function Jn(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,c,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,v=0;v<y;v++){a=(c=!!(l=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=c?l.geometries[m]:l)){u=s.coordinates;var b=s.type;switch(h=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,v,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,v,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,v,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,v,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===Jn(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Zn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function tr(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function er(t,e){var n,r,i,o,s,a,u,l,c,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(a=p?t.features[n].geometry:d?t.geometry:t,l=p?t.features[n].properties:d?t.properties:{},c=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,c,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,c,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,c,h))return!1;f++}}function nr(t,e){er(t,(function(t,n,r,i,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Kn.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var l={type:s,coordinates:t.coordinates[u]};if(!1===e(Kn.feature(l,r),n,u))return!1}}))}function rr(t,e){nr(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,u=0,l=0;return!1!==Jn(t,(function(o,c,h,f,p){if(void 0===s||n>a||f>u||p>l)return s=o,a=n,u=f,l=p,void(i=0);var d=Kn.lineString([s,o],t.properties);if(!1===e(d,n,r,p,i))return!1;i++,s=o}))&&void 0}}}))}function ir(t,e){if(!t)throw new Error("geojson is required");nr(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(!1===e(Kn.lineString(o[s],t.properties),n,r,s))return!1}}}))}var or=function(t){var e=[];return Jn(t,(function(t){e.push(t)})),e},sr=Jn,ar=function(t,e,n,r){var i=n;return Jn(t,(function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)}),r),i},ur=tr,lr=function(t,e,n){var r=n;return tr(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},cr=function(t,e){if(e=e||{},!Kn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Kn.point(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),Kn.point(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),Kn.point(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),Kn.point(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),Kn.point(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),Kn.point(u[i][o][s],a,e)}throw new Error("geojson is invalid")},hr=function(t,e){if(e=e||{},!Kn.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Kn.lineString([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Kn.lineString([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Kn.lineString([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Kn.lineString([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")},fr=nr,pr=function(t,e,n){var r=n;return nr(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},dr=er,gr=function(t,e,n){var r=n;return er(t,(function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)})),r},yr=ir,vr=function(t,e,n){var r=n;return ir(t,(function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)})),r},mr=Zn,_r=function(t,e,n){var r=n;return Zn(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},xr=rr,br=function(t,e,n){var r=n,i=!1;return rr(t,(function(t,o,s,a,u){r=!1===i&&void 0===n?t:e(r,t,o,s,a,u),i=!0})),r},Er=Object.defineProperty({coordAll:or,coordEach:sr,coordReduce:ar,featureEach:ur,featureReduce:lr,findPoint:cr,findSegment:hr,flattenEach:fr,flattenReduce:pr,geomEach:dr,geomReduce:gr,lineEach:yr,lineReduce:vr,propEach:mr,propReduce:_r,segmentEach:xr,segmentReduce:br},"__esModule",{value:!0});function wr(t){var e=[1/0,1/0,-1/0,-1/0];return Er.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}wr.default=wr;var Mr=wr,Sr=Object.defineProperty({default:Mr},"__esModule",{value:!0}).default,Cr=Er.featureEach,Nr=(Er.coordEach,Kn.polygon,Kn.featureCollection);function Ir(t){var e=St(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Sr(t),St.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Sr(t),e.push(t)})):Cr(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:Sr(t),e.push(t)})),St.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:Sr(t),St.prototype.remove.call(this,t,e)},e.clear=function(){return St.prototype.clear.call(this)},e.search=function(t){var e=St.prototype.search.call(this,this.toBBox(t));return Nr(e)},e.collides=function(t){return St.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=St.prototype.all.call(this);return Nr(t)},e.toJSON=function(){return St.prototype.toJSON.call(this)},e.fromJSON=function(t){return St.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Sr(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=Sr(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Pr=Ir,Lr=Ir;function Or(t,e){var n={},r=[];if("LineString"===t.type&&(t=o(t)),"LineString"===e.type&&(e=o(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Rr(t,e);return i&&r.push(i),p(r)}var s=Pr();return s.load($n(e)),D($n(t),(function(t){D(s.search(t),(function(e){var i=Rr(t,e);if(i){var o=J(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),p(r)}function Rr(t,e){var n=J(t),r=J(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],s=n[1][0],u=n[1][1],l=r[0][0],c=r[0][1],h=r[1][0],f=r[1][1],p=(f-c)*(s-i)-(h-l)*(u-o);if(0===p)return null;var d=((h-l)*(o-c)-(f-c)*(i-l))/p,g=((s-i)*(o-c)-(u-o)*(i-l))/p;return d>=0&&d<=1&&g>=0&&g<=1?a([i+d*(s-i),o+d*(u-o)]):null}function kr(t,e,n){void 0===n&&(n={});var r=a([1/0,1/0],{dist:1/0}),i=0;return G(t,(function(t){for(var o=J(t),s=0;s<o.length-1;s++){var u=a(o[s]);u.properties.dist=_e(e,u,n);var l=a(o[s+1]);l.properties.dist=_e(e,l,n);var c=_e(u,l,n),f=Math.max(u.properties.dist,l.properties.dist),p=_n(u,l),d=vn(e,f,p+90,n),g=vn(e,f,p-90,n),y=Or(h([d.geometry.coordinates,g.geometry.coordinates]),h([u.geometry.coordinates,l.geometry.coordinates])),v=null;y.features.length>0&&((v=y.features[0]).properties.dist=_e(e,v,n),v.properties.location=i+_e(u,v,n)),u.properties.dist<r.properties.dist&&((r=u).properties.index=s,r.properties.location=i),l.properties.dist<r.properties.dist&&((r=l).properties.index=s+1,r.properties.location=i+c),v&&v.properties.dist<r.properties.dist&&((r=v).properties.index=s),i+=c}})),r}function Tr(t,n,r){void 0===r&&(r={});var i=K(t),o=K(n);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,S(function(t,n,r){var i=r=void 0===r?e:Number(r),o=t[1]*Math.PI/180,s=n[1]*Math.PI/180,a=s-o,u=Math.abs(n[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var l=Math.log(Math.tan(s/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(l)>1e-11?a/l:Math.cos(o);return Math.sqrt(a*a+c*c*u*u)*i}(i,o),"meters",r.units)}function Ar(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=a(t):"Point"===t.type?t=o(t):et(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=h(e):"LineString"===e.type?e=o(e):et(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return U(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],s=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=Dr([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return Fr(t,e,{method:r.method,units:"degrees"});var s=Dr(i,i);if(s<=o)return Fr(t,n,{method:r.method,units:"degrees"});var a=o/s;return Fr(t,[e[0]+a*i[0],e[1]+a*i[1]],{method:r.method,units:"degrees"})}(i,e,o,n);s<r&&(r=s)})),S(r,"degrees",n.units)}function Dr(t,e){return t[0]*e[0]+t[1]*e[1]}function Fr(t,e,n){return"planar"===n.method?Tr(t,e,n):_e(t,e,n)}function zr(t,e,n,r,i,o,s,a){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(l=e-o)-(r-e)*(c=t-i),l=((s-i)*l-(a-o)*c)/u,c=h/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function jr(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?p([o(t)]):p([t]):t}(t),n=xn(e),r=!1,i=0;!r&&i<e.features.length;){var s,u=e.features[i].geometry,l=!1;if("Point"===u.type)n.geometry.coordinates[0]===u.coordinates[0]&&n.geometry.coordinates[1]===u.coordinates[1]&&(r=!0);else if("MultiPoint"===u.type){var c=!1;for(s=0;!c&&s<u.coordinates.length;)n.geometry.coordinates[0]===u.coordinates[s][0]&&n.geometry.coordinates[1]===u.coordinates[s][1]&&(r=!0,c=!0),s++}else if("LineString"===u.type)for(s=0;!l&&s<u.coordinates.length-1;)qr(n.geometry.coordinates[0],n.geometry.coordinates[1],u.coordinates[s][0],u.coordinates[s][1],u.coordinates[s+1][0],u.coordinates[s+1][1])&&(l=!0,r=!0),s++;else if("MultiLineString"===u.type)for(var h=0;h<u.coordinates.length;){l=!1,s=0;for(var f=u.coordinates[h];!l&&s<f.length-1;)qr(n.geometry.coordinates[0],n.geometry.coordinates[1],f[s][0],f[s][1],f[s+1][0],f[s+1][1])&&(l=!0,r=!0),s++;h++}else"Polygon"!==u.type&&"MultiPolygon"!==u.type||ye(n,u)&&(r=!0);i++}if(r)return n;var d=p([]);for(i=0;i<e.features.length;i++)d.features=d.features.concat(En(e.features[i]).features);return a(Qn(n,d).geometry.coordinates)}function qr(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}Pr.default=Lr;var Gr=6378137;function Br(t){return q(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Ur(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Ur(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function Ur(t){var e=0;if(t&&t.length>0){e+=Math.abs(Vr(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Vr(t[n]))}return e}function Vr(t){var e,n,r,i,o,s,a=0,u=t.length;if(u>2){for(s=0;s<u;s++)s===u-2?(r=u-2,i=u-1,o=0):s===u-1?(r=u-1,i=0,o=1):(r=s,i=s+1,o=s+2),e=t[r],n=t[i],a+=(Xr(t[o][0])-Xr(e[0]))*Math.sin(Xr(n[1]));a=a*Gr*Gr/2}return a}function Xr(t){return t*Math.PI/180}function Yr(t,e){return void 0===e&&(e={}),V(t,(function(t,n){var r=n.geometry.coordinates;return t+_e(r[0],r[1],e)}),0)}function Wr(t,e,n,r){if(!I(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,c=0,f=0;f<i.length&&!(e>=c&&f===i.length-1);f++){if(c>e&&0===o.length){if(!(s=e-c))return o.push(i[f]),h(o);a=_n(i[f],i[f-1])-180,u=vn(i[f],s,a,r),o.push(u.geometry.coordinates)}if(c>=n)return(s=n-c)?(a=_n(i[f],i[f-1])-180,u=vn(i[f],s,a,r),o.push(u.geometry.coordinates),h(o)):(o.push(i[f]),h(o));if(c>=e&&o.push(i[f]),f===i.length-1)return h(o);c+=_e(i[f],i[f+1],r)}if(c<e&&i.length===l)throw new Error("Start position is beyond line");var p=i[i.length-1];return h([p,p])}function Hr(t,e,n){void 0===n&&(n={});for(var r=K(t),i=J(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),Qr(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Qr(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],c=e[1],h=l-a,f=c-u,p=(n[0]-a)*f-(n[1]-u)*h;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=c:c<=s&&s<u:"end"===r?Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<c:c<s&&s<=u:"both"===r&&(Math.abs(h)>=Math.abs(f)?h>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<c:c<s&&s<u):Math.abs(h)>=Math.abs(f)?h>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=c:c<=s&&s<=u}function $r(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Jr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Hr(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return ye(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Jr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Hr(t.coordinates[r],e))return!1;n||(n=Hr(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=ye(t.coordinates[1],e))){n=!1;break}r=ye(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Hr(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!Kr($(e),$(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!ye(t.coordinates[r],e))return!1;n||(n=ye(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=ye(Zr(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=$(t);if(!Kr($(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!ye(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Kr(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Jr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Zr(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function ti(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],u=t[3],l=e/_e([i,o],[s,o],n)*(s-i),c=e/_e([i,o],[i,u],n)*(u-o),h=s-i,f=u-o,d=Math.floor(h/l),g=(f-Math.floor(f/c)*c)/2,y=i+(h-d*l)/2;y<=s;){for(var v=o+g;v<=u;){var m=a([y,v],n.properties);n.mask?$r(m,n.mask)&&r.push(m):r.push(m),v+=c}y+=l}return p(r)}function ei(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return R(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function ni(t){if(!t)throw new Error("geojson is required");var e=[];return G(t,(function(t){e.push(t)})),p(e)}function ri(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var s=[],a=0;a<r.length;a++)for(var u=0;u<r[a].length-1;u++)s.push(g(a,u));var l=St();l.load(s)}for(var c=0;c<r.length;c++)for(var h=0;h<r[c].length-1;h++)if(n)l.search(g(c,h)).forEach((function(t){var e=t.ring,n=t.edge;d(c,h,e,n)}));else for(var f=0;f<r.length;f++)for(var p=0;p<r[f].length-1;p++)d(c,h,f,p);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,n,s,a){var u,l,c=r[t][n],h=r[t][n+1],f=r[s][a],p=r[s][a+1],d=function(t,e,n,r){if(ii(t,n)||ii(t,r)||ii(e,n)||ii(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],c=r[0],h=r[1],f=(i-s)*(l-h)-(o-a)*(u-c);return 0===f?null:[((i*a-o*s)*(u-c)-(i-s)*(u*h-l*c))/f,((i*a-o*s)*(l-h)-(o-a)*(u*h-l*c))/f]}(c,h,f,p);if(null!==d&&(u=h[0]!==c[0]?(d[0]-c[0])/(h[0]-c[0]):(d[1]-c[1])/(h[1]-c[1]),l=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||l>=1||l<=0))){var g=d,y=!o[g];y&&(o[g]=!0),e?i.push(e(d,t,n,c,h,u,s,a,f,p,l,y)):i.push(d)}}function g(t,e){var n,i,o,s,a=r[t][e],u=r[t][e+1];return a[0]<u[0]?(n=a[0],i=u[0]):(n=u[0],i=a[0]),a[1]<u[1]?(o=a[1],s=u[1]):(o=u[1],s=a[1]),{minX:n,minY:o,maxX:i,maxY:s,ring:t,edge:e}}}function ii(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ii(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function oi(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];ci(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,s=ri(t,(function(t,e,n,r,i,o,s,a,u,l,c,h){return[t,e,n,r,i,o,s,a,u,l,c,h]})),a=s.length;if(0==a){var u=[];for(r=0;r<e;r++)u.push(l([t.geometry.coordinates[r]],{parent:-1,winding:li(t.geometry.coordinates[r])}));var c=p(u);return z(),j(),c}var h=[],f=[];for(r=0;r<e;r++){h.push([]);for(var d=0;d<t.geometry.coordinates[r].length-1;d++)h[r].push([new si(t.geometry.coordinates[r][hi(d+1,t.geometry.coordinates[r].length-1)],1,[r,d],[r,hi(d+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new ai(t.geometry.coordinates[r][d],[r,hi(d-1,t.geometry.coordinates[r].length-1)],[r,d],void 0,void 0,!1,!0))}for(r=0;r<a;r++)h[s[r][1]][s[r][2]].push(new si(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&f.push(new ai(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var g=f.length;for(r=0;r<h.length;r++)for(d=0;d<h[r].length;d++)h[r][d].sort((function(t,e){return t.param<e.param?-1:1}));var y=[];for(r=0;r<g;r++)y.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var v=St();for(v.load(y),r=0;r<h.length;r++)for(d=0;d<h[r].length;d++)for(var m=0;m<h[r][d].length;m++){x=m==h[r][d].length-1?h[r][hi(d+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][d][m+1].coord;var _=v.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0];h[r][d][m].nxtIsectAlongEdgeIn=_.index}for(r=0;r<h.length;r++)for(d=0;d<h[r].length;d++)for(m=0;m<h[r][d].length;m++){var x=h[r][d][m].coord,b=(_=v.search({minX:x[0],minY:x[1],maxX:x[0],maxY:x[1]})[0]).index;b<o?f[b].nxtIsectAlongRingAndEdge2=h[r][d][m].nxtIsectAlongEdgeIn:ci(f[b].ringAndEdge1,h[r][d][m].ringAndEdgeIn)?f[b].nxtIsectAlongRingAndEdge1=h[r][d][m].nxtIsectAlongEdgeIn:f[b].nxtIsectAlongRingAndEdge2=h[r][d][m].nxtIsectAlongEdgeIn}var E=[];for(r=0,d=0;d<e;d++){var w=r;for(m=0;m<t.geometry.coordinates[d].length-1;m++)f[r].coord[0]<f[w].coord[0]&&(w=r),r++;var M=f[w].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==w||f[m].nxtIsectAlongRingAndEdge2==w){var S=m;break}var C=ui([f[S].coord,f[w].coord,f[M].coord],!0)?1:-1;E.push({isect:w,parent:-1,winding:C})}for(E.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1})),u=[];E.length>0;){var N=E.pop(),I=N.isect,P=N.parent,L=N.winding,O=u.length,R=[f[I].coord],k=I;if(f[I].ringAndEdge1Walkable)var T=f[I].ringAndEdge1,A=f[I].nxtIsectAlongRingAndEdge1;else T=f[I].ringAndEdge2,A=f[I].nxtIsectAlongRingAndEdge2;for(;!ci(f[I].coord,f[A].coord);){R.push(f[A].coord);var D=void 0;for(r=0;r<E.length;r++)if(E[r].isect==A){D=r;break}if(null!=D&&E.splice(D,1),ci(T,f[A].ringAndEdge1)){if(T=f[A].ringAndEdge2,f[A].ringAndEdge2Walkable=!1,f[A].ringAndEdge1Walkable){var F={isect:A};ui([f[k].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge2].coord],1==L)?(F.parent=P,F.winding=-L):(F.parent=O,F.winding=L),E.push(F)}k=A,A=f[A].nxtIsectAlongRingAndEdge2}else T=f[A].ringAndEdge1,f[A].ringAndEdge1Walkable=!1,f[A].ringAndEdge2Walkable&&(F={isect:A},ui([f[k].coord,f[A].coord,f[f[A].nxtIsectAlongRingAndEdge1].coord],1==L)?(F.parent=P,F.winding=-L):(F.parent=O,F.winding=L),E.push(F)),k=A,A=f[A].nxtIsectAlongRingAndEdge1}R.push(f[A].coord),u.push(l([R],{index:O,parent:P,winding:L,netWinding:void 0}))}function z(){for(var t=[],e=0;e<c.features.length;e++)-1==c.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<c.features.length;r++)t[e]!=r&&ye(c.features[t[e]].geometry.coordinates[0][0],c.features[r],{ignoreBoundary:!0})&&Br(c.features[r])<1/0&&(n=r);c.features[t[e]].properties.parent=n}}function j(){for(var t=0;t<c.features.length;t++)if(-1==c.features[t].properties.parent){var e=c.features[t].properties.winding;c.features[t].properties.netWinding=e,q(t,e)}}function q(t,e){for(var n=0;n<c.features.length;n++)if(c.features[n].properties.parent==t){var r=e+c.features[n].properties.winding;c.features[n].properties.netWinding=r,q(n,r)}}return c=p(u),z(),j(),c}var si=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},ai=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function ui(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function li(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(ui([t[hi(e-1,t.length-1)],t[e],t[hi(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function ci(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ci(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function hi(t,e){return(t%e+e)%e}var fi=Math.PI/180,pi=180/Math.PI,di=function(t,e){this.lon=t,this.lat=e,this.x=fi*t,this.y=fi*e};di.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},di.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new di(e,t)};var gi=function(){this.coords=[],this.length=0};gi.prototype.move_to=function(t){this.length++,this.coords.push(t)};var yi=function(t){this.properties=t||{},this.geometries=[]};yi.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},yi.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var vi=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new di(t.x,t.y),this.end=new di(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function mi(t,e){var n=[],r=Pr();return G(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=xi(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),D(_i(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=_i(t,e).features).forEach((function(t){t.bbox||(t.bbox=yn($(t)))})),r.load(p(n))})),p(n)}function _i(t,e){var n=[],r=J(t)[0],i=J(t)[t.geometry.coordinates.length-1];if(bi(r,K(e))||bi(i,K(e)))return p([t]);var o=Pr(),s=$n(t);o.load(s);var a=o.search(e);if(!a.features.length)return p([t]);var u=xi(e,a),l=F(s,(function(t,r,i){var o=J(r)[1],s=K(e);return i===u.id?(t.push(s),n.push(h(t)),bi(s,o)?[s]:[s,o]):(t.push(o),t)}),[r]);return l.length>1&&n.push(h(l)),p(n)}function xi(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return D(e,(function(e){var i=kr(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function bi(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ei(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,s=wi(n),a=wi(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return h(mn(t,e,i).geometry.coordinates[0],u);for(var l=s,c=s<a?a:a+360,f=l,p=[],d=0;f<c;)p.push(vn(t,e,f,i).geometry.coordinates),f=l+360*++d/o;return f>c&&p.push(vn(t,e,c,i).geometry.coordinates),h(p,u)}function wi(t){var e=t%360;return e<0&&(e+=360),e}function Mi(t,e){void 0===e&&(e={});var n=rt(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Si(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=rt(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(Ci(t,r))})),p(i)}(n,e);default:throw new Error("invalid poly")}}function Si(t,e){return void 0===e&&(e={}),Ci(rt(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function Ci(t,e){return t.length>1?d(t,e):h(t[0],e)}function Ni(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,s=null===(n=e.autoComplete)||void 0===n||n,a=null===(r=e.orderCoords)||void 0===r||r;if("FeatureCollection"===(null!==(i=e.mutate)&&void 0!==i&&i||(t=Me(t)),t.type)){var u=[];return t.features.forEach((function(t){u.push(J(Ii(t,{},s,a)))})),y(u,o)}return Ii(t,o,s,a)}function Ii(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=rt(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=Pi(o)),l([o],e);case"MultiLineString":var a=[],u=0;return o.forEach((function(t){if(n&&(t=Pi(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}($(h(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)})),l(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function Pi(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Li(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Ri(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Ri(a=t[s],e)&r))!==o&&n.push(Oi(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function Oi(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Ri(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function ki(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=Li(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}vi.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=pi*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[pi*Math.atan2(i,r),s]},vi.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,c=180-l,h=-180+l,f=360-l,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],y=Math.abs(g-d);y>f&&(g>c&&d<h||d>c&&g<h)?a=!0:y>u&&(u=y)}var v=[];if(a&&u<l){var m=[];v.push(m);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>f){var b=parseFloat(n[_-1][0]),E=parseFloat(n[_-1][1]),w=parseFloat(n[_][0]),M=parseFloat(n[_][1]);if(b>-180&&b<h&&180===w&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(b>c&&b<180&&-180===w&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(b<h&&w>c){var S=b;b=w,w=S;var C=E;E=M,M=C}if(b>c&&w<h&&(w+=360),b<=180&&w>=180&&b<w){var N=(180-b)/(w-b),I=N*M+(1-N)*E;m.push([n[_-1][0]>c?180:-180,I]),(m=[]).push([n[_-1][0]>c?-180:180,I]),v.push(m)}else m=[],v.push(m);m.push([x,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var P=[];v.push(P);for(var L=0;L<n.length;++L)P.push([n[L][0],n[L][1]])}for(var O=new yi(this.properties),R=0;R<v.length;++R){var k=new gi;O.geometries.push(k);for(var T=v[R],A=0;A<T.length;++A)k.move_to(T[A])}return O};var Ti=qt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),Ai=qt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),Di=qt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(Ai(t))return!!Ai(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var l=Ti(t),c=Ti(o)}catch(t){return!1}if(l.length!=c.length)return!1;for(l.sort(),c.sort(),a=l.length-1;a>=0;a--)if(l[a]!=c[a])return!1;for(a=l.length-1;a>=0;a--)if(u=l[a],!n(t[u],o[u],s))return!1;return typeof t==typeof o}(t,o,s))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}}));function Fi(t,e,n){if(void 0===n&&(n={}),!I(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],s=Pr(),a=$n(t);return s.load(a),U(e,(function(t){var e=!1;t&&(D(s.search(t),(function(n){if(!1===e){var o=J(t).sort(),s=J(n).sort();Di(o,s)||(0===i?Hr(o[0],n)&&Hr(o[1],n):kr(n,o[0]).properties.dist<=i&&kr(n,o[1]).properties.dist<=i)?(e=!0,r=r?zi(r,t):t):(0===i?Hr(s[0],t)&&Hr(s[1],t):kr(t,s[0]).properties.dist<=i&&kr(t,s[1]).properties.dist<=i)&&(r=r?zi(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0))})),r&&o.push(r),p(o)}function zi(t,e){var n=J(e),r=J(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return Di(n[0],i)?s.unshift(n[1]):Di(n[0],o)?s.push(n[1]):Di(n[1],i)?s.unshift(n[0]):Di(n[1],o)&&s.push(n[0]),t}function ji(t){var e=t%360;return e<0&&(e+=360),e}function qi(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?Gi(K(e),K(t)):Gi(K(t),K(e)))>180?-(360-r):r}function Gi(t,e){var n=M(t[1]),r=M(e[1]),i=M(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(w(Math.atan2(i,o))+360)%360}function Bi(t,n,r,i){void 0===i&&(i={});var o=n<0,s=S(Math.abs(n),i.units,"meters");o&&(s=-Math.abs(s));var u=K(t),l=function(t,n,r,i){var o=n/(i=void 0===i?e:Number(i)),s=t[0]*Math.PI/180,a=M(t[1]),u=M(r),l=o*Math.cos(u),c=a+l;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var h=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(h)>1e-11?l/h:Math.cos(a);return[(180*(s+o*Math.sin(u)/f)/Math.PI+540)%360-180,180*c/Math.PI]}(u,s,r);return l[0]+=l[0]-u[0]>180?-360:u[0]-l[0]>180?360:0,a(l,i.properties)}function Ui(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=Xi(a,u,e),n<=0&&r>0?Xi(e,a,i)<0||(i=a):n>0&&r<=0&&(Vi(e,a,o)||(o=a)),n=r}return[i,o]}function Vi(t,e,n){return Xi(t,e,n)>0}function Xi(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Yi(t){for(var e,n,r=J(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function Wi(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return j(t,(function(t){Wi(t,e)})),t;case"LineString":return Hi(J(t),e),t;case"Polygon":return Qi(J(t),e),t;case"MultiLineString":return J(t).forEach((function(t){Hi(t,e)})),t;case"MultiPolygon":return J(t).forEach((function(t){Qi(t,e)})),t;case"Point":case"MultiPoint":return t}}function Hi(t,e){Yi(t)===e&&t.reverse()}function Qi(t,e){Yi(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Yi(t[n])===e&&t[n].reverse()}function $i(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;nt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=J(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return J(t)[0]-J(e)[0]}))})).sort((function(t,n){return e?J(t[0])[1]-J(n[0])[1]:J(n[0])[1]-J(t[0])[1]}))}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],c=0;c<u.length;c++){var h=u[c];h.properties[n]?l.push(h.properties[n]):l.push(0),!0===i&&(h.properties.matrixPosition=[a,c])}s.push(l)}return s}var Ki={successCallback:null,verbose:!1,polygons:!1},Ji={};function Zi(t,e,n,r){r=r||{};for(var i=Object.keys(Ki),o=0;o<i.length;o++){var s=i[o],a=r[s];a=null!=a?a:Ki[s],Ji[s]=a}Ji.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,l=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var l=0,c=t[a+1][u],h=t[a+1][u+1],f=t[a][u+1],p=t[a][u];if(!(isNaN(c)||isNaN(h)||isNaN(f)||isNaN(p))){l|=c<e?0:c>s?128:64,l|=h<e?0:h>s?32:16,l|=f<e?0:f>s?8:4;var d=+(l|=p<e?0:p>s?2:1),g=0;if(17===l||18===l||33===l||34===l||38===l||68===l||72===l||98===l||102===l||132===l||136===l||137===l||152===l||153===l){var y=(c+h+f+p)/4;g=y>s?2:y<e?0:1,34===l?1===g?l=35:0===g&&(l=136):136===l?1===g?(l=35,g=4):0===g&&(l=34):17===l?1===g?(l=155,g=4):0===g&&(l=153):68===l?1===g?(l=103,g=4):0===g&&(l=102):153===l?1===g&&(l=155):102===l?1===g&&(l=103):152===l?g<2&&(l=156,g=1):137===l?g<2&&(l=139,g=1):98===l?g<2&&(l=99,g=1):38===l?g<2&&(l=39,g=1):18===l?g>0?(l=156,g=4):l=152:33===l?g>0?(l=139,g=4):l=137:72===l?g>0?(l=99,g=4):l=98:132===l&&(g>0?(l=39,g=4):l=38)}if(0!=l&&170!=l){var v,m,_,x,b,E,w,M;v=m=_=x=b=E=w=M=.5;var S=[];1===l?(_=1-Vo(e,f,p),M=1-Vo(e,c,p),S.push(zo[l])):169===l?(_=Vo(s,p,f),M=Vo(s,p,c),S.push(zo[l])):4===l?(E=1-Vo(e,h,f),x=Vo(e,p,f),S.push(Do[l])):166===l?(E=Vo(s,f,h),x=1-Vo(s,f,p),S.push(Do[l])):16===l?(b=Vo(e,f,h),m=Vo(e,c,h),S.push(Ao[l])):154===l?(b=1-Vo(s,h,f),m=1-Vo(s,h,c),S.push(Ao[l])):64===l?(w=Vo(e,p,c),v=1-Vo(e,h,c),S.push(qo[l])):106===l?(w=1-Vo(s,c,p),v=Vo(s,c,h),S.push(qo[l])):168===l?(x=Vo(s,p,f),_=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),S.push(Fo[l]),S.push(zo[l])):2===l?(x=1-Vo(e,f,p),_=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),S.push(Fo[l]),S.push(zo[l])):162===l?(b=Vo(s,f,h),E=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),S.push(Fo[l]),S.push(zo[l])):8===l?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),S.push(Ao[l]),S.push(Do[l])):138===l?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),v=1-Vo(s,h,c),m=1-Vo(e,h,c),S.push(Ao[l]),S.push(Do[l])):32===l?(b=Vo(s,f,h),E=Vo(e,f,h),v=Vo(e,c,h),m=Vo(s,c,h),S.push(Ao[l]),S.push(Do[l])):42===l?(M=1-Vo(s,c,p),w=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h),S.push(jo[l]),S.push(qo[l])):128===l&&(M=Vo(e,p,c),w=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c),S.push(jo[l]),S.push(qo[l])),5===l?(E=1-Vo(e,h,f),M=1-Vo(e,c,p),S.push(Do[l])):165===l?(E=Vo(s,f,h),M=Vo(s,p,c),S.push(Do[l])):20===l?(x=Vo(e,p,f),m=Vo(e,c,h),S.push(Fo[l])):150===l?(x=1-Vo(s,f,p),m=1-Vo(s,h,c),S.push(Fo[l])):80===l?(b=Vo(e,f,h),w=Vo(e,p,c),S.push(Ao[l])):90===l?(b=1-Vo(s,h,f),w=1-Vo(s,c,p),S.push(Ao[l])):65===l?(_=1-Vo(e,f,p),v=1-Vo(e,h,c),S.push(zo[l])):105===l?(_=Vo(s,p,f),v=Vo(s,c,h),S.push(zo[l])):160===l?(b=Vo(s,f,h),E=Vo(e,f,h),M=Vo(e,p,c),w=Vo(s,p,c),S.push(Ao[l]),S.push(Do[l])):10===l?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),M=1-Vo(s,c,p),w=1-Vo(e,c,p),S.push(Ao[l]),S.push(Do[l])):130===l?(x=1-Vo(e,f,p),_=1-Vo(s,f,p),v=1-Vo(s,h,c),m=1-Vo(e,h,c),S.push(Fo[l]),S.push(zo[l])):40===l?(x=Vo(s,p,f),_=Vo(e,p,f),v=Vo(e,c,h),m=Vo(s,c,h),S.push(Fo[l]),S.push(zo[l])):101===l?(E=Vo(s,f,h),v=Vo(s,c,h),S.push(Do[l])):69===l?(E=1-Vo(e,h,f),v=1-Vo(e,h,c),S.push(Do[l])):149===l?(M=Vo(s,p,c),m=1-Vo(s,h,c),S.push(jo[l])):21===l?(M=1-Vo(e,c,p),m=Vo(e,c,h),S.push(jo[l])):86===l?(x=1-Vo(s,f,p),w=1-Vo(s,c,p),S.push(Fo[l])):84===l?(x=Vo(e,p,f),w=Vo(e,p,c),S.push(Fo[l])):89===l?(b=1-Vo(s,h,f),_=Vo(s,p,f),S.push(zo[l])):81===l?(b=Vo(e,f,h),_=1-Vo(e,f,p),S.push(zo[l])):96===l?(b=Vo(s,f,h),E=Vo(e,f,h),w=Vo(e,p,c),v=Vo(s,c,h),S.push(Ao[l]),S.push(Do[l])):74===l?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),w=1-Vo(s,c,p),v=1-Vo(e,h,c),S.push(Ao[l]),S.push(Do[l])):24===l?(b=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),m=Vo(e,c,h),S.push(Ao[l]),S.push(zo[l])):146===l?(b=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),m=1-Vo(s,h,c),S.push(Ao[l]),S.push(zo[l])):6===l?(E=1-Vo(e,h,f),x=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),S.push(Do[l]),S.push(Fo[l])):164===l?(E=Vo(s,f,h),x=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),S.push(Do[l]),S.push(Fo[l])):129===l?(_=1-Vo(e,f,p),M=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c),S.push(zo[l]),S.push(jo[l])):41===l?(_=Vo(s,p,f),M=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h),S.push(zo[l]),S.push(jo[l])):66===l?(x=1-Vo(e,f,p),_=1-Vo(s,f,p),w=1-Vo(s,c,p),v=1-Vo(e,h,c),S.push(Fo[l]),S.push(zo[l])):104===l?(x=Vo(s,p,f),_=Vo(e,p,f),w=Vo(e,p,c),v=Vo(s,c,h),S.push(zo[l]),S.push(Go[l])):144===l?(b=Vo(e,f,h),M=Vo(e,p,c),w=Vo(s,p,c),m=1-Vo(s,h,c),S.push(Ao[l]),S.push(qo[l])):26===l?(b=1-Vo(s,h,f),M=1-Vo(s,c,p),w=1-Vo(e,c,p),m=Vo(e,c,h),S.push(Ao[l]),S.push(qo[l])):36===l?(E=Vo(s,f,h),x=Vo(e,p,f),v=Vo(e,c,h),m=Vo(s,c,h),S.push(Do[l]),S.push(Fo[l])):134===l?(E=1-Vo(e,h,f),x=1-Vo(s,f,p),v=1-Vo(s,h,c),m=1-Vo(e,h,c),S.push(Do[l]),S.push(Fo[l])):9===l?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),M=1-Vo(e,c,p),S.push(Ao[l]),S.push(Do[l])):161===l?(b=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),M=Vo(s,p,c),S.push(Ao[l]),S.push(Do[l])):37===l?(E=Vo(s,f,h),M=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h),S.push(Do[l]),S.push(jo[l])):133===l?(E=1-Vo(e,h,f),M=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c),S.push(Do[l]),S.push(jo[l])):148===l?(x=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),m=1-Vo(s,h,c),S.push(Fo[l]),S.push(qo[l])):22===l?(x=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),m=Vo(e,c,h),S.push(Fo[l]),S.push(qo[l])):82===l?(b=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),w=1-Vo(s,c,p),S.push(Ao[l]),S.push(zo[l])):88===l?(b=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),w=Vo(e,p,c),S.push(Ao[l]),S.push(zo[l])):73===l?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),v=1-Vo(e,h,c),S.push(Ao[l]),S.push(Do[l])):97===l?(b=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),v=Vo(s,c,h),S.push(Ao[l]),S.push(Do[l])):145===l?(b=Vo(e,f,h),_=1-Vo(e,f,p),M=Vo(s,p,c),m=1-Vo(s,h,c),S.push(Ao[l]),S.push(jo[l])):25===l?(b=1-Vo(s,h,f),_=Vo(s,p,f),M=1-Vo(e,c,p),m=Vo(e,c,h),S.push(Ao[l]),S.push(jo[l])):70===l?(E=1-Vo(e,h,f),x=1-Vo(s,f,p),w=1-Vo(s,c,p),v=1-Vo(e,h,c),S.push(Do[l]),S.push(Fo[l])):100===l?(E=Vo(s,f,h),x=Vo(e,p,f),w=Vo(e,p,c),v=Vo(s,c,h),S.push(Do[l]),S.push(Fo[l])):34===l?(0===g?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c)):(b=Vo(s,f,h),E=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h)),S.push(Ao[l]),S.push(Do[l]),S.push(jo[l]),S.push(qo[l])):35===l?(4===g?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c)):(b=Vo(s,f,h),E=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h)),S.push(Ao[l]),S.push(Do[l]),S.push(zo[l]),S.push(qo[l])):136===l?(0===g?(b=Vo(s,f,h),E=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h)):(b=1-Vo(e,h,f),E=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c)),S.push(Ao[l]),S.push(Do[l]),S.push(jo[l]),S.push(qo[l])):153===l?(0===g?(b=Vo(e,f,h),_=1-Vo(e,f,p),M=1-Vo(e,c,p),m=Vo(e,c,h)):(b=1-Vo(s,h,f),_=Vo(s,p,f),M=Vo(s,p,c),m=1-Vo(s,h,c)),S.push(Ao[l]),S.push(zo[l])):102===l?(0===g?(E=1-Vo(e,h,f),x=Vo(e,p,f),w=Vo(e,p,c),v=1-Vo(e,h,c)):(E=Vo(s,f,h),x=1-Vo(s,f,p),w=1-Vo(s,c,p),v=Vo(s,c,h)),S.push(Do[l]),S.push(qo[l])):155===l?(4===g?(b=Vo(e,f,h),_=1-Vo(e,f,p),M=1-Vo(e,c,p),m=Vo(e,c,h)):(b=1-Vo(s,h,f),_=Vo(s,p,f),M=Vo(s,p,c),m=1-Vo(s,h,c)),S.push(Ao[l]),S.push(jo[l])):103===l?(4===g?(E=1-Vo(e,h,f),x=Vo(e,p,f),w=Vo(e,p,c),v=1-Vo(e,h,c)):(E=Vo(s,f,h),x=1-Vo(s,f,p),w=1-Vo(s,c,p),v=Vo(s,c,h)),S.push(Do[l]),S.push(Fo[l])):152===l?(0===g?(b=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),m=Vo(e,c,h)):(b=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),m=1-Vo(s,h,c)),S.push(Ao[l]),S.push(Fo[l]),S.push(zo[l])):156===l?(4===g?(b=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),m=Vo(e,c,h)):(b=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),m=1-Vo(s,h,c)),S.push(Ao[l]),S.push(zo[l]),S.push(qo[l])):137===l?(0===g?(b=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),M=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h)):(b=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),M=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c)),S.push(Ao[l]),S.push(Do[l]),S.push(zo[l])):139===l?(4===g?(b=Vo(s,f,h),E=Vo(e,f,h),_=1-Vo(e,f,p),M=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h)):(b=1-Vo(e,h,f),E=1-Vo(s,h,f),_=Vo(s,p,f),M=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c)),S.push(Ao[l]),S.push(Do[l]),S.push(jo[l])):98===l?(0===g?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),w=Vo(e,p,c),v=1-Vo(e,h,c)):(b=Vo(s,f,h),E=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),w=1-Vo(s,c,p),v=Vo(s,c,h)),S.push(Ao[l]),S.push(Do[l]),S.push(qo[l])):99===l?(4===g?(b=1-Vo(e,h,f),E=1-Vo(s,h,f),x=Vo(s,p,f),_=Vo(e,p,f),w=Vo(e,p,c),v=1-Vo(e,h,c)):(b=Vo(s,f,h),E=Vo(e,f,h),x=1-Vo(e,f,p),_=1-Vo(s,f,p),w=1-Vo(s,c,p),v=Vo(s,c,h)),S.push(Ao[l]),S.push(Do[l]),S.push(zo[l])):38===l?(0===g?(E=1-Vo(e,h,f),x=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c)):(E=Vo(s,f,h),x=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h)),S.push(Do[l]),S.push(jo[l]),S.push(qo[l])):39===l?(4===g?(E=1-Vo(e,h,f),x=Vo(e,p,f),M=Vo(e,p,c),w=Vo(s,p,c),v=1-Vo(s,h,c),m=1-Vo(e,h,c)):(E=Vo(s,f,h),x=1-Vo(s,f,p),M=1-Vo(s,c,p),w=1-Vo(e,c,p),v=Vo(e,c,h),m=Vo(s,c,h)),S.push(Do[l]),S.push(Fo[l]),S.push(qo[l])):85===l&&(b=1,E=0,x=1,_=0,M=0,w=1,v=0,m=1),(v<0||v>1||m<0||m>1||b<0||b>1||x<0||x>1||M<0||M>1||w<0||w>1)&&console.log("MarchingSquaresJS-isoBands: "+l+" "+d+" "+c+","+h+","+f+","+p+" "+g+" "+v+" "+m+" "+b+" "+E+" "+x+" "+_+" "+M+" "+w),o.cells[a][u]={cval:l,cval_real:d,flipped:g,topleft:v,topright:m,righttop:b,rightbottom:E,bottomright:x,bottomleft:_,leftbottom:M,lefttop:w,edges:S}}}}}return o}(t,e,n);return Ji.polygons?(Ji.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=Uo[t.cval](t);"object"==typeof o&&Xo(o)?"object"==typeof o[0]&&Xo(o[0])?"object"==typeof o[0][0]&&Xo(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(l)):(Ji.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if(void 0!==t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=Wo(t.cells[o][s]),u=null,l=s,c=o;null!==a&&i.push([a.p[0]+l,a.p[1]+c]);do{if(null===(u=Ho(t.cells[c][l],a.x,a.y,a.o)))break;if(i.push([u.p[0]+l,u.p[1]+c]),l+=u.x,a=u,(c+=u.y)<0||c>=n||l<0||l>=r||void 0===t.cells[c][l]){var h=Yo(t,l-=u.x,c-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach((function(t){i.push(t)})),l=h.i,c=h.j,a=h}}while(void 0!==t.cells[c][l]&&t.cells[c][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}(l)),"function"==typeof Ji.successCallback&&Ji.successCallback(u),u}var to=64,eo=16,no=[],ro=[],io=[],oo=[],so=[],ao=[],uo=[],lo=[],co=[],ho=[],fo=[],po=[],go=[],yo=[],vo=[],mo=[],_o=[],xo=[],bo=[],Eo=[],wo=[],Mo=[],So=[],Co=[];uo[85]=ho[85]=-1,lo[85]=fo[85]=0,co[85]=po[85]=1,bo[85]=Mo[85]=1,Eo[85]=So[85]=0,wo[85]=Co[85]=1,no[85]=oo[85]=0,ro[85]=so[85]=-1,io[85]=vo[85]=0,mo[85]=go[85]=0,_o[85]=yo[85]=1,ao[85]=xo[85]=1,Mo[1]=Mo[169]=0,So[1]=So[169]=-1,Co[1]=Co[169]=0,go[1]=go[169]=-1,yo[1]=yo[169]=0,vo[1]=vo[169]=0,ho[4]=ho[166]=0,fo[4]=fo[166]=-1,po[4]=po[166]=1,mo[4]=mo[166]=1,_o[4]=_o[166]=0,xo[4]=xo[166]=0,uo[16]=uo[154]=0,lo[16]=lo[154]=1,co[16]=co[154]=1,oo[16]=oo[154]=1,so[16]=so[154]=0,ao[16]=ao[154]=1,bo[64]=bo[106]=0,Eo[64]=Eo[106]=1,wo[64]=wo[106]=0,no[64]=no[106]=-1,ro[64]=ro[106]=0,io[64]=io[106]=1,bo[2]=bo[168]=0,Eo[2]=Eo[168]=-1,wo[2]=wo[168]=1,Mo[2]=Mo[168]=0,So[2]=So[168]=-1,Co[2]=Co[168]=0,go[2]=go[168]=-1,yo[2]=yo[168]=0,vo[2]=vo[168]=0,mo[2]=mo[168]=-1,_o[2]=_o[168]=0,xo[2]=xo[168]=1,uo[8]=uo[162]=0,lo[8]=lo[162]=-1,co[8]=co[162]=0,ho[8]=ho[162]=0,fo[8]=fo[162]=-1,po[8]=po[162]=1,go[8]=go[162]=1,yo[8]=yo[162]=0,vo[8]=vo[162]=1,mo[8]=mo[162]=1,_o[8]=_o[162]=0,xo[8]=xo[162]=0,uo[32]=uo[138]=0,lo[32]=lo[138]=1,co[32]=co[138]=1,ho[32]=ho[138]=0,fo[32]=fo[138]=1,po[32]=po[138]=0,no[32]=no[138]=1,ro[32]=ro[138]=0,io[32]=io[138]=0,oo[32]=oo[138]=1,so[32]=so[138]=0,ao[32]=ao[138]=1,Mo[128]=Mo[42]=0,So[128]=So[42]=1,Co[128]=Co[42]=1,bo[128]=bo[42]=0,Eo[128]=Eo[42]=1,wo[128]=wo[42]=0,no[128]=no[42]=-1,ro[128]=ro[42]=0,io[128]=io[42]=1,oo[128]=oo[42]=-1,so[128]=so[42]=0,ao[128]=ao[42]=0,ho[5]=ho[165]=-1,fo[5]=fo[165]=0,po[5]=po[165]=0,Mo[5]=Mo[165]=1,So[5]=So[165]=0,Co[5]=Co[165]=0,mo[20]=mo[150]=0,_o[20]=_o[150]=1,xo[20]=xo[150]=1,oo[20]=oo[150]=0,so[20]=so[150]=-1,ao[20]=ao[150]=1,uo[80]=uo[90]=-1,lo[80]=lo[90]=0,co[80]=co[90]=1,bo[80]=bo[90]=1,Eo[80]=Eo[90]=0,wo[80]=wo[90]=1,go[65]=go[105]=0,yo[65]=yo[105]=1,vo[65]=vo[105]=0,no[65]=no[105]=0,ro[65]=ro[105]=-1,io[65]=io[105]=0,uo[160]=uo[10]=-1,lo[160]=lo[10]=0,co[160]=co[10]=1,ho[160]=ho[10]=-1,fo[160]=fo[10]=0,po[160]=po[10]=0,Mo[160]=Mo[10]=1,So[160]=So[10]=0,Co[160]=Co[10]=0,bo[160]=bo[10]=1,Eo[160]=Eo[10]=0,wo[160]=wo[10]=1,mo[130]=mo[40]=0,_o[130]=_o[40]=1,xo[130]=xo[40]=1,go[130]=go[40]=0,yo[130]=yo[40]=1,vo[130]=vo[40]=0,no[130]=no[40]=0,ro[130]=ro[40]=-1,io[130]=io[40]=0,oo[130]=oo[40]=0,so[130]=so[40]=-1,ao[130]=ao[40]=1,ho[37]=ho[133]=0,fo[37]=fo[133]=1,po[37]=po[133]=1,Mo[37]=Mo[133]=0,So[37]=So[133]=1,Co[37]=Co[133]=0,no[37]=no[133]=-1,ro[37]=ro[133]=0,io[37]=io[133]=0,oo[37]=oo[133]=1,so[37]=so[133]=0,ao[37]=ao[133]=0,mo[148]=mo[22]=-1,_o[148]=_o[22]=0,xo[148]=xo[22]=0,Mo[148]=Mo[22]=0,So[148]=So[22]=-1,Co[148]=Co[22]=1,bo[148]=bo[22]=0,Eo[148]=Eo[22]=1,wo[148]=wo[22]=1,oo[148]=oo[22]=-1,so[148]=so[22]=0,ao[148]=ao[22]=1,uo[82]=uo[88]=0,lo[82]=lo[88]=-1,co[82]=co[88]=1,mo[82]=mo[88]=1,_o[82]=_o[88]=0,xo[82]=xo[88]=1,go[82]=go[88]=-1,yo[82]=yo[88]=0,vo[82]=vo[88]=1,bo[82]=bo[88]=0,Eo[82]=Eo[88]=-1,wo[82]=wo[88]=0,uo[73]=uo[97]=0,lo[73]=lo[97]=1,co[73]=co[97]=0,ho[73]=ho[97]=0,fo[73]=fo[97]=-1,po[73]=po[97]=0,go[73]=go[97]=1,yo[73]=yo[97]=0,vo[73]=vo[97]=0,no[73]=no[97]=1,ro[73]=ro[97]=0,io[73]=io[97]=1,uo[145]=uo[25]=0,lo[145]=lo[25]=-1,co[145]=co[25]=0,go[145]=go[25]=1,yo[145]=yo[25]=0,vo[145]=vo[25]=1,Mo[145]=Mo[25]=0,So[145]=So[25]=1,Co[145]=Co[25]=1,oo[145]=oo[25]=-1,so[145]=so[25]=0,ao[145]=ao[25]=0,ho[70]=ho[100]=0,fo[70]=fo[100]=1,po[70]=po[100]=0,mo[70]=mo[100]=-1,_o[70]=_o[100]=0,xo[70]=xo[100]=1,bo[70]=bo[100]=0,Eo[70]=Eo[100]=-1,wo[70]=wo[100]=1,no[70]=no[100]=1,ro[70]=ro[100]=0,io[70]=io[100]=0,ho[101]=ho[69]=0,fo[101]=fo[69]=1,po[101]=po[69]=0,no[101]=no[69]=1,ro[101]=ro[69]=0,io[101]=io[69]=0,Mo[149]=Mo[21]=0,So[149]=So[21]=1,Co[149]=Co[21]=1,oo[149]=oo[21]=-1,so[149]=so[21]=0,ao[149]=ao[21]=0,mo[86]=mo[84]=-1,_o[86]=_o[84]=0,xo[86]=xo[84]=1,bo[86]=bo[84]=0,Eo[86]=Eo[84]=-1,wo[86]=wo[84]=1,uo[89]=uo[81]=0,lo[89]=lo[81]=-1,co[89]=co[81]=0,go[89]=go[81]=1,yo[89]=yo[81]=0,vo[89]=vo[81]=1,uo[96]=uo[74]=0,lo[96]=lo[74]=1,co[96]=co[74]=0,ho[96]=ho[74]=-1,fo[96]=fo[74]=0,po[96]=po[74]=1,bo[96]=bo[74]=1,Eo[96]=Eo[74]=0,wo[96]=wo[74]=0,no[96]=no[74]=1,ro[96]=ro[74]=0,io[96]=io[74]=1,uo[24]=uo[146]=0,lo[24]=lo[146]=-1,co[24]=co[146]=1,mo[24]=mo[146]=1,_o[24]=_o[146]=0,xo[24]=xo[146]=1,go[24]=go[146]=0,yo[24]=yo[146]=1,vo[24]=vo[146]=1,oo[24]=oo[146]=0,so[24]=so[146]=-1,ao[24]=ao[146]=0,ho[6]=ho[164]=-1,fo[6]=fo[164]=0,po[6]=po[164]=1,mo[6]=mo[164]=-1,_o[6]=_o[164]=0,xo[6]=xo[164]=0,Mo[6]=Mo[164]=0,So[6]=So[164]=-1,Co[6]=Co[164]=1,bo[6]=bo[164]=1,Eo[6]=Eo[164]=0,wo[6]=wo[164]=0,go[129]=go[41]=0,yo[129]=yo[41]=1,vo[129]=vo[41]=1,Mo[129]=Mo[41]=0,So[129]=So[41]=1,Co[129]=Co[41]=0,no[129]=no[41]=-1,ro[129]=ro[41]=0,io[129]=io[41]=0,oo[129]=oo[41]=0,so[129]=so[41]=-1,ao[129]=ao[41]=0,mo[66]=mo[104]=0,_o[66]=_o[104]=1,xo[66]=xo[104]=0,go[66]=go[104]=-1,yo[66]=yo[104]=0,vo[66]=vo[104]=1,bo[66]=bo[104]=0,Eo[66]=Eo[104]=-1,wo[66]=wo[104]=0,no[66]=no[104]=0,ro[66]=ro[104]=-1,io[66]=io[104]=1,uo[144]=uo[26]=-1,lo[144]=lo[26]=0,co[144]=co[26]=0,Mo[144]=Mo[26]=1,So[144]=So[26]=0,Co[144]=Co[26]=1,bo[144]=bo[26]=0,Eo[144]=Eo[26]=1,wo[144]=wo[26]=1,oo[144]=oo[26]=-1,so[144]=so[26]=0,ao[144]=ao[26]=1,ho[36]=ho[134]=0,fo[36]=fo[134]=1,po[36]=po[134]=1,mo[36]=mo[134]=0,_o[36]=_o[134]=1,xo[36]=xo[134]=0,no[36]=no[134]=0,ro[36]=ro[134]=-1,io[36]=io[134]=1,oo[36]=oo[134]=1,so[36]=so[134]=0,ao[36]=ao[134]=0,uo[9]=uo[161]=-1,lo[9]=lo[161]=0,co[9]=co[161]=0,ho[9]=ho[161]=0,fo[9]=fo[161]=-1,po[9]=po[161]=0,go[9]=go[161]=1,yo[9]=yo[161]=0,vo[9]=vo[161]=0,Mo[9]=Mo[161]=1,So[9]=So[161]=0,Co[9]=Co[161]=1,uo[136]=0,lo[136]=1,co[136]=1,ho[136]=0,fo[136]=1,po[136]=0,mo[136]=-1,_o[136]=0,xo[136]=1,go[136]=-1,yo[136]=0,vo[136]=0,Mo[136]=0,So[136]=-1,Co[136]=0,bo[136]=0,Eo[136]=-1,wo[136]=1,no[136]=1,ro[136]=0,io[136]=0,oo[136]=1,so[136]=0,ao[136]=1,uo[34]=0,lo[34]=-1,co[34]=0,ho[34]=0,fo[34]=-1,po[34]=1,mo[34]=1,_o[34]=0,xo[34]=0,go[34]=1,yo[34]=0,vo[34]=1,Mo[34]=0,So[34]=1,Co[34]=1,bo[34]=0,Eo[34]=1,wo[34]=0,no[34]=-1,ro[34]=0,io[34]=1,oo[34]=-1,so[34]=0,ao[34]=0,uo[35]=0,lo[35]=1,co[35]=1,ho[35]=0,fo[35]=-1,po[35]=1,mo[35]=1,_o[35]=0,xo[35]=0,go[35]=-1,yo[35]=0,vo[35]=0,Mo[35]=0,So[35]=-1,Co[35]=0,bo[35]=0,Eo[35]=1,wo[35]=0,no[35]=-1,ro[35]=0,io[35]=1,oo[35]=1,so[35]=0,ao[35]=1,uo[153]=0,lo[153]=1,co[153]=1,go[153]=-1,yo[153]=0,vo[153]=0,Mo[153]=0,So[153]=-1,Co[153]=0,oo[153]=1,so[153]=0,ao[153]=1,ho[102]=0,fo[102]=-1,po[102]=1,mo[102]=1,_o[102]=0,xo[102]=0,bo[102]=0,Eo[102]=1,wo[102]=0,no[102]=-1,ro[102]=0,io[102]=1,uo[155]=0,lo[155]=-1,co[155]=0,go[155]=1,yo[155]=0,vo[155]=1,Mo[155]=0,So[155]=1,Co[155]=1,oo[155]=-1,so[155]=0,ao[155]=0,ho[103]=0,fo[103]=1,po[103]=0,mo[103]=-1,_o[103]=0,xo[103]=1,bo[103]=0,Eo[103]=-1,wo[103]=1,no[103]=1,ro[103]=0,io[103]=0,uo[152]=0,lo[152]=1,co[152]=1,mo[152]=-1,_o[152]=0,xo[152]=1,go[152]=-1,yo[152]=0,vo[152]=0,Mo[152]=0,So[152]=-1,Co[152]=0,bo[152]=0,Eo[152]=-1,wo[152]=1,oo[152]=1,so[152]=0,ao[152]=1,uo[156]=0,lo[156]=-1,co[156]=1,mo[156]=1,_o[156]=0,xo[156]=1,go[156]=-1,yo[156]=0,vo[156]=0,Mo[156]=0,So[156]=-1,Co[156]=0,bo[156]=0,Eo[156]=1,wo[156]=1,oo[156]=-1,so[156]=0,ao[156]=1,uo[137]=0,lo[137]=1,co[137]=1,ho[137]=0,fo[137]=1,po[137]=0,go[137]=-1,yo[137]=0,vo[137]=0,Mo[137]=0,So[137]=-1,Co[137]=0,no[137]=1,ro[137]=0,io[137]=0,oo[137]=1,so[137]=0,ao[137]=1,uo[139]=0,lo[139]=1,co[139]=1,ho[139]=0,fo[139]=-1,po[139]=0,go[139]=1,yo[139]=0,vo[139]=0,Mo[139]=0,So[139]=1,Co[139]=0,no[139]=-1,ro[139]=0,io[139]=0,oo[139]=1,so[139]=0,ao[139]=1,uo[98]=0,lo[98]=-1,co[98]=0,ho[98]=0,fo[98]=-1,po[98]=1,mo[98]=1,_o[98]=0,xo[98]=0,go[98]=1,yo[98]=0,vo[98]=1,bo[98]=0,Eo[98]=1,wo[98]=0,no[98]=-1,ro[98]=0,io[98]=1,uo[99]=0,lo[99]=1,co[99]=0,ho[99]=0,fo[99]=-1,po[99]=1,mo[99]=1,_o[99]=0,xo[99]=0,go[99]=-1,yo[99]=0,vo[99]=1,bo[99]=0,Eo[99]=-1,wo[99]=0,no[99]=1,ro[99]=0,io[99]=1,ho[38]=0,fo[38]=-1,po[38]=1,mo[38]=1,_o[38]=0,xo[38]=0,Mo[38]=0,So[38]=1,Co[38]=1,bo[38]=0,Eo[38]=1,wo[38]=0,no[38]=-1,ro[38]=0,io[38]=1,oo[38]=-1,so[38]=0,ao[38]=0,ho[39]=0,fo[39]=1,po[39]=1,mo[39]=-1,_o[39]=0,xo[39]=0,Mo[39]=0,So[39]=-1,Co[39]=1,bo[39]=0,Eo[39]=1,wo[39]=0,no[39]=-1,ro[39]=0,io[39]=1,oo[39]=1,so[39]=0,ao[39]=0;var No=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Io=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Po=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Lo=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Ro=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},ko=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},To=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ao=[],Do=[],Fo=[],zo=[],jo=[],qo=[],Go=[],Bo=[];zo[1]=jo[1]=18,zo[169]=jo[169]=18,Fo[4]=Do[4]=12,Fo[166]=Do[166]=12,Ao[16]=Bo[16]=4,Ao[154]=Bo[154]=4,qo[64]=Go[64]=22,qo[106]=Go[106]=22,Fo[2]=qo[2]=17,zo[2]=jo[2]=18,Fo[168]=qo[168]=17,zo[168]=jo[168]=18,Ao[8]=zo[8]=9,Do[8]=Fo[8]=12,Ao[162]=zo[162]=9,Do[162]=Fo[162]=12,Ao[32]=Bo[32]=4,Do[32]=Go[32]=1,Ao[138]=Bo[138]=4,Do[138]=Go[138]=1,jo[128]=Bo[128]=21,qo[128]=Go[128]=22,jo[42]=Bo[42]=21,qo[42]=Go[42]=22,Do[5]=jo[5]=14,Do[165]=jo[165]=14,Fo[20]=Bo[20]=6,Fo[150]=Bo[150]=6,Ao[80]=qo[80]=11,Ao[90]=qo[90]=11,zo[65]=Go[65]=3,zo[105]=Go[105]=3,Ao[160]=qo[160]=11,Do[160]=jo[160]=14,Ao[10]=qo[10]=11,Do[10]=jo[10]=14,Fo[130]=Bo[130]=6,zo[130]=Go[130]=3,Fo[40]=Bo[40]=6,zo[40]=Go[40]=3,Do[101]=Go[101]=1,Do[69]=Go[69]=1,jo[149]=Bo[149]=21,jo[21]=Bo[21]=21,Fo[86]=qo[86]=17,Fo[84]=qo[84]=17,Ao[89]=zo[89]=9,Ao[81]=zo[81]=9,Ao[96]=Go[96]=0,Do[96]=qo[96]=15,Ao[74]=Go[74]=0,Do[74]=qo[74]=15,Ao[24]=Fo[24]=8,zo[24]=Bo[24]=7,Ao[146]=Fo[146]=8,zo[146]=Bo[146]=7,Do[6]=qo[6]=15,Fo[6]=jo[6]=16,Do[164]=qo[164]=15,Fo[164]=jo[164]=16,zo[129]=Bo[129]=7,jo[129]=Go[129]=20,zo[41]=Bo[41]=7,jo[41]=Go[41]=20,Fo[66]=Go[66]=2,zo[66]=qo[66]=19,Fo[104]=Go[104]=2,zo[104]=qo[104]=19,Ao[144]=jo[144]=10,qo[144]=Bo[144]=23,Ao[26]=jo[26]=10,qo[26]=Bo[26]=23,Do[36]=Bo[36]=5,Fo[36]=Go[36]=2,Do[134]=Bo[134]=5,Fo[134]=Go[134]=2,Ao[9]=jo[9]=10,Do[9]=zo[9]=13,Ao[161]=jo[161]=10,Do[161]=zo[161]=13,Do[37]=Bo[37]=5,jo[37]=Go[37]=20,Do[133]=Bo[133]=5,jo[133]=Go[133]=20,Fo[148]=jo[148]=16,qo[148]=Bo[148]=23,Fo[22]=jo[22]=16,qo[22]=Bo[22]=23,Ao[82]=Fo[82]=8,zo[82]=qo[82]=19,Ao[88]=Fo[88]=8,zo[88]=qo[88]=19,Ao[73]=Go[73]=0,Do[73]=zo[73]=13,Ao[97]=Go[97]=0,Do[97]=zo[97]=13,Ao[145]=zo[145]=9,jo[145]=Bo[145]=21,Ao[25]=zo[25]=9,jo[25]=Bo[25]=21,Do[70]=Go[70]=1,Fo[70]=qo[70]=17,Do[100]=Go[100]=1,Fo[100]=qo[100]=17,Ao[34]=zo[34]=9,Do[34]=Fo[34]=12,jo[34]=Bo[34]=21,qo[34]=Go[34]=22,Ao[136]=Bo[136]=4,Do[136]=Go[136]=1,Fo[136]=qo[136]=17,zo[136]=jo[136]=18,Ao[35]=Bo[35]=4,Do[35]=Fo[35]=12,zo[35]=jo[35]=18,qo[35]=Go[35]=22,Ao[153]=Bo[153]=4,zo[153]=jo[153]=18,Do[102]=Fo[102]=12,qo[102]=Go[102]=22,Ao[155]=zo[155]=9,jo[155]=Bo[155]=23,Do[103]=Go[103]=1,Fo[103]=qo[103]=17,Ao[152]=Bo[152]=4,Fo[152]=qo[152]=17,zo[152]=jo[152]=18,Ao[156]=Fo[156]=8,zo[156]=jo[156]=18,qo[156]=Bo[156]=23,Ao[137]=Bo[137]=4,Do[137]=Go[137]=1,zo[137]=jo[137]=18,Ao[139]=Bo[139]=4,Do[139]=zo[139]=13,jo[139]=Go[139]=20,Ao[98]=zo[98]=9,Do[98]=Fo[98]=12,qo[98]=Go[98]=22,Ao[99]=Go[99]=0,Do[99]=Fo[99]=12,zo[99]=qo[99]=19,Do[38]=Fo[38]=12,jo[38]=Bo[38]=21,qo[38]=Go[38]=22,Do[39]=Bo[39]=5,Fo[39]=jo[39]=16,qo[39]=Go[39]=22;var Uo=[];function Vo(t,e,n){return(t-e)/(n-e)}function Xo(t){return t.constructor.toString().indexOf("Array")>-1}function Yo(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,l=n+i,c=[],h=!1;!h;){if(void 0===t.cells[l]||void 0===t.cells[l][u])if(l-=i,u-=r,a=(s=t.cells[l][u]).cval_real,-1===i)if(0===o)if(1&a)c.push([u,l]),r=-1,i=0,o=0;else{if(!(4&a)){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+1,l]),r=1,i=0,o=0}else{if(!(1&a)){if(4&a){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u+s.bottomleft,l]),r=0,i=1,o=0,h=!0;break}c.push([u,l]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&eo)){if(a&to){c.push([u+s.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+s.topright,l+1]),r=0,i=-1,o=1,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}else c.push([u+1,l+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(a&to)){if(1&a){c.push([u,l+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+s.lefttop]),r=1,i=0,o=1,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}else{if(!(a&to)){console.log("MarchingSquaresJS-isoBands: wtf");break}c.push([u,l+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&a)){c.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}else{if(!(4&a)){if(a&eo){c.push([u+1,l+s.righttop]),r=-1,i=0,o=1;break}c.push([u+1,l+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else if(a=(s=t.cells[l][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[l-1]&&void 0!==t.cells[l-1][u])r=0,i=-1,o=1;else{if(!(1&a)){c.push([u+s.bottomright,l]),r=0,i=1,o=1,h=!0;break}c.push([u,l])}else{if(!(a&to)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+l);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l+1]&&void 0!==t.cells[l+1][u])r=0,i=1,o=0;else{if(!(a&eo)){c.push([u+s.topleft,l+1]),r=0,i=-1,o=0,h=!0;break}c.push([u+1,l+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u+1])r=1,i=0,o=1;else{if(!(4&a)){c.push([u+1,l+s.righttop]),r=-1,i=0,o=1,h=!0;break}c.push([u+1,l]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[l][u-1])r=-1,i=0,o=0;else{if(!(a&to)){c.push([u,l+s.leftbottom]),r=1,i=0,o=0,h=!0;break}c.push([u,l+1]),r=0,i=1,o=0}}if(l+=i,(u+=r)===e&&l===n)break}return{path:c,i:u,j:l,x:r,y:i,o:o}}function Wo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&eo?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&to?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&to?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&to?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&to?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&to?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&eo?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&to?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&eo?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Ho(t,e,n,r){var i,o,s,a,u,l=t.cval;switch(e){case-1:0===r?(i=Do[l],s=ho[l],a=fo[l],u=po[l]):(i=Ao[l],s=uo[l],a=lo[l],u=co[l]);break;case 1:0===r?(i=jo[l],s=Mo[l],a=So[l],u=Co[l]):(i=qo[l],s=bo[l],a=Eo[l],u=wo[l]);break;default:switch(n){case-1:0===r?(i=Go[l],s=no[l],a=ro[l],u=io[l]):(i=Bo[l],s=oo[l],a=so[l],u=ao[l]);break;case 1:0===r?(i=zo[l],s=go[l],a=yo[l],u=vo[l]):(i=Fo[l],s=mo[l],a=_o[l],u=xo[l])}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),l=t.cval_real,i){case 0:l&eo?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&l?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&l?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&l?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:l&eo?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&l?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&l?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&l?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&l?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&l?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&l?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:l&to?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&l?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&l?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&l?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:l&to?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&l?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:l&to?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&l?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:l&to?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:l&to?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:l&eo?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:l&to?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:l&eo?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==s&&void 0!==a&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function Qo(t){var e=[],n=[];t.forEach((function(t){var r=Br(l([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function $o(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!Jo(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=l([e[r].lrCoordinates]),s=r+1;s<e.length;s++)e[s].grouped||Ko(l([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0);n.push(i)}return n}function Ko(t,e){for(var n=En(t),r=0;r<n.features.length;r++)if(!ye(n.features[r],e))return!1;return!0}function Jo(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Zo(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=bn(t)),!1!==i&&void 0!==i||(t=Me(t)),R(t,(function(t){var n=qi(r,t)+e,i=Tr(r,t),o=J(Bi(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function ts(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=Me(t)),"FeatureCollection"!==t.type||o?es(t,e,r):(D(t,(function(n,i){t.features[i]=es(n,e,r)})),t)}function es(t,e,n){var r="Point"===it(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return K(e);var n=t.bbox?t.bbox:$(t),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return a([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return a([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return a([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return a([o,s]);case"center":return xn(t);case void 0:case null:case"centroid":return bn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||R(t,(function(t){var r=Tr(n,t),i=qi(n,t),o=J(Bi(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function ns(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function rs(t,e){return t[0]*e[1]-e[0]*t[1]}function is(t,e){return!function(t,e){return 0===rs(ns(t),ns(e))}(t,e)&&(r=e,s=(n=t)[0],a=ns(n),u=r[0],l=ns(r),c=rs(a,l),function(t,e){return[t[0]+e[0],t[1]+e[1]]}(s,function(t,e){return[t*e[0],t*e[1]]}(rs((o=s,[(i=u)[0]-o[0],i[1]-o[1]]),l)/c,a)));var n,r,i,o,s,a,u,l,c}function os(t,e,n){var r=[],i=b(e,n),o=J(t),s=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(l=t,c=o[e+1],h=i,f=Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1])),p=l[0]+h*(c[1]-l[1])/f,d=c[0]+h*(c[1]-l[1])/f,[[p,l[1]+h*(l[0]-c[0])/f],[d,c[1]+h*(l[0]-c[0])/f]]);if(r.push(n),e>0){var a=r[e-1],u=is(n,a);!1!==u&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}var l,c,h,f,p,d})),h(s,t.properties)}function ss(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function as(t,e){return e.geometry.coordinates[0].every((function(e){return ye(a(e),t)}))}Uo[1]=Uo[169]=No,Uo[4]=Uo[166]=Io,Uo[16]=Uo[154]=Po,Uo[64]=Uo[106]=Lo,Uo[168]=Uo[2]=Oo,Uo[162]=Uo[8]=Ro,Uo[138]=Uo[32]=ko,Uo[42]=Uo[128]=To,Uo[5]=Uo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Uo[20]=Uo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Uo[80]=Uo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},Uo[65]=Uo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Uo[160]=Uo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Uo[130]=Uo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},Uo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},Uo[101]=Uo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},Uo[149]=Uo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Uo[86]=Uo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Uo[89]=Uo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Uo[96]=Uo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Uo[24]=Uo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Uo[6]=Uo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Uo[129]=Uo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Uo[66]=Uo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Uo[144]=Uo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Uo[36]=Uo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Uo[9]=Uo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Uo[37]=Uo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Uo[148]=Uo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Uo[82]=Uo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},Uo[73]=Uo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Uo[145]=Uo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Uo[70]=Uo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Uo[34]=function(t){return[To(t),Ro(t)]},Uo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Uo[136]=function(t){return[ko(t),Oo(t)]},Uo[153]=function(t){return[Po(t),No(t)]},Uo[102]=function(t){return[Io(t),Lo(t)]},Uo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},Uo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Uo[152]=function(t){return[Po(t),Oo(t)]},Uo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Uo[137]=function(t){return[ko(t),No(t)]},Uo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},Uo[98]=function(t){return[Ro(t),Lo(t)]},Uo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Uo[38]=function(t){return[Io(t),To(t)]},Uo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var us=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=ss(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),ls=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return h([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return ss(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),cs=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=ss(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return g(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=l([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=gn(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,s,u,l,c,h,f=e.getEnvelope();if(r&&(n=r.getEnvelope()),s=i,u=(o=f).geometry.coordinates[0].map((function(t){return t[0]})),l=o.geometry.coordinates[0].map((function(t){return t[1]})),c=s.geometry.coordinates[0].map((function(t){return t[0]})),h=s.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,u)!==Math.max.apply(null,c)||Math.max.apply(null,l)!==Math.max.apply(null,h)||Math.min.apply(null,u)!==Math.min.apply(null,c)||Math.min.apply(null,l)!==Math.min.apply(null,h))&&as(f,i)){for(var p=t.map((function(t){return t.from.coordinates})),d=void 0,g=function(t){e.some((function(e){var n,r;return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1]}))||(d=t)},y=0,v=p;y<v.length;y++)g(v[y]);d&&e.inside(a(d))&&(r&&!as(n,f)||(r=e))}})),r},t.prototype.inside=function(t){return ye(t,this.toPolygon())},t}(),hs=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return G(e,(function(t){et(t,"LineString","Graph::fromGeoJson"),k(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=us.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new us(t)),n},t.prototype.addEdge=function(t,e){var n=new ls(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new cs;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function fs(t,e){var n=!0;return G(t,(function(t){G(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!ps(e,t);case"Polygon":return!ye(t,e)}break;case"LineString":switch(e.type){case"Point":return!ps(t,e);case"LineString":return!function(t,e){return Or(t,e).features.length>0}(t,e);case"Polygon":return!ds(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ye(e,t);case"LineString":return!ds(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(ye(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(ye(o[i],t))return!0;return Or(Mi(t),Mi(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function ps(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(gs(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ds(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(ye(r[n],t))return!0;return Or(e,Mi(t)).features.length>0}function gs(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function ys(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function vs(t,e){return t[0]===e[0]&&t[1]===e[1]}function ms(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function _s(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Es(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function xs(t,e){return Or(t,Si(e)).features.length>0}function bs(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)ye(a(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function Es(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var ws=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Cs};function Ms(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function Ss(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Cs(t,e){return Di(t,e,{strict:!0})}ws.prototype.compare=function(t,e){if(t.type!==e.type||!Ss(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Ms(t),i=Ms(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},ws.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},ws.prototype.compareLine=function(t,e,n,r){if(!Ss(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},ws.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},ws.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},ws.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},ws.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},ws.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},ws.prototype.removePseudo=function(t){return t};var Ns=ws;function Is(t,e){var n=!1;return G(t,(function(t){G(e,(function(e){if(!0===n)return!0;n=!fs(t.geometry,e.geometry)}))})),n}var Ps=qt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),Ls=qt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(c),a=0,u=0;u<c;u++)s[u]=0;for(var l=0;l<n;l++){var c=this.dataset[l].length;if(o===this.assignments[l]){for(u=0;u<c;u++)s[u]+=this.dataset[l][u];a++}}if(a>0){for(u=0;u<c;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(r=n(t,e[a]))<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),Os=qt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),Rs=qt((function(t){if(t.exports)var e=Os;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),l=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,l,u),this._expandCluster(a,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),ks=qt((function(t){t.exports&&(t.exports={DBSCAN:Ps,KMEANS:Ls,OPTICS:Rs,PriorityQueue:Os})})),Ts=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},As=Ts,Ds=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},Fs=Ts,zs=function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},js=function(t,e){var n=t[0].length?As:Ds,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,c=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}a[h]=f}for(var g=0;g<i;g++)l+=a[g];for(var y=0;y<i;y++)c[y]={i:y,v:t[y],pr:a[y]/l,cs:0};c.sort((function(t,e){return t.pr-e.pr})),c[0].cs=c[0].pr;for(var v=1;v<i;v++)c[v].cs=c[v-1].cs+c[v].pr;for(var m=Math.random(),_=0;_<i-1&&c[_++].cs<m;);r.push(c[_-1].v)}return r};function qs(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var Gs=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,l=r||1e4,c=t.length,h=t[0].length,f=h>0,p=[];if(n)i="kmrand"==n?zs(t,e):"kmpp"==n?js(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*c);d[g]||(d[g]=!0,i.push(t[g]))}do{qs(e,0,p);for(var y=0;y<c;y++){for(var v=1/0,m=0,_=0;_<e;_++)(a=f?Fs(t[y],i[_]):Math.abs(t[y]-i[_]))<=v&&(v=a,m=_);s[y]=m,p[m]++}for(var x=[],b=(o=[],0);b<e;b++)x[b]=f?qs(h,0,x[b]):0,o[b]=i[b];if(f){for(var E=0;E<e;E++)i[E]=[];for(var w=0;w<c;w++)for(var M=x[s[w]],S=t[w],C=0;C<h;C++)M[C]+=S[C];u=!0;for(var N=0;N<e;N++){for(var I=i[N],P=x[N],L=o[N],O=p[N],R=0;R<h;R++)I[R]=P[R]/O||0;if(u)for(var k=0;k<h;k++)if(L[k]!=I[k]){u=!1;break}}}else{for(var T=0;T<c;T++)x[s[T]]+=t[T];for(var A=0;A<e;A++)i[A]=x[A]/p[A]||0;u=!0;for(var D=0;D<e;D++)if(o[D]!=i[D]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}};function Bs(t,e){return E(qi(t[0],t[1]))===E(qi(e[0],e[1]))}function Us(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Vs(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var Xs={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||Xs.heuristics.manhattan,o=r.closest||!1,s=new Hs((function(t){return t.f})),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return Vs(u);u.closed=!0;for(var l=t.neighbors(u),c=0,h=l.length;c<h;++c){var f=l[c];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<a.h||f.h===a.h&&f.g<a.g)&&(a=f),d?s.rescoreElement(f):s.push(f))}}}return o?Vs(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Ys(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Ws(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Ws(t,e,n){this.x=t,this.y=e,this.weight=n}function Hs(t){this.content=[],this.scoreFunction=t}function Qs(t,e){for(var n=0;n<e.features.length;n++)if(ye(t,e.features[n]))return!0;return!1}function $s(t){return function(){return t}}function Ks(t){return t[0]}function Js(t){return t[1]}function Zs(){this._=null}function ta(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ea(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function na(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ra(t){for(;t.L;)t=t.L;return t}function ia(t,e,n,r){var i=[null,null],o=Ia.push(i)-1;return i.left=t,i.right=e,n&&sa(i,t,e,n),r&&sa(i,e,t,r),Ca[t.index].halfedges.push(o),Ca[e.index].halfedges.push(o),i}function oa(t,e,n){var r=[e,n];return r.left=t,r}function sa(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function aa(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],c=0,h=1,f=a[0]-u,p=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>c&&(c=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<h&&(h=o)}if(o=n-l,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>c&&(c=o)}if(o=i-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<h&&(h=o)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*p]),h<1&&(t[1]=[u+h*f,l+h*p]),!0)}}}}}function ua(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],p=c[0],d=c[1],g=(h+p)/2,y=(f+d)/2;if(d===f){if(g<e||g>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(a=y-(s=(h-p)/(d-f))*g,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function la(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function ca(t,e){return e[+(e.left!==t.site)]}function ha(t,e){return e[+(e.left===t.site)]}Ys.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Xs.cleanNode(this.nodes[t])},Ys.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Xs.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ys.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ys.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Ys.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Ws.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Ws.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Ws.prototype.isWall=function(){return 0===this.weight},Hs.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}},Zs.prototype={constructor:Zs,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ra(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ea(this,n),n=(t=n).U),n.C=!1,r.C=!0,na(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(na(this,n),n=(t=n).U),n.C=!1,r.C=!0,ea(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ra(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,ea(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,na(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ea(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,na(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ea(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,na(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var fa,pa=[];function da(){ta(this),this.x=this.y=this.arc=this.site=this.cy=null}function ga(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,c=o[0]-s,h=o[1]-a,f=2*(u*h-l*c);if(!(f>=-La)){var p=u*u+l*l,d=c*c+h*h,g=(h*p-l*d)/f,y=(u*d-c*p)/f,v=pa.pop()||new da;v.arc=t,v.site=i,v.x=g+s,v.y=(v.cy=y+a)+Math.sqrt(g*g+y*y),t.circle=v;for(var m=null,_=Na._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Na.insert(m,v),m||(fa=v)}}}}function ya(t){var e=t.circle;e&&(e.P||(fa=e.N),Na.remove(e),pa.push(e),ta(e),t.circle=null)}var va=[];function ma(){ta(this),this.edge=this.site=this.circle=null}function _a(t){var e=va.pop()||new ma;return e.site=t,e}function xa(t){ya(t),Sa.remove(t),va.push(t),ta(t)}function ba(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];xa(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Pa&&Math.abs(r-u.circle.cy)<Pa;)o=u.P,a.unshift(u),xa(u),u=o;a.unshift(u),ya(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<Pa&&Math.abs(r-l.circle.cy)<Pa;)s=l.N,a.push(l),xa(l),l=s;a.push(l),ya(l);var c,h=a.length;for(c=1;c<h;++c)l=a[c],u=a[c-1],sa(l.edge,u.site,l.site,i);u=a[0],(l=a[h-1]).edge=ia(u.site,l.site,null,i),ga(u),ga(l)}function Ea(t){for(var e,n,r,i,o=t[0],s=t[1],a=Sa._;a;)if((r=wa(a,s)-o)>Pa)a=a.L;else{if(!((i=o-Ma(a,s))>Pa)){r>-Pa?(e=a.P,n=a):i>-Pa?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ca[t.index]={site:t,halfedges:[]}}(t);var u=_a(t);if(Sa.insert(e,u),e||n){if(e===n)return ya(e),n=_a(e.site),Sa.insert(u,n),u.edge=n.edge=ia(e.site,u.site),ga(e),void ga(n);if(n){ya(e),ya(n);var l=e.site,c=l[0],h=l[1],f=t[0]-c,p=t[1]-h,d=n.site,g=d[0]-c,y=d[1]-h,v=2*(f*y-p*g),m=f*f+p*p,_=g*g+y*y,x=[(y*m-p*_)/v+c,(f*_-g*m)/v+h];sa(n.edge,l,d,x),u.edge=ia(l,t,null,x),n.edge=ia(t,d,null,x),ga(e),ga(n)}else u.edge=ia(e.site,u.site)}}function wa(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var c=a-r,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-o/2)))/h+r:(r+a)/2}function Ma(t,e){var n=t.N;if(n)return wa(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Sa,Ca,Na,Ia,Pa=1e-6,La=1e-12;function Oa(t,e){return e[1]-t[1]||e[0]-t[0]}function Ra(t,e){var n,r,i,o=t.sort(Oa).pop();for(Ia=[],Ca=new Array(t.length),Sa=new Zs,Na=new Zs;;)if(i=fa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ea(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;ba(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ca.length;i<o;++i)if((t=Ca[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=la(t,Ia[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=Ia.length;o--;)ua(i=Ia[o],t,e,n,r)&&aa(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Pa||Math.abs(i[0][1]-i[1][1])>Pa)||delete Ia[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,c,h,f,p,d,g,y=Ca.length,v=!0;for(i=0;i<y;++i)if(o=Ca[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Ia[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(p=ha(o,Ia[u[a]]))[0],g=p[1],h=(c=ca(o,Ia[u[++a%l]]))[0],f=c[1],(Math.abs(d-h)>Pa||Math.abs(g-f)>Pa)&&(u.splice(a,0,Ia.push(oa(s,p,Math.abs(d-t)<Pa&&r-g>Pa?[t,Math.abs(h-t)<Pa?f:r]:Math.abs(g-r)<Pa&&n-d>Pa?[Math.abs(f-r)<Pa?h:n,r]:Math.abs(d-n)<Pa&&g-e>Pa?[n,Math.abs(h-n)<Pa?f:e]:Math.abs(g-e)<Pa&&d-t>Pa?[Math.abs(f-e)<Pa?h:t,e]:null))-1),++l);l&&(v=!1)}if(v){var m,_,x,b=1/0;for(i=0,v=null;i<y;++i)(o=Ca[i])&&(x=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<b&&(b=x,v=o);if(v){var E=[t,e],w=[t,r],M=[n,r],S=[n,e];v.halfedges.push(Ia.push(oa(s=v.site,E,w))-1,Ia.push(oa(s,w,M))-1,Ia.push(oa(s,M,S))-1,Ia.push(oa(s,S,E))-1)}}for(i=0;i<y;++i)(o=Ca[i])&&(o.halfedges.length||delete Ca[i])}(s,a,u,l)}this.edges=Ia,this.cells=Ca,Sa=Na=Ia=Ca=null}function ka(t){return(t=t.slice()).push(t[0]),l([t])}function Ta(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!I(r))throw new Error("options must be an object");if(!N(i))throw new Error("steps must be a number");if(!N(s))throw new Error("angle must be a number");var c=K(t);if("degrees"===o)var h=M(s);else e=Bi(t,e,90,{units:o}),n=Bi(t,n,0,{units:o}),e=K(e)[0]-c[0],n=K(n)[1]-c[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Aa(d),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Aa(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(y=-y),"degrees"===o){var v=g*Math.cos(h)+y*Math.sin(h),m=y*Math.cos(h)-g*Math.sin(h);g=v,y=m}f.push([g+c[0],y+c[1]])}return f.push(f[0]),"degrees"===o?l([f],u):Zo(l([f],u),s,{pivot:a})}function Aa(t){var e=t*Math.PI/180;return Math.tan(e)}function Da(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return j(t,(function(t,o,s){var a=e.weight?null==s?void 0:s[e.weight]:void 0;if(!N(a=null==a?1:a))throw new Error("weight value must be a number for feature index "+o);(a=Number(a))>0&&R(t,(function(t){n+=t[0]*a,r+=t[1]*a,i+=a}))})),a([n/i,r/i],e.properties,e)}function Fa(t,e,n,r,i){var o=r.tolerance||.001,s=0,u=0,l=0,c=0;if(D(n,(function(e){var n,r=null===(n=e.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!N(i=Number(i)))throw new Error("weight value must be a number");if(i>0){c+=1;var o=i*_e(e,t);0===o&&(o=1);var a=i/o;s+=e.geometry.coordinates[0]*a,u+=e.geometry.coordinates[1]*a,l+=a}})),c<1)throw new Error("no features to measure");var h=s/l,f=u/l;return 1===c||0===i||Math.abs(h-e[0])<o&&Math.abs(f-e[1])<o?a([h,f],{medianCandidates:r.medianCandidates}):(r.medianCandidates.push([h,f]),Fa([h,f],t,n,r,i-1))}function za(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ja(t,e){var n=0,r=0;R(t,(function(i,o,s,a,u){u>n&&(n=u,r=o,e.push([]));var l=o-r,c=t.coordinates[u][l+1],h=i[0],f=i[1],p=c[0],d=c[1];e[u].push([.75*h+.25*p,.75*f+.25*d]),e[u].push([.25*h+.75*p,.25*f+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function qa(t,e){var n=0,r=0,i=0;R(t,(function(o,s,a,u,l){u>i&&(i=u,r=s,e.push([[]])),l>n&&(n=l,r=s,e[u].push([]));var c=s-r,h=t.coordinates[u][l][c+1],f=o[0],p=o[1],d=h[0],g=h[1];e[u][l].push([.75*f+.25*d,.75*p+.25*g]),e[u][l].push([.25*f+.75*d,.25*p+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function Ga(t,e,n){void 0===n&&(n=2);var r=K(t),i=K(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function Ba(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,s=e.standardization||!1,a=[];D(t,(function(t){a.push(bn(t))}));for(var u=[],l=0;l<a.length;l++)u[l]=[];for(l=0;l<a.length;l++)for(var c=l;c<a.length;c++){l===c&&(u[l][c]=0);var h=Ga(a[l],a[c],r);u[l][c]=h,u[c][l]=h}for(l=0;l<a.length;l++)for(c=0;c<a.length;c++)0!==(h=u[l][c])&&(u[l][c]=i?h<=n?1:0:h<=n?Math.pow(h,o):0);if(s)for(l=0;l<a.length;l++){var f=u[l].reduce((function(t,e){return t+e}),0);for(c=0;c<a.length;c++)u[l][c]=u[l][c]/f}return u}function Ua(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function Va(t,e){return void 0===e&&(e={}),Ya(t,"mercator",e)}function Xa(t,e){return void 0===e&&(e={}),Ya(t,"wgs84",e)}function Ya(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&N(t[0])?t="mercator"===e?Wa(t):Ha(t):(!0!==r&&(t=Me(t)),R(t,(function(t){var n="mercator"===e?Wa(t):Ha(t);t[0]=n[0],t[1]=n[1]}))),t}function Wa(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function Ha(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}Ra.prototype={constructor:Ra,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return ca(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,l,c=n.site,h=-1,f=e[i[o-1]],p=f.left===c?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===c?f.right:f.left,s&&p&&r<s.index&&r<p.index&&(u=s,l=p,((a=c)[0]-l[0])*(u[1]-a[1])-(a[0]-u[0])*(l[1]-a[1])<0)&&t.push([c.data,s.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],l=e-a[1],h=u*u+l*l;h<c&&(c=h,s=a.index)}}))}while(null!==s);return o._found=r,null==n||c<=n*n?i.site:null}};var Qa=Object.freeze({__proto__:null,toMercator:Va,toWgs84:Xa}),$a=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};function Ka(t){return Array.isArray(t)?nu(t):t&&t.bbox?nu(t.bbox):[360*eu(),180*eu()]}function Ja(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(a(Ka(e.bbox)));return p(n)}function Za(t,e){void 0===e&&(e={}),null==t&&(t=1),N(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),N(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=$a(Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),i[i.length-1]=i[0],i=i.map((r=Ka(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(l([i]))},i=0;i<t;i++)r();return p(n)}function tu(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!N(r)||void 0===r||r<2)&&(r=10),N(i)&&void 0!==i||(i=1e-4),N(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[Ka(n)],l=0;l<r-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;u.push([u[l][0]+f*Math.cos(c),u[l][1]+f*Math.sin(c)])}s.push(h(u))}return p(s)}function eu(){return Math.random()-.5}function nu(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var ru=Object.freeze({__proto__:null,randomPosition:Ka,randomPoint:Ja,randomPolygon:Za,randomLineString:tu});function iu(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return D(t,(function(t){uu(t.properties,e)&&n.push(t)})),p(n)}function ou(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=au(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(p(u),s,o)}}function su(t,e,n,r){var i=r;return ou(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function au(t,e){var n={};return D(t,(function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}})),n}function uu(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!uu(t,e[r]))return!1;return!0}return lu(t,e)}function lu(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function cu(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var hu=Object.freeze({__proto__:null,getCluster:iu,clusterEach:ou,clusterReduce:su,createBins:au,applyFilter:uu,propertiesContainsFilter:lu,filterProperties:cu}),fu=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};
/**
     * splaytree v3.1.0
     * Fast Splay tree for Node and browser
     *
     * @author Alexander Milevski <info@w8r.name>
     * @license MIT
     * @preserve
     */function pu(t,e){return t>e?1:t<e?-1:0}function du(t,e,n){for(var r=new fu(null,null),i=r,o=r;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}o.left=e,o=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function gu(t,e,n,r){var i=new fu(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=du(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function yu(t,e,n){var r=null,i=null;if(e){var o=n((e=du(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function vu(t,e,n,r,i){if(t){r(e+(n?" ":" ")+i(t)+"\n");var o=e+(n?"    ":"   ");t.left&&vu(t.left,o,!1,r,i),t.right&&vu(t.right,o,!0,r,i)}}var mu=function(){function t(t){void 0===t&&(t=pu),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=gu(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new fu(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=du(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=du(t,e,n)).key)?(null===e.left?r=e.right:(r=du(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=du(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=du(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new fu(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&bu(t,e,0,r-1,i),null===this._root)this._root=_u(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new fu(null,null),i=r,o=t,s=e;null!==o&&null!==s;)n(o.key,s.key)<0?(i.next=o,o=o.next):(i.next=s,s=s.next),i=i.next;return null!==o?i.next=o:null!==s&&(i.next=s),r.next}(this.toList(),function(t,e){for(var n=new fu(null,null),r=n,i=0;i<t.length;i++)r=r.next=new fu(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=xu({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return vu(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=yu(t,this._root,r),o=i.left,s=i.right;r(t,e)<0?s=gu(e,n,s,r):o=gu(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=du(t.key,e,n)).left=t),e)}(o,s,r)},t.prototype.split=function(t){return yu(t,this._root,this._comparator)},t}();function _u(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),s=t[o],a=e[o],u=new fu(s,a);return u.left=_u(t,e,n,o),u.right=_u(t,e,o+1,r),u}return null}function xu(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=xu(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=xu(t,i+1,n),s}return null}function bu(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var u=t[s];t[s]=t[a],t[a]=u,u=e[s],e[s]=e[a],e[a]=u}bu(t,e,n,a,i),bu(t,e,a+1,r,i)}}function Eu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mu(t,e,n){return e&&wu(t.prototype,e),n&&wu(t,n),t}var Su=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Cu=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Nu=Number.EPSILON;void 0===Nu&&(Nu=Math.pow(2,-52));var Iu=Nu*Nu,Pu=function(t,e){if(-Nu<t&&t<Nu&&-Nu<e&&e<Nu)return 0;var n=t-e;return n*n<Iu*t*e?0:t<e?-1:1},Lu=function(){function t(){Eu(this,t),this.reset()}return Mu(t,[{key:"reset",value:function(){this.xRounder=new Ou,this.yRounder=new Ou}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Ou=function(){function t(){Eu(this,t),this.tree=new mu,this.round(0)}return Mu(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Pu(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===Pu(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),Ru=new Lu,ku=function(t,e){return t.x*e.y-t.y*e.x},Tu=function(t,e){return t.x*e.x+t.y*e.y},Au=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=ku(r,i);return Pu(o,0)},Du=function(t){return Math.sqrt(Tu(t,t))},Fu=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Tu(i,r)/Du(i)/Du(r)},zu=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},ju=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},qu=function(){function t(e,n){Eu(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Mu(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Bu.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Mu(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,u,l=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=l.point,a={x:o.x-i.x,y:o.y-i.y},u={x:s.x-i.x,y:s.y-i.y},ku(u,a)/Du(u)/Du(a)),cosine:Fu(e.point,t.point,l.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),u=a.sine,l=a.cosine;return o>=0&&u>=0?s<l?1:s>l?-1:0:o<0&&u<0?s<l?-1:s>l?1:0:u<o?-1:u>o?1:0}}}]),t}(),Gu=0,Bu=function(){function t(e,n,r,i){Eu(this,t),this.id=++Gu,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Mu(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(s<a&&s<l)return-1;if(s>a&&s>l)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var y=u-s,v=i-n,m=l-a,_=o-r;if(y>v&&m<_)return 1;if(y<v&&m>_)return-1}return i>o?1:i<o||u<l?-1:u>l?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Mu(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=Cu(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=Su(e,s)&&0===this.comparePoint(s),l=Su(n,i)&&0===t.comparePoint(i),c=Su(e,a)&&0===this.comparePoint(a),h=Su(n,o)&&0===t.comparePoint(o);if(l&&u)return h&&!c?o:!h&&c?a:null;if(l)return c&&i.x===a.x&&i.y===a.y?null:i;if(u)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&c)return null;if(h)return o;if(c)return a;var f=function(t,e,n,r){if(0===e.x)return ju(n,r,t.x);if(0===r.x)return ju(t,e,n.x);if(0===e.y)return zu(n,r,t.y);if(0===r.y)return zu(t,e,n.y);var i=ku(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=ku(o,e)/i,a=ku(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===f?null:Su(r,f)?Ru.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new qu(e,!0),o=new qu(e,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new t(i,s,this.rings.slice(),this.windings.slice());return qu.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),qu.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var l=r.rings[a],c=r.windings[a],h=n.rings.indexOf(l);-1===h?(n.rings.push(l),n.windings.push(c)):n.windings[h]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],c=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var p=e[h],d=p.poly;if(-1===c.indexOf(d))if(p.isExterior)l.push(d);else{-1===c.indexOf(d)&&c.push(d);var g=l.indexOf(p.poly);-1!==g&&l.splice(g,1)}}for(var y=0,v=l.length;y<v;y++){var m=l[y].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Ju.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Ju.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(Ju.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,s,a=qu.comparePoints(e,n);if(a<0)i=e,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,s=-1}return new t(new qu(i,!0),new qu(o,!1),[r],[s])}}]),t}(),Uu=function(){function t(e,n,r){if(Eu(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Ru.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Ru.round(e[s][0],e[s][1]);u.x===o.x&&u.y===o.y||(this.segments.push(Bu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(Bu.fromRing(o,i,this))}return Mu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),Vu=function(){function t(e,n){if(Eu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Uu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new Uu(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Mu(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Xu=function(){function t(e,n){if(Eu(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new Vu(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Mu(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),Yu=function(){function t(e){Eu(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Mu(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,u=o.rightSE,l=[a],c=a.point,h=[];s=a,a=u,l.push(a),a.point!==c;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var p=l[0].point,d=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var g=null,y=0,v=h.length;y<v;y++)if(h[y].point===a.point){g=y;break}if(null===g){h.push({index:l.length,point:a.point});var m=a.getLeftmostComparator(s);u=f.sort(m)[0].otherSE;break}var _=h.splice(g)[0],x=l.splice(_.index);x.unshift(x[0].otherSE),n.push(new t(x.reverse()))}n.push(new t(l))}}return n}}]),Mu(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==Au(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===Au(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,h=[],f=l;f!=c;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];qu.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),Wu=function(){function t(e){Eu(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Mu(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),Hu=function(){function t(e){Eu(this,t),this.rings=e,this.polys=this._composePolys(e)}return Mu(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Wu(i));else{var o=i.enclosingRing();o.poly||e.push(new Wu(o)),o.poly.addInterior(i)}}return e}}]),t}(),Qu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bu.compare;Eu(this,t),this.queue=e,this.tree=new mu(n),this.segments=[]}return Mu(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var u=null;if(s){var l=s.getIntersection(e);if(null!==l&&(e.isAnEndpoint(l)||(u=l),!s.isAnEndpoint(l)))for(var c=this._splitSafely(s,l),h=0,f=c.length;h<f;h++)n.push(c[h])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),y=0,v=g.length;y<v;y++)n.push(g[y])}if(null!==u||null!==p){var m=null;m=null===u?p:null===p||qu.comparePoints(u,p)<=0?u:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(m),x=0,b=_.length;x<b;x++)n.push(_[x])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var E=s.getIntersection(a);if(null!==E){if(!s.isAnEndpoint(E))for(var w=this._splitSafely(s,E),M=0,S=w.length;M<S;M++)n.push(w[M]);if(!a.isAnEndpoint(E))for(var C=this._splitSafely(a,E),N=0,I=C.length;N<I;N++)n.push(C[N])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),$u=1e6,Ku=1e6,Ju=new(function(){function t(){Eu(this,t)}return Mu(t,[{key:"run",value:function(t,e,n){Ju.type=t,Ru.reset();for(var r=[new Xu(e,!0)],i=0,o=n.length;i<o;i++)r.push(new Xu(n[i],!1));if(Ju.numMultiPolys=r.length,"difference"===Ju.type)for(var s=r[0],a=1;a<r.length;)null!==Cu(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===Ju.type)for(var u=0,l=r.length;u<l;u++)for(var c=r[u],h=u+1,f=r.length;h<f;h++)if(null===Cu(c.bbox,r[h].bbox))return[];for(var p=new mu(qu.compare),d=0,g=r.length;d<g;d++)for(var y=r[d].getSweepEvents(),v=0,m=y.length;v<m;v++)if(p.insert(y[v]),p.size>$u)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new Qu(p),x=p.size,b=p.pop();b;){var E=b.key;if(p.size===x){var w=E.segment;throw new Error("Unable to pop() ".concat(E.isLeft?"left":"right"," SweepEvent ")+"[".concat(E.point.x,", ").concat(E.point.y,"] from segment #").concat(w.id," ")+"[".concat(w.leftSE.point.x,", ").concat(w.leftSE.point.y,"] -> ")+"[".concat(w.rightSE.point.x,", ").concat(w.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>$u)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>Ku)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=_.process(E),S=0,C=M.length;S<C;S++){var N=M[S];void 0===N.consumedBy&&p.insert(N)}x=p.size,b=p.pop()}Ru.reset();var I=Yu.factory(_.segments);return new Hu(I).getGeom()}}]),t}()),Zu={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ju.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ju.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ju.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Ju.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var tl=function(){};tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl},tl.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var el=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),nl=function(){},rl={MAX_VALUE:{configurable:!0}};nl.isNaN=function(t){return Number.isNaN(t)},nl.doubleToLongBits=function(t){return t},nl.longBitsToDouble=function(t){return t},nl.isInfinite=function(t){return!Number.isFinite(t)},rl.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(nl,rl);var il=function(){},ol=function(){},sl=function(){};function al(){}var ul=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},ll={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ul.prototype.setOrdinate=function(t,e){switch(t){case ul.X:this.x=e;break;case ul.Y:this.y=e;break;case ul.Z:this.z=e;break;default:throw new el("Invalid ordinate index: "+t)}},ul.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!tl.equalsWithTolerance(this.x,e.x,n)&&!!tl.equalsWithTolerance(this.y,e.y,n)}},ul.prototype.getOrdinate=function(t){switch(t){case ul.X:return this.x;case ul.Y:return this.y;case ul.Z:return this.z}throw new el("Invalid ordinate index: "+t)},ul.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||nl.isNaN(this.z))&&nl.isNaN(t.z)},ul.prototype.equals=function(t){return t instanceof ul&&this.equals2D(t)},ul.prototype.equalInZ=function(t,e){return tl.equalsWithTolerance(this.z,t.z,e)},ul.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},ul.prototype.clone=function(){},ul.prototype.copy=function(){return new ul(this)},ul.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ul.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},ul.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},ul.prototype.hashCode=function(){var t=17;return 37*(t=37*t+ul.hashCode(this.x))+ul.hashCode(this.y)},ul.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ul.prototype.interfaces_=function(){return[il,ol,al]},ul.prototype.getClass=function(){return ul},ul.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=nl.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},ll.DimensionalComparator.get=function(){return cl},ll.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},ll.NULL_ORDINATE.get=function(){return nl.NaN},ll.X.get=function(){return 0},ll.Y.get=function(){return 1},ll.Z.get=function(){return 2},Object.defineProperties(ul,ll);var cl=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new el("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};cl.prototype.compare=function(t,e){var n=t,r=e,i=cl.compare(n.x,r.x);if(0!==i)return i;var o=cl.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:cl.compare(n.z,r.z)},cl.prototype.interfaces_=function(){return[sl]},cl.prototype.getClass=function(){return cl},cl.compare=function(t,e){return t<e?-1:t>e?1:nl.isNaN(t)?nl.isNaN(e)?0:-1:nl.isNaN(e)?1:0};var hl=function(){};hl.prototype.create=function(){},hl.prototype.interfaces_=function(){return[]},hl.prototype.getClass=function(){return hl};var fl=function(){},pl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};fl.prototype.interfaces_=function(){return[]},fl.prototype.getClass=function(){return fl},fl.toLocationSymbol=function(t){switch(t){case fl.EXTERIOR:return"e";case fl.BOUNDARY:return"b";case fl.INTERIOR:return"i";case fl.NONE:return"-"}throw new el("Unknown location value: "+t)},pl.INTERIOR.get=function(){return 0},pl.BOUNDARY.get=function(){return 1},pl.EXTERIOR.get=function(){return 2},pl.NONE.get=function(){return-1},Object.defineProperties(fl,pl);var dl=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},gl=function(){},yl={LOG_10:{configurable:!0}};gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.log10=function(t){var e=Math.log(t);return nl.isInfinite(e)||nl.isNaN(e)?e:e/gl.LOG_10},gl.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},gl.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},gl.wrap=function(t,e){return t<0?e- -t%e:t%e},gl.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}},gl.average=function(t,e){return(t+e)/2},yl.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(gl,yl);var vl=function(t){this.str=t};vl.prototype.append=function(t){this.str+=t},vl.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},vl.prototype.toString=function(t){return this.str};var ml=function(t){this.value=t};ml.prototype.intValue=function(){return this.value},ml.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},ml.isNaN=function(t){return Number.isNaN(t)};var _l=function(){};_l.isWhitespace=function(t){return t<=32&&t>=0||127===t},_l.toUpperCase=function(t){return t.toUpperCase()};var xl=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},bl={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};xl.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},xl.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=xl.magnitude(n._hi),i=xl.TEN.pow(r);(n=n.divide(i)).gt(xl.TEN)?(n=n.divide(xl.TEN),r+=1):n.lt(xl.ONE)&&(n=n.multiply(xl.TEN),r-=1);for(var o=r+1,s=new vl,a=xl.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(xl.valueOf(l)).multiply(xl.TEN),c&&n.selfAdd(xl.TEN);var f=!0,p=xl.magnitude(n._hi);if(p<0&&Math.abs(p)>=a-u&&(f=!1),!f)break}return e[0]=r,s.toString()},xl.prototype.sqr=function(){return this.multiply(this)},xl.prototype.doubleValue=function(){return this._hi+this._lo},xl.prototype.subtract=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},xl.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},xl.prototype.isZero=function(){return 0===this._hi&&0===this._lo},xl.prototype.selfSubtract=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},xl.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},xl.prototype.min=function(t){return this.le(t)?this:t},xl.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,c=null,h=null;return u=this._hi/n,h=(i=(l=xl.SPLIT*u)-(i=l-u))*(s=(h=xl.SPLIT*n)-(s=h-n))-(c=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,h=u+(l=(this._hi-c-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+l,this}},xl.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},xl.prototype.divide=function(){if(arguments[0]instanceof xl){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;n=(o=this._hi/t._hi)-(e=(s=xl.SPLIT*o)-(e=s-o)),u=e*(r=(u=xl.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var l=u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi);return new xl(l,o-u+s)}if("number"==typeof arguments[0]){var c=arguments[0];return nl.isNaN(c)?xl.createNaN():xl.copy(this).selfDivide(c,0)}},xl.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},xl.prototype.pow=function(t){if(0===t)return xl.valueOf(1);var e=new xl(this),n=xl.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},xl.prototype.ceil=function(){if(this.isNaN())return xl.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new xl(t,e)},xl.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},xl.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},xl.prototype.setValue=function(){if(arguments[0]instanceof xl){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},xl.prototype.max=function(t){return this.ge(t)?this:t},xl.prototype.sqrt=function(){if(this.isZero())return xl.valueOf(0);if(this.isNegative())return xl.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=xl.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},xl.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,h=null,f=null,p=null,d=null,g=null,y=null;p=this._hi+u,h=this._lo+l,d=p-(g=p-this._hi),f=h-(y=h-this._lo);var v=(c=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=l-y+(this._lo-f))+(g+(p-c))),m=g+(c-v);return this._hi=v,this._lo=m,this}},xl.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof xl){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=xl.SPLIT*this._hi)-this._hi,l=xl.SPLIT*n,i=u-i,o=this._hi-i,s=l-n;var c=(u=this._hi*n)+(l=i*(s=l-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),h=l+(i=u-c);return this._hi=c,this._lo=h,this}},xl.prototype.selfSqr=function(){return this.selfMultiply(this)},xl.prototype.floor=function(){if(this.isNaN())return xl.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new xl(t,e)},xl.prototype.negate=function(){return this.isNaN()?this:new xl(-this._hi,-this._lo)},xl.prototype.clone=function(){},xl.prototype.multiply=function(){if(arguments[0]instanceof xl){var t=arguments[0];return t.isNaN()?xl.createNaN():xl.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return nl.isNaN(e)?xl.createNaN():xl.copy(this).selfMultiply(e,0)}},xl.prototype.isNaN=function(){return nl.isNaN(this._hi)},xl.prototype.intValue=function(){return Math.trunc(this._hi)},xl.prototype.toString=function(){var t=xl.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},xl.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+xl.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+xl.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},xl.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=xl.SPLIT*n)-(i=s-n)),o=(a=xl.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new xl(u,n-u+s)},xl.prototype.toSciNotation=function(){if(this.isZero())return xl.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=xl.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},xl.prototype.abs=function(){return this.isNaN()?xl.NaN:this.isNegative()?this.negate():new xl(this)},xl.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},xl.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},xl.prototype.add=function(){if(arguments[0]instanceof xl){var t=arguments[0];return xl.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return xl.copy(this).selfAdd(e)}},xl.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof xl){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},xl.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},xl.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},xl.prototype.trunc=function(){return this.isNaN()?xl.NaN:this.isPositive()?this.floor():this.ceil()},xl.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},xl.prototype.interfaces_=function(){return[al,il,ol]},xl.prototype.getClass=function(){return xl},xl.sqr=function(t){return xl.valueOf(t).selfMultiply(t)},xl.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return xl.parse(t)}if("number"==typeof arguments[0])return new xl(arguments[0])},xl.sqrt=function(t){return xl.valueOf(t).sqrt()},xl.parse=function(t){for(var e=0,n=t.length;_l.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new xl,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,_l.isDigit(l)){var c=l-"0";o.selfMultiply(xl.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=ml.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,p=s-a-u;if(0===p)f=o;else if(p>0){var d=xl.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=xl.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},xl.createNaN=function(){return new xl(nl.NaN,nl.NaN)},xl.copy=function(t){return new xl(t)},xl.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},xl.stringOfChar=function(t,e){for(var n=new vl,r=0;r<e;r++)n.append(t);return n.toString()},bl.PI.get=function(){return new xl(3.141592653589793,12246467991473532e-32)},bl.TWO_PI.get=function(){return new xl(6.283185307179586,24492935982947064e-32)},bl.PI_2.get=function(){return new xl(1.5707963267948966,6123233995736766e-32)},bl.E.get=function(){return new xl(2.718281828459045,14456468917292502e-32)},bl.NaN.get=function(){return new xl(nl.NaN,nl.NaN)},bl.EPS.get=function(){return 123259516440783e-46},bl.SPLIT.get=function(){return 134217729},bl.MAX_PRINT_DIGITS.get=function(){return 32},bl.TEN.get=function(){return xl.valueOf(10)},bl.ONE.get=function(){return xl.valueOf(1)},bl.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},bl.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(xl,bl);var El=function(){},wl={DP_SAFE_EPSILON:{configurable:!0}};El.prototype.interfaces_=function(){return[]},El.prototype.getClass=function(){return El},El.orientationIndex=function(t,e,n){var r=El.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=xl.valueOf(e.x).selfAdd(-t.x),o=xl.valueOf(e.y).selfAdd(-t.y),s=xl.valueOf(n.x).selfAdd(-e.x),a=xl.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},El.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},El.intersection=function(t,e,n,r){var i=xl.valueOf(r.y).selfSubtract(n.y).selfMultiply(xl.valueOf(e.x).selfSubtract(t.x)),o=xl.valueOf(r.x).selfSubtract(n.x).selfMultiply(xl.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=xl.valueOf(r.x).selfSubtract(n.x).selfMultiply(xl.valueOf(t.y).selfSubtract(n.y)),u=xl.valueOf(r.y).selfSubtract(n.y).selfMultiply(xl.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=xl.valueOf(t.x).selfAdd(xl.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=xl.valueOf(e.x).selfSubtract(t.x).selfMultiply(xl.valueOf(t.y).selfSubtract(n.y)),f=xl.valueOf(e.y).selfSubtract(t.y).selfMultiply(xl.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(s).doubleValue(),d=xl.valueOf(n.y).selfAdd(xl.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new ul(c,d)},El.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return El.signum(s);r=i+o}else{if(!(i<0))return El.signum(s);if(o>=0)return El.signum(s);r=-i-o}var a=El.DP_SAFE_EPSILON*r;return s>=a||-s>=a?El.signum(s):2},El.signum=function(t){return t>0?1:t<0?-1:0},wl.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(El,wl);var Ml=function(){},Sl={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Sl.X.get=function(){return 0},Sl.Y.get=function(){return 1},Sl.Z.get=function(){return 2},Sl.M.get=function(){return 3},Ml.prototype.setOrdinate=function(t,e,n){},Ml.prototype.size=function(){},Ml.prototype.getOrdinate=function(t,e){},Ml.prototype.getCoordinate=function(){},Ml.prototype.getCoordinateCopy=function(t){},Ml.prototype.getDimension=function(){},Ml.prototype.getX=function(t){},Ml.prototype.clone=function(){},Ml.prototype.expandEnvelope=function(t){},Ml.prototype.copy=function(){},Ml.prototype.getY=function(t){},Ml.prototype.toCoordinateArray=function(){},Ml.prototype.interfaces_=function(){return[ol]},Ml.prototype.getClass=function(){return Ml},Object.defineProperties(Ml,Sl);var Cl=function(){},Nl=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Cl),Il=function(){};Il.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Il.getProperty=function(t){return{"line.separator":"\n"}[t]};var Pl=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof ul&&arguments[1]instanceof ul){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2];this.x=u,this.y=l,this.w=c}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,y=f.x-h.x,v=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,x=p.x*d.y-d.x*p.y;this.x=y*x-_*v,this.y=m*v-g*x,this.w=g*_-m*y}};Pl.prototype.getY=function(){var t=this.y/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Nl;return t},Pl.prototype.getX=function(){var t=this.x/this.w;if(nl.isNaN(t)||nl.isInfinite(t))throw new Nl;return t},Pl.prototype.getCoordinate=function(){var t=new ul;return t.x=this.getX(),t.y=this.getY(),t},Pl.prototype.interfaces_=function(){return[]},Pl.prototype.getClass=function(){return Pl},Pl.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,l=n.x*r.y-r.x*n.y,c=i*u-a*o,h=(o*l-u*s)/c,f=(a*s-i*l)/c;if(nl.isNaN(h)||nl.isInfinite(h)||nl.isNaN(f)||nl.isInfinite(f))throw new Nl;return new ul(h,f)};var Ll=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ul){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this.init(o,s,a,u)}},Ol={serialVersionUID:{configurable:!0}};Ll.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ll.prototype.equals=function(t){if(!(t instanceof Ll))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Ll.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Ll;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Ll(e,r,n,i)},Ll.prototype.isNull=function(){return this._maxx<this._minx},Ll.prototype.getMaxX=function(){return this._maxx},Ll.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Ll){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Ll.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Ll){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ul){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Ll.prototype.getMinY=function(){return this._miny},Ll.prototype.getMinX=function(){return this._minx},Ll.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Ll){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Ll.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Ll.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ll.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Ll.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Ll.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ll.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ll.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ll.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Ll.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ll.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Ll){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof ul){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Ll.prototype.centre=function(){return this.isNull()?null:new ul((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ll.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Ll){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Ll.prototype.getMaxY=function(){return this._maxy},Ll.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Ll.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+ul.hashCode(this._minx))+ul.hashCode(this._maxx))+ul.hashCode(this._miny))+ul.hashCode(this._maxy)},Ll.prototype.interfaces_=function(){return[il,al]},Ll.prototype.getClass=function(){return Ll},Ll.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<a))}},Ol.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Ll,Ol);var Rl={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},kl=function(t){this.geometryFactory=t||new mh};kl.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Rl.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Rl.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Al[n]&&(e=Al[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},kl.prototype.write=function(t){return this.extractGeometry(t)},kl.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Tl[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Tl[e].apply(this,[t])+")"};var Tl={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Tl.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Tl.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Tl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Tl.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Tl.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Tl.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Tl.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Tl.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Al={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Rl.spaces);return this.geometryFactory.createPoint(new ul(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Rl.trimParens,"$1"),r.push(Al.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Rl.spaces),r.push(new ul(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Rl.spaces),r.push(new ul(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Rl.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Rl.trimParens,"$1"),r.push(Al.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Rl.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(Rl.trimParens,"$1"),n=Al.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===a?i=r:s.push(r);return this.geometryFactory.createPolygon(i,s)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Rl.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Rl.trimParens,"$1"),r.push(Al.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},Dl=function(t){this.parser=new kl(t)};Dl.prototype.write=function(t){return this.parser.write(t)},Dl.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Fl=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),zl=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Fl),jl=function(){};jl.prototype.interfaces_=function(){return[]},jl.prototype.getClass=function(){return jl},jl.shouldNeverReachHere=function(){if(0===arguments.length)jl.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new zl("Should never reach here"+(null!==t?": "+t:""))}},jl.isTrue=function(){var t;if(1===arguments.length)jl.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new zl:new zl(t)},jl.equals=function(){var t,e,n;if(2===arguments.length)jl.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new zl("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ql=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ul,this._intPt[1]=new ul,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Gl={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ql.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ql.prototype.getTopologySummary=function(){var t=new vl;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ql.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ql.prototype.getIntersectionNum=function(){return this._result},ql.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ql.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ql.prototype.setPrecisionModel=function(t){this._precisionModel=t},ql.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},ql.prototype.getIntersection=function(t){return this._intPt[t]},ql.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ql.prototype.hasIntersection=function(){return this._result!==ql.NO_INTERSECTION},ql.prototype.getEdgeDistance=function(t,e){return ql.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ql.prototype.isCollinear=function(){return this._result===ql.COLLINEAR_INTERSECTION},ql.prototype.toString=function(){return Dl.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Dl.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ql.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ql.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ql.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ql.prototype.interfaces_=function(){return[]},ql.prototype.getClass=function(){return ql},ql.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return jl.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ql.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return jl.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Gl.DONT_INTERSECT.get=function(){return 0},Gl.DO_INTERSECT.get=function(){return 1},Gl.COLLINEAR.get=function(){return 2},Gl.NO_INTERSECTION.get=function(){return 0},Gl.POINT_INTERSECTION.get=function(){return 1},Gl.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ql,Gl);var Bl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Ll(this._inputLines[0][0],this._inputLines[0][1]),n=new Ll(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Ll.intersects(n,r,e)&&0===Xl.orientationIndex(n,r,e)&&0===Xl.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Pl.intersection(t,n,r,i)}catch(s){if(!(s instanceof Nl))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new ul(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=El.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Il.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Il.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new ul(t),o=new ul(e),s=new ul(n),a=new ul(r),u=new ul;this.normalizeToEnvCentre(i,o,s,a,u);var l=this.safeHCoordinateIntersection(i,o,s,a);return l.x+=u.x,l.y+=u.y,l},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Ll.intersects(e,n,r),s=Ll.intersects(e,n,i),a=Ll.intersects(r,i,e),u=Ll.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>l?o:l)+(a<h?a:h))/2,d=((s>c?s:c)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Ll.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Xl.orientationIndex(e,n,r),s=Xl.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Xl.orientationIndex(r,i,e),u=Xl.orientationIndex(r,i,n);return a>0&&u>0||a<0&&u<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new ul(r):0===s?this._intPt[0]=new ul(i):0===a?this._intPt[0]=new ul(e):0===u&&(this._intPt[0]=new ul(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Xl.distancePointLine(t,n,r),s=Xl.distancePointLine(e,n,r);return s<o&&(o=s,i=e),(s=Xl.distancePointLine(n,t,e))<o&&(o=s,i=n),(s=Xl.distancePointLine(r,t,e))<o&&(o=s,i=r),i},e}(ql),Ul=function(){};Ul.prototype.interfaces_=function(){return[]},Ul.prototype.getClass=function(){return Ul},Ul.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Ul.signOfDet2x2(r,i,o,s)},Ul.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(s=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=s*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(s=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=s*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Vl=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Vl.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Ul.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Vl.prototype.isPointInPolygon=function(){return this.getLocation()!==fl.EXTERIOR},Vl.prototype.getLocation=function(){return this._isPointOnSegment?fl.BOUNDARY:this._crossingCount%2==1?fl.INTERIOR:fl.EXTERIOR},Vl.prototype.isOnSegment=function(){return this._isPointOnSegment},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl},Vl.locatePointInRing=function(){if(arguments[0]instanceof ul&&dl(arguments[1],Ml)){for(var t=arguments[1],e=new Vl(arguments[0]),n=new ul,r=new ul,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof ul&&arguments[1]instanceof Array){for(var o=arguments[1],s=new Vl(arguments[0]),a=1;a<o.length;a++){var u=o[a],l=o[a-1];if(s.countSegment(u,l),s.isOnSegment())return s.getLocation()}return s.getLocation()}};var Xl=function(){},Yl={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl},Xl.orientationIndex=function(t,e,n){return El.orientationIndex(t,e,n)},Xl.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(dl(arguments[0],Ml)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new ul,l=new ul,c=new ul;s.getCoordinate(0,l),s.getCoordinate(1,c);var h=l.x;c.x-=h;for(var f=0,p=1;p<a-1;p++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(p+1,c),c.x-=h,f+=l.x*(u.y-c.y);return f/2}},Xl.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Xl.distancePointLine(t,n,r);if(n.equals(r))return Xl.distancePointLine(r,t,e);var i=!1;if(Ll.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?gl.min(Xl.distancePointLine(t,n,r),Xl.distancePointLine(e,n,r),Xl.distancePointLine(n,t,e),Xl.distancePointLine(r,t,e)):0},Xl.isPointInRing=function(t,e){return Xl.locatePointInRing(t,e)!==fl.EXTERIOR},Xl.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new ul;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=a,o=u}return n},Xl.isCCW=function(t){var e=t.length-1;if(e<3)throw new el("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=Xl.computeOrientation(u,n,l);return 0===c?u.x>l.x:c>0},Xl.locatePointInRing=function(t,e){return Vl.locatePointInRing(t,e)},Xl.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Xl.computeOrientation=function(t,e,n){return Xl.orientationIndex(t,e,n)},Xl.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new el("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Xl.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),l=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(l<=0)return o.distance(s);if(l>=1)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},Xl.isOnLine=function(t,e){for(var n=new Bl,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Yl.CLOCKWISE.get=function(){return-1},Yl.RIGHT.get=function(){return Xl.CLOCKWISE},Yl.COUNTERCLOCKWISE.get=function(){return 1},Yl.LEFT.get=function(){return Xl.COUNTERCLOCKWISE},Yl.COLLINEAR.get=function(){return 0},Yl.STRAIGHT.get=function(){return Xl.COLLINEAR},Object.defineProperties(Xl,Yl);var Wl=function(){};Wl.prototype.filter=function(t){},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl};var Hl=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},Ql={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Hl.prototype.isGeometryCollection=function(){return this.getSortIndex()===Hl.SORTINDEX_GEOMETRYCOLLECTION},Hl.prototype.getFactory=function(){return this._factory},Hl.prototype.getGeometryN=function(t){return this},Hl.prototype.getArea=function(){return 0},Hl.prototype.isRectangle=function(){return!1},Hl.prototype.equals=function(){if(arguments[0]instanceof Hl){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Hl))return!1;var n=e;return this.equalsExact(n)}},Hl.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Hl.prototype.geometryChanged=function(){this.apply(Hl.geometryChangedFilter)},Hl.prototype.geometryChangedAction=function(){this._envelope=null},Hl.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Hl.prototype.getLength=function(){return 0},Hl.prototype.getNumGeometries=function(){return 1},Hl.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},Hl.prototype.getUserData=function(){return this._userData},Hl.prototype.getSRID=function(){return this._SRID},Hl.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Hl.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Hl.SORTINDEX_GEOMETRYCOLLECTION)throw new el("This method does not support GeometryCollection arguments")},Hl.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Hl.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Hl.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Hl.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Ll(this._envelope)},Hl.prototype.setSRID=function(t){this._SRID=t},Hl.prototype.setUserData=function(t){this._userData=t},Hl.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},Hl.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Hl.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Hl.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Hl.SORTINDEX_MULTIPOINT||this.getSortIndex()===Hl.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Hl.SORTINDEX_MULTIPOLYGON},Hl.prototype.interfaces_=function(){return[ol,il,al]},Hl.prototype.getClass=function(){return Hl},Hl.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Hl.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},Ql.serialVersionUID.get=function(){return 0x799ea46522854c00},Ql.SORTINDEX_POINT.get=function(){return 0},Ql.SORTINDEX_MULTIPOINT.get=function(){return 1},Ql.SORTINDEX_LINESTRING.get=function(){return 2},Ql.SORTINDEX_LINEARRING.get=function(){return 3},Ql.SORTINDEX_MULTILINESTRING.get=function(){return 4},Ql.SORTINDEX_POLYGON.get=function(){return 5},Ql.SORTINDEX_MULTIPOLYGON.get=function(){return 6},Ql.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},Ql.geometryChangedFilter.get=function(){return $l},Object.defineProperties(Hl,Ql);var $l=function(){};$l.interfaces_=function(){return[Wl]},$l.filter=function(t){t.geometryChangedAction()};var Kl=function(){};Kl.prototype.filter=function(t){},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Jl=function(){},Zl={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Jl.prototype.isInBoundary=function(t){},Jl.prototype.interfaces_=function(){return[]},Jl.prototype.getClass=function(){return Jl},Zl.Mod2BoundaryNodeRule.get=function(){return tc},Zl.EndPointBoundaryNodeRule.get=function(){return ec},Zl.MultiValentEndPointBoundaryNodeRule.get=function(){return nc},Zl.MonoValentEndPointBoundaryNodeRule.get=function(){return rc},Zl.MOD2_BOUNDARY_RULE.get=function(){return new tc},Zl.ENDPOINT_BOUNDARY_RULE.get=function(){return new ec},Zl.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new nc},Zl.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new rc},Zl.OGC_SFS_BOUNDARY_RULE.get=function(){return Jl.MOD2_BOUNDARY_RULE},Object.defineProperties(Jl,Zl);var tc=function(){};tc.prototype.isInBoundary=function(t){return t%2==1},tc.prototype.interfaces_=function(){return[Jl]},tc.prototype.getClass=function(){return tc};var ec=function(){};ec.prototype.isInBoundary=function(t){return t>0},ec.prototype.interfaces_=function(){return[Jl]},ec.prototype.getClass=function(){return ec};var nc=function(){};nc.prototype.isInBoundary=function(t){return t>1},nc.prototype.interfaces_=function(){return[Jl]},nc.prototype.getClass=function(){return nc};var rc=function(){};rc.prototype.isInBoundary=function(t){return 1===t},rc.prototype.interfaces_=function(){return[Jl]},rc.prototype.getClass=function(){return rc};var ic=function(){};function oc(t){this.message=t||""}ic.prototype.add=function(){},ic.prototype.addAll=function(){},ic.prototype.isEmpty=function(){},ic.prototype.iterator=function(){},ic.prototype.size=function(){},ic.prototype.toArray=function(){},ic.prototype.remove=function(){},oc.prototype=new Error,oc.prototype.name="IndexOutOfBoundsException";var sc=function(){};sc.prototype.hasNext=function(){},sc.prototype.next=function(){},sc.prototype.remove=function(){};var ac=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(ic);function uc(t){this.message=t||""}uc.prototype=new Error,uc.prototype.name="NoSuchElementException";var lc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof ic&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,ic]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new cc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new oc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(ac),cc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new uc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(sc),hc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[1],r=!1,i=arguments[0].iterator();i.hasNext();)e.add(i.next(),n),r=!0;return r}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof ul&&"boolean"==typeof arguments[1]){var o=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(o))return null;t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],l=arguments[1];if(arguments[2])for(var c=0;c<u.length;c++)e.add(u[c],l);else for(var h=u.length-1;h>=0;h--)e.add(u[h],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ul){var f=arguments[0],p=arguments[1];if(!arguments[2]){var d=this.size();if(d>0){if(f>0&&this.get(f-1).equals2D(p))return null;if(f<d&&this.get(f).equals2D(p))return null}}t.prototype.add.call(this,f,p)}}else if(4===arguments.length){var g=arguments[0],y=arguments[1],v=arguments[2],m=arguments[3],_=1;v>m&&(_=-1);for(var x=v;x!==m;x+=_)e.add(g[x],y);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ul(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(lc),fc=function(){},pc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};pc.ForwardComparator.get=function(){return dc},pc.BidirectionalComparator.get=function(){return gc},pc.coordArrayType.get=function(){return new Array(0).fill(null)},fc.prototype.interfaces_=function(){return[]},fc.prototype.getClass=function(){return fc},fc.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},fc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(fc.indexOf(r,e)<0)return r}return null},fc.scroll=function(t,e){var n=fc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Il.arraycopy(t,n,r,0,t.length-n),Il.arraycopy(t,0,r,t.length-n,n),Il.arraycopy(r,0,t,0,t.length)},fc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},fc.intersection=function(t,e){for(var n=new hc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},fc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},fc.removeRepeatedPoints=function(t){return fc.hasRepeatedPoints(t)?new hc(t,!1).toCoordinateArray():t},fc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},fc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},fc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new ul(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new ul(r[i+u])},fc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},fc.envelope=function(t){for(var e=new Ll,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},fc.toCoordinateArray=function(t){return t.toArray(fc.coordArrayType)},fc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},fc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},fc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},fc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},fc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},fc.extract=function(t,e,n){e=gl.clamp(e,0,t.length);var r=(n=gl.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(fc,pc);var dc=function(){};dc.prototype.compare=function(t,e){return fc.compare(t,e)},dc.prototype.interfaces_=function(){return[sl]},dc.prototype.getClass=function(){return dc};var gc=function(){};gc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=fc.compare(n,r);return fc.isEqualReversed(n,r)?0:i},gc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=fc.increasingDirection(n),o=fc.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0},gc.prototype.interfaces_=function(){return[sl]},gc.prototype.getClass=function(){return gc};var yc=function(){};yc.prototype.get=function(){},yc.prototype.put=function(){},yc.prototype.size=function(){},yc.prototype.values=function(){},yc.prototype.entrySet=function(){};var vc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(yc);function mc(t){this.message=t||""}function _c(){}mc.prototype=new Error,mc.prototype.name="OperationNotSupported",_c.prototype=new ic,_c.prototype.contains=function(){};var xc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof ic&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new bc(this)},e}(_c),bc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new uc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new mc},e}(sc);function Ec(t){return null===t?0:t.color}function wc(t){return null===t?null:t.parent}function Mc(t,e){null!==t&&(t.color=e)}function Sc(t){return null===t?null:t.left}function Cc(t){return null===t?null:t.right}function Nc(){this.root_=null,this.size_=0}Nc.prototype=new vc,Nc.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Nc.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},Nc.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(wc(t)===Sc(wc(wc(t)))){var n=Cc(wc(wc(t)));1===Ec(n)?(Mc(wc(t),0),Mc(n,0),Mc(wc(wc(t)),1),t=wc(wc(t))):(t===Cc(wc(t))&&(t=wc(t),e.rotateLeft(t)),Mc(wc(t),0),Mc(wc(wc(t)),1),e.rotateRight(wc(wc(t))))}else{var r=Sc(wc(wc(t)));1===Ec(r)?(Mc(wc(t),0),Mc(r,0),Mc(wc(wc(t)),1),t=wc(wc(t))):(t===Sc(wc(t))&&(t=wc(t),e.rotateRight(t)),Mc(wc(t),0),Mc(wc(wc(t)),1),e.rotateLeft(wc(wc(t))))}this.root_.color=0},Nc.prototype.values=function(){var t=new lc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Nc.successor(e));)t.add(e.value);return t},Nc.prototype.entrySet=function(){var t=new xc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Nc.successor(e));)t.add(e);return t},Nc.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Nc.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Nc.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Nc.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Nc.prototype.size=function(){return this.size_};var Ic=function(){};function Pc(){}function Lc(){this.array_=[],arguments[0]instanceof ic&&this.addAll(arguments[0])}Ic.prototype.interfaces_=function(){return[]},Ic.prototype.getClass=function(){return Ic},Pc.prototype=new _c,Lc.prototype=new Pc,Lc.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Lc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Lc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Lc.prototype.remove=function(t){throw new mc},Lc.prototype.size=function(){return this.array_.length},Lc.prototype.isEmpty=function(){return 0===this.array_.length},Lc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Lc.prototype.iterator=function(){return new Oc(this)};var Oc=function(t){this.treeSet_=t,this.position_=0};Oc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new uc;return this.treeSet_.array_[this.position_++]},Oc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Oc.prototype.remove=function(){throw new mc};var Rc=function(){};Rc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Rc.asList=function(t){for(var e=new lc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var kc=function(){},Tc={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Tc.P.get=function(){return 0},Tc.L.get=function(){return 1},Tc.A.get=function(){return 2},Tc.FALSE.get=function(){return-1},Tc.TRUE.get=function(){return-2},Tc.DONTCARE.get=function(){return-3},Tc.SYM_FALSE.get=function(){return"F"},Tc.SYM_TRUE.get=function(){return"T"},Tc.SYM_DONTCARE.get=function(){return"*"},Tc.SYM_P.get=function(){return"0"},Tc.SYM_L.get=function(){return"1"},Tc.SYM_A.get=function(){return"2"},kc.prototype.interfaces_=function(){return[]},kc.prototype.getClass=function(){return kc},kc.toDimensionSymbol=function(t){switch(t){case kc.FALSE:return kc.SYM_FALSE;case kc.TRUE:return kc.SYM_TRUE;case kc.DONTCARE:return kc.SYM_DONTCARE;case kc.P:return kc.SYM_P;case kc.L:return kc.SYM_L;case kc.A:return kc.SYM_A}throw new el("Unknown dimension value: "+t)},kc.toDimensionValue=function(t){switch(_l.toUpperCase(t)){case kc.SYM_FALSE:return kc.FALSE;case kc.SYM_TRUE:return kc.TRUE;case kc.SYM_DONTCARE:return kc.DONTCARE;case kc.SYM_P:return kc.P;case kc.SYM_L:return kc.L;case kc.SYM_A:return kc.A}throw new el("Unknown dimension symbol: "+t)},Object.defineProperties(kc,Tc);var Ac=function(){};Ac.prototype.filter=function(t){},Ac.prototype.interfaces_=function(){return[]},Ac.prototype.getClass=function(){return Ac};var Dc=function(){};Dc.prototype.filter=function(t,e){},Dc.prototype.isDone=function(){},Dc.prototype.isGeometryChanged=function(){},Dc.prototype.interfaces_=function(){return[]},Dc.prototype.getClass=function(){return Dc};var Fc=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new el("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Ll,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Rc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=kc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=kc.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Lc(Rc.asList(this._geometries)),r=new Lc(Rc.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[1],o=arguments[0],s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var l=t.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,i);if(0!==h)return h;u++}return u<s?1:u<a?-1:0}},e.prototype.apply=function(){var t=this;if(dl(arguments[0],Kl))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(dl(arguments[0],Dc)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(dl(arguments[0],Ac)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(dl(arguments[0],Wl)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),jl.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Hl),zc=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Hl.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kc.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new jc(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Ic]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Fc),jc=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=Jl.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};jc.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},jc.prototype.getBoundary=function(){return this._geom instanceof $c?this.boundaryLineString(this._geom):this._geom instanceof zc?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},jc.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},jc.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},jc.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new lc;this._endpointMap=new Nc;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue().count;e._bnRule.isInBoundary(a)&&n.add(s.getKey())}return fc.toCoordinateArray(n)},jc.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new qc,this._endpointMap.put(t,e)),e.count++},jc.prototype.interfaces_=function(){return[]},jc.prototype.getClass=function(){return jc},jc.getBoundary=function(){return 1===arguments.length?new jc(arguments[0]).getBoundary():2===arguments.length?new jc(arguments[0],arguments[1]).getBoundary():void 0};var qc=function(){this.count=null};function Gc(){}function Bc(){}qc.prototype.interfaces_=function(){return[]},qc.prototype.getClass=function(){return qc};var Uc=function(){};function Vc(){}function Xc(){}function Yc(){}var Wc=function(){},Hc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Wc.prototype.interfaces_=function(){return[]},Wc.prototype.getClass=function(){return Wc},Wc.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Wc.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new Vc,n=new Gc(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new Yc(new Bc(Wc.getStackTrace(r))),a=0;a<i;a++)try{o+=s.readLine()+Wc.NEWLINE}catch(t){if(!(t instanceof Xc))throw t;jl.shouldNeverReachHere()}return o}},Wc.split=function(t,e){for(var n=e.length,r=new lc,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Wc.toString=function(){if(1===arguments.length){var t=arguments[0];return Wc.SIMPLE_ORDINATE_FORMAT.format(t)}},Wc.spaces=function(t){return Wc.chars(" ",t)},Hc.NEWLINE.get=function(){return Il.getProperty("line.separator")},Hc.SIMPLE_ORDINATE_FORMAT.get=function(){return new Uc("0.#")},Object.defineProperties(Wc,Hc);var Qc=function(){};Qc.prototype.interfaces_=function(){return[]},Qc.prototype.getClass=function(){return Qc},Qc.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Qc.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Ml.X)===t.getOrdinate(e-1,Ml.X)&&t.getOrdinate(0,Ml.Y)===t.getOrdinate(e-1,Ml.Y)},Qc.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||nl.isNaN(s)&&nl.isNaN(a)))return!1}return!0},Qc.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Qc.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Qc.copy(e,i-1,r,o,1);return r},Qc.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Qc.swap(t,r,e-r)},Qc.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Qc.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Qc.copyCoord(t,e+o,n,r+o)},Qc.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new vl;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Wc.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Qc.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Qc.createClosedRing(t,e,4):e.getOrdinate(0,Ml.X)===e.getOrdinate(n-1,Ml.X)&&e.getOrdinate(0,Ml.Y)===e.getOrdinate(n-1,Ml.Y)?e:Qc.createClosedRing(t,e,n+1)},Qc.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Qc.copy(e,0,r,0,i);for(var o=i;o<n;o++)Qc.copy(e,0,r,o,1);return r};var $c=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ll:this._points.expandEnvelope(new Ll)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&Qc.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kc.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Xl.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Qc.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0,r=0;n<this._points.size()&&r<e._points.size();){var i=t._points.getCoordinate(n).compareTo(e._points.getCoordinate(r));if(0!==i)return i;n++,r++}return n<this._points.size()?1:r<e._points.size()?-1:0}if(2===arguments.length){var o=arguments[0];return arguments[1].compare(this._points,o._points)}},e.prototype.apply=function(){var t=this;if(dl(arguments[0],Kl))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(dl(arguments[0],Dc)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else(dl(arguments[0],Ac)||dl(arguments[0],Wl))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new jc(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new el("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Ic]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Hl),Kc=function(){};Kc.prototype.interfaces_=function(){return[]},Kc.prototype.getClass=function(){return Kc};var Jc=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ll;var t=new Ll;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return kc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(dl(arguments[0],Kl)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(dl(arguments[0],Dc)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(dl(arguments[0],Ac)||dl(arguments[0],Wl))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),jl.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Hl),Zc=function(){};Zc.prototype.interfaces_=function(){return[]},Zc.prototype.getClass=function(){return Zc};var th=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new el("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new el("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(Xl.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(Xl.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,s=i._shell;if(!o.equalsExact(s,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Rc.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Il.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=fc.minCoordinate(n.getCoordinates());fc.scroll(i,o),Il.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],Xl.isCCW(n.getCoordinates())===r&&fc.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[1],o=arguments[0],s=this._shell,a=o._shell,u=s.compareToSameClass(a,i);if(0!==u)return u;for(var l=this.getNumInteriorRing(),c=o.getNumInteriorRing(),h=0;h<l&&h<c;){var f=t.getInteriorRingN(h),p=o.getInteriorRingN(h),d=f.compareToSameClass(p,i);if(0!==d)return d;h++}return h<l?1:h<c?-1:0}},e.prototype.apply=function(t){var e=this;if(dl(t,Kl)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(dl(t,Dc)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(dl(t,Ac))t.filter(this);else if(dl(t,Wl)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Hl),eh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Hl.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return kc.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Fc),nh=function(t){function e(e,n){e instanceof ul&&n instanceof mh&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Hl.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return kc.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Qc.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new el("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new el("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}($c),rh=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Hl.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new lc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Fc),ih=function(t){this._factory=t||null,this._isUserDataCopied=!1},oh={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};ih.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},ih.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},ih.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Fc?this.editGeometryCollection(t,e):t instanceof th?this.editPolygon(t,e):t instanceof Jc||t instanceof $c?e.edit(t,this._factory):(jl.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},ih.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new lc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===eh?this._factory.createMultiPoint(r.toArray([])):n.getClass()===zc?this._factory.createMultiLineString(r.toArray([])):n.getClass()===rh?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},ih.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new lc,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||i.add(s)}return this._factory.createPolygon(r,i.toArray([]))},ih.prototype.interfaces_=function(){return[]},ih.prototype.getClass=function(){return ih},ih.GeometryEditorOperation=function(){},oh.NoOpGeometryOperation.get=function(){return sh},oh.CoordinateOperation.get=function(){return ah},oh.CoordinateSequenceOperation.get=function(){return uh},Object.defineProperties(ih,oh);var sh=function(){};sh.prototype.edit=function(t,e){return t},sh.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},sh.prototype.getClass=function(){return sh};var ah=function(){};ah.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof nh?e.createLinearRing(n):t instanceof $c?e.createLineString(n):t instanceof Jc?n.length>0?e.createPoint(n[0]):e.createPoint():t},ah.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},ah.prototype.getClass=function(){return ah};var uh=function(){};uh.prototype.edit=function(t,e){return t instanceof nh?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof $c?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jc?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},uh.prototype.interfaces_=function(){return[ih.GeometryEditorOperation]},uh.prototype.getClass=function(){return uh};var lh=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new ul}else if(dl(arguments[0],Ml)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)t._coordinates[l]=new ul}},ch={serialVersionUID:{configurable:!0}};lh.prototype.setOrdinate=function(t,e,n){switch(e){case Ml.X:this._coordinates[t].x=n;break;case Ml.Y:this._coordinates[t].y=n;break;case Ml.Z:this._coordinates[t].z=n;break;default:throw new el("invalid ordinateIndex")}},lh.prototype.size=function(){return this._coordinates.length},lh.prototype.getOrdinate=function(t,e){switch(e){case Ml.X:return this._coordinates[t].x;case Ml.Y:return this._coordinates[t].y;case Ml.Z:return this._coordinates[t].z}return nl.NaN},lh.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},lh.prototype.getCoordinateCopy=function(t){return new ul(this._coordinates[t])},lh.prototype.getDimension=function(){return this._dimension},lh.prototype.getX=function(t){return this._coordinates[t].x},lh.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new lh(t,this._dimension)},lh.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},lh.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new lh(t,this._dimension)},lh.prototype.toString=function(){if(this._coordinates.length>0){var t=new vl(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},lh.prototype.getY=function(t){return this._coordinates[t].y},lh.prototype.toCoordinateArray=function(){return this._coordinates},lh.prototype.interfaces_=function(){return[Ml,al]},lh.prototype.getClass=function(){return lh},ch.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(lh,ch);var hh=function(){},fh={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};hh.prototype.readResolve=function(){return hh.instance()},hh.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new lh(arguments[0]);if(dl(arguments[0],Ml))return new lh(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new lh(t):new lh(t,e)}},hh.prototype.interfaces_=function(){return[hl,al]},hh.prototype.getClass=function(){return hh},hh.instance=function(){return hh.instanceObject},fh.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},fh.instanceObject.get=function(){return new hh},Object.defineProperties(hh,fh);var ph=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new lc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new xc;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(yc),dh=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof yh){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},gh={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};dh.prototype.equals=function(t){if(!(t instanceof dh))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},dh.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new ml(n).compareTo(new ml(r))},dh.prototype.getScale=function(){return this._scale},dh.prototype.isFloating=function(){return this._modelType===dh.FLOATING||this._modelType===dh.FLOATING_SINGLE},dh.prototype.getType=function(){return this._modelType},dh.prototype.toString=function(){var t="UNKNOWN";return this._modelType===dh.FLOATING?t="Floating":this._modelType===dh.FLOATING_SINGLE?t="Floating-Single":this._modelType===dh.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},dh.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return nl.isNaN(t)||this._modelType===dh.FLOATING_SINGLE?t:this._modelType===dh.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ul){var e=arguments[0];if(this._modelType===dh.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},dh.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===dh.FLOATING?t=16:this._modelType===dh.FLOATING_SINGLE?t=6:this._modelType===dh.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},dh.prototype.setScale=function(t){this._scale=Math.abs(t)},dh.prototype.interfaces_=function(){return[al,il]},dh.prototype.getClass=function(){return dh},dh.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},gh.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},gh.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(dh,gh);var yh=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},vh={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};yh.prototype.readResolve=function(){return yh.nameToTypeMap.get(this._name)},yh.prototype.toString=function(){return this._name},yh.prototype.interfaces_=function(){return[al]},yh.prototype.getClass=function(){return yh},vh.serialVersionUID.get=function(){return-552860263173159e4},vh.nameToTypeMap.get=function(){return new ph},Object.defineProperties(yh,vh),dh.Type=yh,dh.FIXED=new yh("FIXED"),dh.FLOATING=new yh("FLOATING"),dh.FLOATING_SINGLE=new yh("FLOATING SINGLE");var mh=function t(){this._precisionModel=new dh,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?dl(arguments[0],hl)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof dh&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},_h={serialVersionUID:{configurable:!0}};mh.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ul(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ul(t.getMinX(),t.getMinY()),new ul(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ul(t.getMinX(),t.getMinY()),new ul(t.getMinX(),t.getMaxY()),new ul(t.getMaxX(),t.getMaxY()),new ul(t.getMaxX(),t.getMinY()),new ul(t.getMinX(),t.getMinY())]),null)},mh.prototype.createLineString=function(t){return t?t instanceof Array?new $c(this.getCoordinateSequenceFactory().create(t),this):dl(t,Ml)?new $c(t,this):void 0:new $c(this.getCoordinateSequenceFactory().create([]),this)},mh.prototype.createMultiLineString=function(){return 0===arguments.length?new zc(null,this):1===arguments.length?new zc(arguments[0],this):void 0},mh.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(mh.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof th)return this.createMultiPolygon(mh.toPolygonArray(t));if(a instanceof $c)return this.createMultiLineString(mh.toLineStringArray(t));if(a instanceof Jc)return this.createMultiPoint(mh.toPointArray(t));jl.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},mh.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},mh.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ul){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(dl(arguments[0],Ml))return new Jc(arguments[0],this)}},mh.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},mh.prototype.createPolygon=function(){if(0===arguments.length)return new th(null,null,this);if(1===arguments.length){if(dl(arguments[0],Ml)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof nh){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new th(arguments[0],arguments[1],this)},mh.prototype.getSRID=function(){return this._SRID},mh.prototype.createGeometryCollection=function(){return 0===arguments.length?new Fc(null,this):1===arguments.length?new Fc(arguments[0],this):void 0},mh.prototype.createGeometry=function(t){return new ih(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},mh.prototype.getPrecisionModel=function(){return this._precisionModel},mh.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(dl(arguments[0],Ml))return new nh(arguments[0],this)}},mh.prototype.createMultiPolygon=function(){return 0===arguments.length?new rh(null,this):1===arguments.length?new rh(arguments[0],this):void 0},mh.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new eh(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new eh(arguments[0],this);if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(dl(arguments[0],Ml)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),i=0;i<n.size();i++){var o=t.getCoordinateSequenceFactory().create(1,n.getDimension());Qc.copy(n,i,o,0,1),r[i]=t.createPoint(o)}return this.createMultiPoint(r)}}},mh.prototype.interfaces_=function(){return[al]},mh.prototype.getClass=function(){return mh},mh.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.getDefaultCoordinateSequenceFactory=function(){return hh.instance()},mh.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},mh.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},_h.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(mh,_h);var xh=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],bh=function(t){this.geometryFactory=t||new mh};bh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Eh[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==xh.indexOf(n)?Eh[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Eh[n].apply(this,[e.geometries]):Eh[n].apply(this,[e])},bh.prototype.write=function(t){var e=t.getGeometryType();if(!wh[e])throw new Error("Geometry is not supported");return wh[e].apply(this,[t])};var Eh={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Eh[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Eh.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new ul(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ul(t[0],t[1]),new ul(t[2],t[1]),new ul(t[2],t[3]),new ul(t[0],t[3]),new ul(t[0],t[1])])},Point:function(t){var e=new ul(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Eh.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Eh.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Eh.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=Eh.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Eh.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},wh={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:wh.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(wh.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=wh.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=wh.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=wh.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(wh[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Mh=function(t){this.geometryFactory=t||new mh,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bh(this.geometryFactory)};Mh.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===dh.FIXED&&this.reducePrecision(e),e},Mh.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Sh=function(){this.parser=new bh(this.geometryFactory)};Sh.prototype.write=function(t){return this.parser.write(t)};var Ch=function(){},Nh={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Ih(t){this.message=t||""}function Ph(){this.array_=[]}Ch.prototype.interfaces_=function(){return[]},Ch.prototype.getClass=function(){return Ch},Ch.opposite=function(t){return t===Ch.LEFT?Ch.RIGHT:t===Ch.RIGHT?Ch.LEFT:t},Nh.ON.get=function(){return 0},Nh.LEFT.get=function(){return 1},Nh.RIGHT.get=function(){return 2},Object.defineProperties(Ch,Nh),Ih.prototype=new Error,Ih.prototype.name="EmptyStackException",Ph.prototype=new ac,Ph.prototype.add=function(t){return this.array_.push(t),!0},Ph.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Ph.prototype.push=function(t){return this.array_.push(t),t},Ph.prototype.pop=function(t){if(0===this.array_.length)throw new Ih;return this.array_.pop()},Ph.prototype.peek=function(){if(0===this.array_.length)throw new Ih;return this.array_[this.array_.length-1]},Ph.prototype.empty=function(){return 0===this.array_.length},Ph.prototype.isEmpty=function(){return this.empty()},Ph.prototype.search=function(t){return this.array_.indexOf(t)},Ph.prototype.size=function(){return this.array_.length},Ph.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Lh=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Lh.prototype.getCoordinate=function(){return this._minCoord},Lh.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Lh.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();jl.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Xl.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Xl.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Xl.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Lh.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ch.LEFT;return n[e].y<n[e+1].y&&(r=Ch.RIGHT),r},Lh.prototype.getEdge=function(){return this._orientedDe},Lh.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},Lh.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Lh.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}jl.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ch.LEFT&&(this._orientedDe=this._minDe.getSym())},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var Oh=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new ul(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Fl),Rh=function(){this.array_=[]};Rh.prototype.addLast=function(t){this.array_.push(t)},Rh.prototype.removeFirst=function(){return this.array_.shift()},Rh.prototype.isEmpty=function(){return 0===this.array_.length};var kh=function(){this._finder=null,this._dirEdgeList=new lc,this._nodes=new lc,this._rightMostCoord=null,this._env=null,this._finder=new Lh};kh.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},kh.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},kh.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Oh("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},kh.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ch.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},kh.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},kh.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ch.RIGHT)>=1&&e.getDepth(Ch.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},kh.prototype.computeDepths=function(t){var e=new xc,n=new Rh,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},kh.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},kh.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Ll,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},kh.prototype.addReachable=function(t){var e=new Ph;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},kh.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ch.LEFT,t.getDepth(Ch.RIGHT)),e.setDepth(Ch.RIGHT,t.getDepth(Ch.LEFT))},kh.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},kh.prototype.getNodes=function(){return this._nodes},kh.prototype.getDirectedEdges=function(){return this._dirEdgeList},kh.prototype.interfaces_=function(){return[il]},kh.prototype.getClass=function(){return kh};var Th=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Ch.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];this.init(3),this.location[Ch.ON]=s,this.location[Ch.LEFT]=a,this.location[Ch.RIGHT]=u}};Th.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Th.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==fl.NONE)return!1;return!0},Th.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===fl.NONE&&(this.location[e]=t)},Th.prototype.isLine=function(){return 1===this.location.length},Th.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ch.ON]=this.location[Ch.ON],e[Ch.LEFT]=fl.NONE,e[Ch.RIGHT]=fl.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===fl.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Th.prototype.getLocations=function(){return this.location},Th.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ch.LEFT];this.location[Ch.LEFT]=this.location[Ch.RIGHT],this.location[Ch.RIGHT]=t},Th.prototype.toString=function(){var t=new vl;return this.location.length>1&&t.append(fl.toLocationSymbol(this.location[Ch.LEFT])),t.append(fl.toLocationSymbol(this.location[Ch.ON])),this.location.length>1&&t.append(fl.toLocationSymbol(this.location[Ch.RIGHT])),t.toString()},Th.prototype.setLocations=function(t,e,n){this.location[Ch.ON]=t,this.location[Ch.LEFT]=e,this.location[Ch.RIGHT]=n},Th.prototype.get=function(t){return t<this.location.length?this.location[t]:fl.NONE},Th.prototype.isArea=function(){return this.location.length>1},Th.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===fl.NONE)return!0;return!1},Th.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ch.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Th.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(fl.NONE)},Th.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Th.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var Ah=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Th(e),this.elt[1]=new Th(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Th(n.elt[0]),this.elt[1]=new Th(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Th(fl.NONE),this.elt[1]=new Th(fl.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Th(o,s,a),this.elt[1]=new Th(o,s,a)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];this.elt[0]=new Th(fl.NONE,fl.NONE,fl.NONE),this.elt[1]=new Th(fl.NONE,fl.NONE,fl.NONE),this.elt[u].setLocations(l,c,h)}};Ah.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ah.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ah.prototype.isNull=function(t){return this.elt[t].isNull()},Ah.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Ah.prototype.isLine=function(t){return this.elt[t].isLine()},Ah.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new Th(t.elt[n]):e.elt[n].merge(t.elt[n])},Ah.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ah.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ch.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Ah.prototype.toString=function(){var t=new vl;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ah.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ah.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ah.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ch.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Ah.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ah.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ah.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Th(this.elt[t].location[0]))},Ah.prototype.interfaces_=function(){return[]},Ah.prototype.getClass=function(){return Ah},Ah.toLineLabel=function(t){for(var e=new Ah(fl.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Dh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new lc,this._pts=new lc,this._label=new Ah(fl.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new lc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Dh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Xl.isCCW(this._ring.getCoordinates())},Dh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Dh.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Oh("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Oh("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();jl.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Dh.prototype.getLinearRing=function(){return this._ring},Dh.prototype.getCoordinate=function(t){return this._pts.get(t)},Dh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Dh.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}},Dh.prototype.isHole=function(){return this._isHole},Dh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Dh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Xl.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Dh.prototype.addHole=function(t){this._holes.add(t)},Dh.prototype.isShell=function(){return null===this._shell},Dh.prototype.getLabel=function(){return this._label},Dh.prototype.getEdges=function(){return this._edges},Dh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Dh.prototype.getShell=function(){return this._shell},Dh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ch.RIGHT);if(n===fl.NONE)return null;if(this._label.getLocation(e)===fl.NONE)return this._label.setLocation(e,n),null}},Dh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Dh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Dh.prototype.interfaces_=function(){return[]},Dh.prototype.getClass=function(){return Dh};var Fh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dh),zh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new lc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Fh(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dh),jh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};jh.prototype.setVisited=function(t){this._isVisited=t},jh.prototype.setInResult=function(t){this._isInResult=t},jh.prototype.isCovered=function(){return this._isCovered},jh.prototype.isCoveredSet=function(){return this._isCoveredSet},jh.prototype.setLabel=function(t){this._label=t},jh.prototype.getLabel=function(){return this._label},jh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},jh.prototype.updateIM=function(t){jl.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},jh.prototype.isInResult=function(){return this._isInResult},jh.prototype.isVisited=function(){return this._isVisited},jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh};var qh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Ah(0,fl.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=fl.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==fl.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Ah(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Ah)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i);t._label.getLocation(i)===fl.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=fl.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case fl.BOUNDARY:n=fl.INTERIOR;break;case fl.INTERIOR:default:n=fl.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jh),Gh=function(){this.nodeMap=new Nc,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Gh.prototype.find=function(t){return this.nodeMap.get(t)},Gh.prototype.addNode=function(){if(arguments[0]instanceof ul){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof qh){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Gh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Gh.prototype.iterator=function(){return this.nodeMap.values().iterator()},Gh.prototype.values=function(){return this.nodeMap.values()},Gh.prototype.getBoundaryNodes=function(t){for(var e=new lc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===fl.BOUNDARY&&e.add(r)}return e},Gh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh};var Bh=function(){},Uh={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh},Bh.isNorthern=function(t){return t===Bh.NE||t===Bh.NW},Bh.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Bh.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Bh.isInHalfPlane=function(t,e){return e===Bh.SE?t===Bh.SE||t===Bh.SW:t===e||t===e+1},Bh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new el("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Bh.NE:Bh.SE:e>=0?Bh.NW:Bh.SW}if(arguments[0]instanceof ul&&arguments[1]instanceof ul){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new el("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Bh.NE:Bh.SE:r.y>=n.y?Bh.NW:Bh.SW}},Uh.NE.get=function(){return 0},Uh.NW.get=function(){return 1},Uh.SW.get=function(){return 2},Uh.SE.get=function(){return 3},Object.defineProperties(Bh,Uh);var Vh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Vh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Xl.computeOrientation(t._p0,t._p1,this._p1)},Vh.prototype.getDy=function(){return this._dy},Vh.prototype.getCoordinate=function(){return this._p0},Vh.prototype.setNode=function(t){this._node=t},Vh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Vh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Vh.prototype.getDirectedCoordinate=function(){return this._p1},Vh.prototype.getDx=function(){return this._dx},Vh.prototype.getLabel=function(){return this._label},Vh.prototype.getEdge=function(){return this._edge},Vh.prototype.getQuadrant=function(){return this._quadrant},Vh.prototype.getNode=function(){return this._node},Vh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Vh.prototype.computeLabel=function(t){},Vh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Bh.quadrant(this._dx,this._dy),jl.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Vh.prototype.interfaces_=function(){return[il]},Vh.prototype.getClass=function(){return Vh};var Xh=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ah(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oh("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Ch.LEFT)===fl.INTERIOR&&t._label.getLocation(n,Ch.RIGHT)===fl.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ch.LEFT]+"/"+this._depth[Ch.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,fl.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,fl.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ch.LEFT&&(r=-1);var i=Ch.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===fl.EXTERIOR&&e===fl.INTERIOR?1:t===fl.INTERIOR&&e===fl.EXTERIOR?-1:0},e}(Vh),Yh=function(){};Yh.prototype.createNode=function(t){return new qh(t,null)},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh};var Wh=function(){if(this._edges=new lc,this._nodes=null,this._edgeEndList=new lc,0===arguments.length)this._nodes=new Gh(new Yh);else if(1===arguments.length){var t=arguments[0];this._nodes=new Gh(t)}};Wh.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Wh.prototype.find=function(t){return this._nodes.find(t)},Wh.prototype.addNode=function(){if(arguments[0]instanceof qh){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof ul){var e=arguments[0];return this._nodes.addNode(e)}},Wh.prototype.getNodeIterator=function(){return this._nodes.iterator()},Wh.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Wh.prototype.debugPrintln=function(t){Il.out.println(t)},Wh.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===fl.BOUNDARY},Wh.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Wh.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&Xl.computeOrientation(t,e,r)===Xl.COLLINEAR&&Bh.quadrant(t,e)===Bh.quadrant(n,r)},Wh.prototype.getEdgeEnds=function(){return this._edgeEndList},Wh.prototype.debugPrint=function(t){Il.out.print(t)},Wh.prototype.getEdgeIterator=function(){return this._edges.iterator()},Wh.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Wh.prototype.insertEdge=function(t){this._edges.add(t)},Wh.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Wh.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Xh(r,!0),o=new Xh(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Wh.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Wh.prototype.getNodes=function(){return this._nodes.values()},Wh.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh},Wh.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Hh=function(){this._geometryFactory=null,this._shellList=new lc;var t=arguments[0];this._geometryFactory=t};Hh.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Hh.prototype.computePolygons=function(t){for(var e=new lc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Hh.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Oh("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Hh.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new lc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r},Hh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Hh.prototype.buildMaximalEdgeRings=function(t){for(var e=new lc,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new zh(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Hh.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Hh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Hh.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(r)&&Xl.isPointInRing(i,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},Hh.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return jl.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Hh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Wh.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new lc,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Hh.prototype.interfaces_=function(){return[]},Hh.prototype.getClass=function(){return Hh};var Qh=function(){};Qh.prototype.getBounds=function(){},Qh.prototype.interfaces_=function(){return[]},Qh.prototype.getClass=function(){return Qh};var $h=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};$h.prototype.getItem=function(){return this._item},$h.prototype.getBounds=function(){return this._bounds},$h.prototype.interfaces_=function(){return[Qh,al]},$h.prototype.getClass=function(){return $h};var Kh=function(){this._size=null,this._items=null,this._size=0,this._items=new lc,this._items.add(null)};Kh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Kh.prototype.size=function(){return this._size},Kh.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},Kh.prototype.clear=function(){this._size=0,this._items.clear()},Kh.prototype.isEmpty=function(){return 0===this._size},Kh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh};var Jh=function(){};Jh.prototype.visitItem=function(t){},Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh};var Zh=function(){};Zh.prototype.insert=function(t,e){},Zh.prototype.remove=function(t,e){},Zh.prototype.query=function(){},Zh.prototype.interfaces_=function(){return[]},Zh.prototype.getClass=function(){return Zh};var tf=function(){if(this._childBoundables=new lc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},ef={serialVersionUID:{configurable:!0}};tf.prototype.getLevel=function(){return this._level},tf.prototype.size=function(){return this._childBoundables.size()},tf.prototype.getChildBoundables=function(){return this._childBoundables},tf.prototype.addChildBoundable=function(t){jl.isTrue(null===this._bounds),this._childBoundables.add(t)},tf.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},tf.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},tf.prototype.interfaces_=function(){return[Qh,al]},tf.prototype.getClass=function(){return tf},ef.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(tf,ef);var nf=function(){};nf.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},nf.min=function(t){return nf.sort(t),t.get(0)},nf.sort=function(t,e){var n=t.toArray();e?Rc.sort(n,e):Rc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},nf.singletonList=function(t){var e=new lc;return e.add(t),e};var rf=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};rf.prototype.expandToQueue=function(t,e){var n=rf.isComposite(this._boundable1),r=rf.isComposite(this._boundable2);if(n&&r)return rf.area(this._boundable1)>rf.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new el("neither boundable is composite")},rf.prototype.isLeaves=function(){return!(rf.isComposite(this._boundable1)||rf.isComposite(this._boundable2))},rf.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},rf.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),s=new rf(o,e,this._itemDistance);s.getDistance()<r&&n.add(s)}},rf.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},rf.prototype.getDistance=function(){return this._distance},rf.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},rf.prototype.interfaces_=function(){return[il]},rf.prototype.getClass=function(){return rf},rf.area=function(t){return t.getBounds().getArea()},rf.isComposite=function(t){return t instanceof tf};var of=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new lc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];jl.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},sf={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};of.prototype.getNodeCapacity=function(){return this._nodeCapacity},of.prototype.lastNode=function(t){return t.get(t.size()-1)},of.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof tf?e+=t.size(r):r instanceof $h&&(e+=1)}return e}},of.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof $h&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},of.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new lc:e}if(1===arguments.length){for(var n=arguments[0],r=new lc,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof tf){var s=t.itemsTree(o);null!==s&&r.add(s)}else o instanceof $h?r.add(o.getItem()):jl.shouldNeverReachHere()}return r.size()<=0?null:r}},of.prototype.insert=function(t,e){jl.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new $h(t,e))},of.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new lc;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(jl.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof tf?t.boundablesAtLevel(r,a,o):(jl.isTrue(a instanceof $h),-1===r&&o.add(a))}return null}},of.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new lc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(dl(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);t.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof tf?t.query(o,l,s):l instanceof $h?s.visitItem(l.getItem()):jl.shouldNeverReachHere())}else if(dl(arguments[2],ac)&&arguments[0]instanceof Object&&arguments[1]instanceof tf)for(var c=arguments[0],h=arguments[2],f=arguments[1].getChildBoundables(),p=0;p<f.size();p++){var d=f.get(p);t.getIntersectsOp().intersects(d.getBounds(),c)&&(d instanceof tf?t.query(c,d,h):d instanceof $h?h.add(d.getItem()):jl.shouldNeverReachHere())}},of.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},of.prototype.getRoot=function(){return this.build(),this._root},of.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var l=u.next();if(t.getIntersectsOp().intersects(l.getBounds(),r)&&l instanceof tf&&(s=t.remove(r,l,o))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},of.prototype.createHigherLevels=function(t,e){jl.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},of.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,n=arguments[0].getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof tf){var i=t.depth(r);i>e&&(e=i)}}return e+1}},of.prototype.createParentBoundables=function(t,e){var n=this;jl.isTrue(!t.isEmpty());var r=new lc;r.add(this.createNode(e));var i=new lc(t);nf.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},of.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},of.prototype.interfaces_=function(){return[al]},of.prototype.getClass=function(){return of},of.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},sf.IntersectsOp.get=function(){return af},sf.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},sf.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(of,sf);var af=function(){},uf=function(){};uf.prototype.distance=function(t,e){},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var lf=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){jl.isTrue(t.length>0);for(var n=new lc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new cf(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new lc;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(dl(arguments[2],Jh)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(dl(arguments[2],ac)&&arguments[0]instanceof Object&&arguments[1]instanceof tf){var a=arguments[0],u=arguments[1],l=arguments[2];t.prototype.query.call(this,a,u,l)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){jl.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new lc(t);nf.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(dl(arguments[0],uf)){var t=arguments[0],n=new rf(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof rf){var r=arguments[0];return this.nearestNeighbour(r,nl.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&dl(arguments[1],uf)){var i=arguments[0],o=arguments[1],s=new rf(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof rf&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],l=null,c=new Kh;for(c.add(a);!c.isEmpty()&&u>0;){var h=c.poll(),f=h.getDistance();if(f>=u)break;h.isLeaves()?(u=f,l=h):h.expandToQueue(c,u)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var p=arguments[2],d=new $h(arguments[0],arguments[1]),g=new rf(this.getRoot(),d,p);return this.nearestNeighbour(g)[0]}},e.prototype.interfaces_=function(){return[Zh,al]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return cf},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[sl]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[sl]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(of),cf=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Ll(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tf),hf=function(){};hf.prototype.interfaces_=function(){return[]},hf.prototype.getClass=function(){return hf},hf.relativeSign=function(t,e){return t<e?-1:t>e?1:0},hf.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=hf.relativeSign(e.x,n.x),i=hf.relativeSign(e.y,n.y);switch(t){case 0:return hf.compareValue(r,i);case 1:return hf.compareValue(i,r);case 2:return hf.compareValue(i,-r);case 3:return hf.compareValue(-r,i);case 4:return hf.compareValue(-r,-i);case 5:return hf.compareValue(-i,-r);case 6:return hf.compareValue(-i,r);case 7:return hf.compareValue(r,-i)}return jl.shouldNeverReachHere("invalid octant value"),0},hf.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ff=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new ul(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ff.prototype.getCoordinate=function(){return this.coord},ff.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ff.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:hf.compare(this._segmentOctant,this.coord,e.coord)},ff.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ff.prototype.isInterior=function(){return this._isInterior},ff.prototype.interfaces_=function(){return[il]},ff.prototype.getClass=function(){return ff};var pf=function(){this._nodeMap=new Nc,this._edge=null;var t=arguments[0];this._edge=t};pf.prototype.getSplitCoordinates=function(){var t=new hc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},pf.prototype.addCollapsedNodes=function(){var t=new lc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},pf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},pf.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new ml(e+1))}},pf.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new ul(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new ul(e.coord))},pf.prototype.iterator=function(){return this._nodeMap.values().iterator()},pf.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},pf.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},pf.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new ml(e[0])),r=i}},pf.prototype.getEdge=function(){return this._edge},pf.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},pf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new ul(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new ul(e.coord)),new vf(o,this._edge.getData())},pf.prototype.add=function(t,e){var n=new ff(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(jl.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},pf.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Fl("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Fl("bad split edge end point at "+i)},pf.prototype.interfaces_=function(){return[]},pf.prototype.getClass=function(){return pf};var df=function(){};df.prototype.interfaces_=function(){return[]},df.prototype.getClass=function(){return df},df.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new el("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof ul&&arguments[1]instanceof ul){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new el("Cannot compute the octant for two identical points "+i);return df.octant(s,a)}};var gf=function(){};gf.prototype.getCoordinates=function(){},gf.prototype.size=function(){},gf.prototype.getCoordinate=function(t){},gf.prototype.isClosed=function(){},gf.prototype.setData=function(t){},gf.prototype.getData=function(){},gf.prototype.interfaces_=function(){return[]},gf.prototype.getClass=function(){return gf};var yf=function(){};yf.prototype.addIntersection=function(t,e){},yf.prototype.interfaces_=function(){return[gf]},yf.prototype.getClass=function(){return yf};var vf=function(){this._nodeList=new pf(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};vf.prototype.getCoordinates=function(){return this._pts},vf.prototype.size=function(){return this._pts.length},vf.prototype.getCoordinate=function(t){return this._pts[t]},vf.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},vf.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},vf.prototype.setData=function(t){this._data=t},vf.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:df.octant(t,e)},vf.prototype.getData=function(){return this._data},vf.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new ul(arguments[0].getIntersection(r));this.addIntersection(i,n)}},vf.prototype.toString=function(){return Dl.toLineString(new lh(this._pts))},vf.prototype.getNodeList=function(){return this._nodeList},vf.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},vf.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},vf.prototype.interfaces_=function(){return[yf]},vf.prototype.getClass=function(){return vf},vf.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new lc;return vf.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var mf=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ul,this.p1=new ul;else if(1===arguments.length){var t=arguments[0];this.p0=new ul(t.p0),this.p1=new ul(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new ul(e,n),this.p1=new ul(r,i)}},_f={serialVersionUID:{configurable:!0}};mf.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},mf.prototype.orientationIndex=function(){if(arguments[0]instanceof mf){var t=arguments[0],e=Xl.orientationIndex(this.p0,this.p1,t.p0),n=Xl.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof ul){var r=arguments[0];return Xl.orientationIndex(this.p0,this.p1,r)}},mf.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},mf.prototype.isVertical=function(){return this.p0.x===this.p1.x},mf.prototype.equals=function(t){if(!(t instanceof mf))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},mf.prototype.intersection=function(t){var e=new Bl;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},mf.prototype.project=function(){if(arguments[0]instanceof ul){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ul(t);var e=this.projectionFactor(t),n=new ul;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof mf){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new mf(s,a)}},mf.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},mf.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},mf.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},mf.prototype.distancePerpendicular=function(t){return Xl.distancePointLinePerpendicular(t,this.p0,this.p1)},mf.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},mf.prototype.midPoint=function(){return mf.midPoint(this.p0,this.p1)},mf.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?nl.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},mf.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=nl.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},mf.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},mf.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},mf.prototype.getLength=function(){return this.p0.distance(this.p1)},mf.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},mf.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},mf.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},mf.prototype.lineIntersection=function(t){try{return Pl.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Nl))throw t}return null},mf.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},mf.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new ul(n-u,r+a)},mf.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},mf.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||nl.isNaN(e))&&(e=1),e},mf.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},mf.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},mf.prototype.distance=function(){if(arguments[0]instanceof mf){var t=arguments[0];return Xl.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ul){var e=arguments[0];return Xl.distancePointLine(e,this.p0,this.p1)}},mf.prototype.pointAlong=function(t){var e=new ul;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},mf.prototype.hashCode=function(){var t=nl.doubleToLongBits(this.p0.x);t^=31*nl.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=nl.doubleToLongBits(this.p1.x);return n^=31*nl.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},mf.prototype.interfaces_=function(){return[il,al]},mf.prototype.getClass=function(){return mf},mf.midPoint=function(t,e){return new ul((t.x+e.x)/2,(t.y+e.y)/2)},_f.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(mf,_f);var xf=function(){this.tempEnv1=new Ll,this.tempEnv2=new Ll,this._overlapSeg1=new mf,this._overlapSeg2=new mf};xf.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var bf=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};bf.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},bf.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},bf.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},bf.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},bf.prototype.setId=function(t){this._id=t},bf.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},bf.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Ll(t,e)}return this._env},bf.prototype.getEndIndex=function(){return this._end},bf.prototype.getStartIndex=function(){return this._start},bf.prototype.getContext=function(){return this._context},bf.prototype.getId=function(){return this._id},bf.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],l=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<c&&(r<h&&this.computeOverlapsInternal(t,c,n,r,h,o),h<i&&this.computeOverlapsInternal(t,c,n,h,i,o)),c<e&&(r<h&&this.computeOverlapsInternal(c,e,n,r,h,o),h<i&&this.computeOverlapsInternal(c,e,n,h,i,o))},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var Ef=function(){};Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Ef.getChainStartIndices=function(t){var e=0,n=new lc;n.add(new ml(e));do{var r=Ef.findChainEnd(t,e);n.add(new ml(r)),e=r}while(e<t.length-1);return Ef.toIntArray(n)},Ef.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Bh.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Bh.quadrant(t[i-1],t[i])===r);)i++;return i-1},Ef.getChains=function(){if(1===arguments.length){var t=arguments[0];return Ef.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new lc,i=Ef.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new bf(e,i[o],i[o+1],n);r.add(s)}return r}},Ef.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var wf=function(){};wf.prototype.computeNodes=function(t){},wf.prototype.getNodedSubstrings=function(){},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf};var Mf=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};Mf.prototype.setSegmentIntersector=function(t){this._segInt=t},Mf.prototype.interfaces_=function(){return[wf]},Mf.prototype.getClass=function(){return Mf};var Sf=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new lc,this._index=new lf,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return vf.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=Ef.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Cf(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Cf},Object.defineProperties(e,n),e}(Mf),Cf=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xf),Nf=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}},If={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Nf.prototype.getEndCapStyle=function(){return this._endCapStyle},Nf.prototype.isSingleSided=function(){return this._isSingleSided},Nf.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Nf.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Nf.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Nf.JOIN_ROUND&&(this._quadrantSegments=Nf.DEFAULT_QUADRANT_SEGMENTS)},Nf.prototype.getJoinStyle=function(){return this._joinStyle},Nf.prototype.setJoinStyle=function(t){this._joinStyle=t},Nf.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Nf.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Nf.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Nf.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Nf.prototype.getMitreLimit=function(){return this._mitreLimit},Nf.prototype.setMitreLimit=function(t){this._mitreLimit=t},Nf.prototype.setSingleSided=function(t){this._isSingleSided=t},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Nf.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},If.CAP_ROUND.get=function(){return 1},If.CAP_FLAT.get=function(){return 2},If.CAP_SQUARE.get=function(){return 3},If.JOIN_ROUND.get=function(){return 1},If.JOIN_MITRE.get=function(){return 2},If.JOIN_BEVEL.get=function(){return 3},If.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},If.DEFAULT_MITRE_LIMIT.get=function(){return 5},If.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Nf,If);var Pf=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Xl.COUNTERCLOCKWISE,this._inputLine=t||null},Lf={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Pf.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)},Pf.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Pf.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},Pf.prototype.isShallowConcavity=function(t,e,n,r){return Xl.computeOrientation(t,e,n)===this._angleOrientation&&Xl.distancePointLine(e,t,n)<r},Pf.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Pf.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0},Pf.prototype.isConcave=function(t,e,n){return Xl.computeOrientation(t,e,n)===this._angleOrientation},Pf.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Xl.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Pf.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Pf.DELETE;)e++;return e},Pf.prototype.isShallow=function(t,e,n,r){return Xl.distancePointLine(e,t,n)<r},Pf.prototype.collapseLine=function(){for(var t=new hc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Pf.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Pf.prototype.interfaces_=function(){return[]},Pf.prototype.getClass=function(){return Pf},Pf.simplify=function(t,e){return new Pf(t).simplify(e)},Lf.INIT.get=function(){return 0},Lf.DELETE.get=function(){return 1},Lf.KEEP.get=function(){return 1},Lf.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Pf,Lf);var Of=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new lc},Rf={COORDINATE_ARRAY_TYPE:{configurable:!0}};Of.prototype.getCoordinates=function(){return this._ptList.toArray(Of.COORDINATE_ARRAY_TYPE)},Of.prototype.setPrecisionModel=function(t){this._precisionModel=t},Of.prototype.addPt=function(t){var e=new ul(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Of.prototype.revere=function(){},Of.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Of.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Of.prototype.toString=function(){return(new mh).createLineString(this.getCoordinates()).toString()},Of.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ul(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Of.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Of.prototype.interfaces_=function(){return[]},Of.prototype.getClass=function(){return Of},Rf.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Of,Rf);var kf=function(){},Tf={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};kf.prototype.interfaces_=function(){return[]},kf.prototype.getClass=function(){return kf},kf.toDegrees=function(t){return 180*t/Math.PI},kf.normalize=function(t){for(;t>Math.PI;)t-=kf.PI_TIMES_2;for(;t<=-Math.PI;)t+=kf.PI_TIMES_2;return t},kf.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},kf.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},kf.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},kf.interiorAngle=function(t,e,n){var r=kf.angle(e,t),i=kf.angle(e,n);return Math.abs(i-r)},kf.normalizePositive=function(t){if(t<0){for(;t<0;)t+=kf.PI_TIMES_2;t>=kf.PI_TIMES_2&&(t=0)}else{for(;t>=kf.PI_TIMES_2;)t-=kf.PI_TIMES_2;t<0&&(t=0)}return t},kf.angleBetween=function(t,e,n){var r=kf.angle(e,t),i=kf.angle(e,n);return kf.diff(r,i)},kf.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},kf.toRadians=function(t){return t*Math.PI/180},kf.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?kf.COUNTERCLOCKWISE:n<0?kf.CLOCKWISE:kf.NONE},kf.angleBetweenOriented=function(t,e,n){var r=kf.angle(e,t),i=kf.angle(e,n)-r;return i<=-Math.PI?i+kf.PI_TIMES_2:i>Math.PI?i-kf.PI_TIMES_2:i},Tf.PI_TIMES_2.get=function(){return 2*Math.PI},Tf.PI_OVER_2.get=function(){return Math.PI/2},Tf.PI_OVER_4.get=function(){return Math.PI/4},Tf.COUNTERCLOCKWISE.get=function(){return Xl.COUNTERCLOCKWISE},Tf.CLOCKWISE.get=function(){return Xl.CLOCKWISE},Tf.NONE.get=function(){return Xl.COLLINEAR},Object.defineProperties(kf,Tf);var Af=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new mf,this._seg1=new mf,this._offset0=new mf,this._offset1=new mf,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new Bl,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Nf.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Df={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Af.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Xl.computeOrientation(this._s0,this._s1,this._s2),r=n===Xl.CLOCKWISE&&this._side===Ch.LEFT||n===Xl.COUNTERCLOCKWISE&&this._side===Ch.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Af.prototype.addLineEndCap=function(t,e){var n=new mf(t,e),r=new mf;this.computeOffsetSegment(n,Ch.LEFT,this._distance,r);var i=new mf;this.computeOffsetSegment(n,Ch.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case Nf.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Xl.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Nf.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Nf.CAP_SQUARE:var u=new ul;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new ul(r.p1.x+u.x,r.p1.y+u.y),c=new ul(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}},Af.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Af.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Pl.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Nl))throw t;o=new ul(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Af.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);r===Xl.CLOCKWISE?a<=c&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,c,r,i),this._segList.addPt(n)},Af.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Af.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Nf.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Nf.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Af.prototype.createSquare=function(t){this._segList.addPt(new ul(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ul(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ul(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ul(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Af.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Af.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Af.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Af.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Af.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=kf.angle(i,this._seg0.p0),s=kf.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=kf.normalize(o+s),u=kf.normalize(a+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(s)),h=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),p=new ul(h,f),d=new mf(i,p),g=d.pointAlongOffset(1,c),y=d.pointAlongOffset(1,-c);this._side===Ch.LEFT?(this._segList.addPt(g),this._segList.addPt(y)):(this._segList.addPt(y),this._segList.addPt(g))},Af.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ch.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u},Af.prototype.addFilletArc=function(t,e,n,r,i){var o=r===Xl.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=0,c=new ul;l<s;){var h=e+o*l;c.x=t.x+i*Math.cos(h),c.y=t.y+i*Math.sin(h),this._segList.addPt(c),l+=u}},Af.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Af.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new ul((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new ul((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Af.prototype.createCircle=function(t){var e=new ul(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Af.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Af.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Of,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Af.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Af.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Nf.JOIN_BEVEL||this._bufParams.getJoinStyle()===Nf.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Xl.CLOCKWISE,this._distance))},Af.prototype.closeRing=function(){this._segList.closeRing()},Af.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Df.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Df.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Df.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Df.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Af,Df);var Ff=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Ff.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&fc.reverse(o),o},Ff.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Pf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ch.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Pf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Ch.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()},Ff.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ch.RIGHT&&(r=-r);var i=Pf.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Ff.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Pf.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ch.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Pf.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ch.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Ff.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Nf.CAP_ROUND:e.createCircle(t);break;case Nf.CAP_SQUARE:e.createSquare(t)}},Ff.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Ff.prototype.getBufferParameters=function(){return this._bufParams},Ff.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Ff.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ff.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Ff.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Pf.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ch.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Pf.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],Ch.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()},Ff.prototype.getSegGen=function(t){return new Af(this._precisionModel,this._bufParams,t)},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new ul(t[n]);return e};var zf=function(){this._subgraphs=null,this._seg=new mf,this._cga=new Xl;var t=arguments[0];this._subgraphs=t},jf={DepthSegment:{configurable:!0}};zf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new lc,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(dl(arguments[2],ac)&&arguments[0]instanceof ul&&arguments[1]instanceof Xh){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=a.getEdge().getCoordinates(),c=0;c<l.length-1;c++)if(t._seg.p0=l[c],t._seg.p1=l[c+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Xl.computeOrientation(t._seg.p0,t._seg.p1,s)===Xl.RIGHT)){var h=a.getDepth(Ch.LEFT);t._seg.p0.equals(l[c])||(h=a.getDepth(Ch.RIGHT));var f=new qf(t._seg,h);u.add(f)}}else if(dl(arguments[2],ac)&&arguments[0]instanceof ul&&dl(arguments[1],ac))for(var p=arguments[0],d=arguments[2],g=arguments[1].iterator();g.hasNext();){var y=g.next();y.isForward()&&t.findStabbedSegments(p,y,d)}},zf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:nf.min(e)._leftDepth},zf.prototype.interfaces_=function(){return[]},zf.prototype.getClass=function(){return zf},jf.DepthSegment.get=function(){return qf},Object.defineProperties(zf,jf);var qf=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new mf(t),this._leftDepth=e};qf.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},qf.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},qf.prototype.toString=function(){return this._upwardSeg.toString()},qf.prototype.interfaces_=function(){return[il]},qf.prototype.getClass=function(){return qf};var Gf=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Gf.prototype.area=function(){return Gf.area(this.p0,this.p1,this.p2)},Gf.prototype.signedArea=function(){return Gf.signedArea(this.p0,this.p1,this.p2)},Gf.prototype.interpolateZ=function(t){if(null===t)throw new el("Supplied point is null.");return Gf.interpolateZ(t,this.p0,this.p1,this.p2)},Gf.prototype.longestSideLength=function(){return Gf.longestSideLength(this.p0,this.p1,this.p2)},Gf.prototype.isAcute=function(){return Gf.isAcute(this.p0,this.p1,this.p2)},Gf.prototype.circumcentre=function(){return Gf.circumcentre(this.p0,this.p1,this.p2)},Gf.prototype.area3D=function(){return Gf.area3D(this.p0,this.p1,this.p2)},Gf.prototype.centroid=function(){return Gf.centroid(this.p0,this.p1,this.p2)},Gf.prototype.inCentre=function(){return Gf.inCentre(this.p0,this.p1,this.p2)},Gf.prototype.interfaces_=function(){return[]},Gf.prototype.getClass=function(){return Gf},Gf.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Gf.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Gf.det=function(t,e,n,r){return t*r-e*n},Gf.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,c=s*l-a*u,h=t.x-i,f=t.y-o,p=(l*h-a*f)/c,d=(-u*h+s*f)/c;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},Gf.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Gf.isAcute=function(t,e,n){return!!kf.isAcute(t,e,n)&&!!kf.isAcute(e,n,t)&&!!kf.isAcute(n,t,e)},Gf.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*Gf.det(o,s,a,u),c=Gf.det(s,o*o+s*s,u,a*a+u*u),h=Gf.det(o,o*o+s*s,a,a*a+u*u);return new ul(r-c/l,i+h/l)},Gf.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Pl(t.x+n/2,t.y+r/2,1),o=new Pl(t.x-r+n/2,t.y+n+r/2,1);return new Pl(i,o)},Gf.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new ul(t.x+i*o,t.y+i*s)},Gf.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=i*u-o*a,c=o*s-r*u,h=r*a-i*s,f=l*l+c*c+h*h;return Math.sqrt(f)/2},Gf.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new ul(r,i)},Gf.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new ul(a,u)};var Bf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new lc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fl.EXTERIOR,fl.INTERIOR)},Bf.prototype.addPolygon=function(t){var e=this,n=this._distance,r=Ch.LEFT;this._distance<0&&(n=-this._distance,r=Ch.RIGHT);var i=t.getExteriorRing(),o=fc.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,fl.EXTERIOR,fl.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=fc.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,Ch.opposite(r),fl.INTERIOR,fl.EXTERIOR)}},Bf.prototype.isTriangleErodedCompletely=function(t,e){var n=new Gf(t[0],t[1],t[2]),r=n.inCentre();return Xl.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=fc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,fl.EXTERIOR,fl.INTERIOR)},Bf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new vf(t,new Ah(0,fl.BOUNDARY,e,n));this._curveList.add(r)},Bf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bf.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<nh.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=nh.MINIMUM_VALID_SIZE&&Xl.isCCW(t)&&(o=i,s=r,n=Ch.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Bf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof th?this.addPolygon(t):t instanceof $c?this.addLineString(t):t instanceof Jc?this.addPoint(t):(t instanceof eh||t instanceof zc||t instanceof rh||t instanceof Fc)&&this.addCollection(t)},Bf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var Uf=function(){};Uf.prototype.locate=function(t){},Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf};var Vf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Vf.prototype.next=function(){if(this._atStart)return this._atStart=!1,Vf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new uc;var t=this._parent.getGeometryN(this._index++);return t instanceof Fc?(this._subcollectionIterator=new Vf(t),this._subcollectionIterator.next()):t},Vf.prototype.remove=function(){throw new Error(this.getClass().getName())},Vf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Vf.prototype.interfaces_=function(){return[sc]},Vf.prototype.getClass=function(){return Vf},Vf.isAtomic=function(t){return!(t instanceof Fc)};var Xf=function(){this._geom=null;var t=arguments[0];this._geom=t};Xf.prototype.locate=function(t){return Xf.locate(t,this._geom)},Xf.prototype.interfaces_=function(){return[Uf]},Xf.prototype.getClass=function(){return Xf},Xf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Xl.isPointInRing(t,e.getCoordinates())},Xf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Xf.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Xf.isPointInRing(t,i))return!1}return!0},Xf.containsPoint=function(t,e){if(e instanceof th)return Xf.containsPointInPolygon(t,e);if(e instanceof Fc)for(var n=new Vf(e);n.hasNext();){var r=n.next();if(r!==e&&Xf.containsPoint(t,r))return!0}return!1},Xf.locate=function(t,e){return e.isEmpty()?fl.EXTERIOR:Xf.containsPoint(t,e)?fl.INTERIOR:fl.EXTERIOR};var Yf=function(){this._edgeMap=new Nc,this._edgeList=null,this._ptInAreaLocation=[fl.NONE,fl.NONE]};Yf.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Yf.prototype.propagateSideLabels=function(t){for(var e=fl.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ch.LEFT)!==fl.NONE&&(e=r.getLocation(t,Ch.LEFT))}if(e===fl.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Ch.ON)===fl.NONE&&a.setLocation(t,Ch.ON,i),a.isArea(t)){var u=a.getLocation(t,Ch.LEFT),l=a.getLocation(t,Ch.RIGHT);if(l!==fl.NONE){if(l!==i)throw new Oh("side location conflict",s.getCoordinate());u===fl.NONE&&jl.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else jl.isTrue(a.getLocation(t,Ch.LEFT)===fl.NONE,"found single null side"),a.setLocation(t,Ch.RIGHT,i),a.setLocation(t,Ch.LEFT,i)}}},Yf.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Yf.prototype.print=function(t){Il.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Yf.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Yf.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ch.LEFT);jl.isTrue(r!==fl.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();jl.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Ch.LEFT),u=s.getLocation(t,Ch.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0},Yf.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Yf.prototype.iterator=function(){return this.getEdges().iterator()},Yf.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new lc(this._edgeMap.values())),this._edgeList},Yf.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===fl.NONE&&(this._ptInAreaLocation[t]=Xf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Yf.prototype.toString=function(){var t=new vl;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Yf.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Yf.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===fl.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=fl.NONE;if(e[u])l=fl.EXTERIOR;else{var c=s.getCoordinate();l=this.getLocation(u,c,t)}a.setAllLocationsIfNull(u,l)}},Yf.prototype.getDegree=function(){return this._edgeMap.size()},Yf.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf};var Wf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new Oh("no outgoing dirEdge found",this.getCoordinate());jl.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Bh.isNorthern(i)&&Bh.isNorthern(o)?n:Bh.isNorthern(i)||Bh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(jl.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Il.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new lc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(Ch.LEFT),i=e.getDepth(Ch.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r);if(this.computeDepths(0,n,o)!==i)throw new Oh("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[1],a=arguments[2],u=arguments[0];u<s;u++){var l=t._edgeList.get(u);l.setEdgeDepths(Ch.RIGHT,a),a=l.getDepth(Ch.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(jl.isTrue(null!==n,"found null for first outgoing dirEdge"),jl.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=fl.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=fl.INTERIOR;break}if(r.isInResult()){t=fl.EXTERIOR;break}}}if(t===fl.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===fl.INTERIOR):(s.isInResult()&&(i=fl.EXTERIOR),a.isInResult()&&(i=fl.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ah(fl.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==fl.INTERIOR&&o!==fl.BOUNDARY||this._label.setLocation(i,fl.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yf),Hf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new qh(t,new Wf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Yh),Qf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Qf.prototype.compareTo=function(t){var e=t;return Qf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Qf.prototype.interfaces_=function(){return[il]},Qf.prototype.getClass=function(){return Qf},Qf.orientation=function(t){return 1===fc.increasingDirection(t)},Qf.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=i)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var $f=function(){this._edges=new lc,this._ocaMap=new Nc};$f.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},$f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},$f.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},$f.prototype.iterator=function(){return this._edges.iterator()},$f.prototype.getEdges=function(){return this._edges},$f.prototype.get=function(t){return this._edges.get(t)},$f.prototype.findEqualEdge=function(t){var e=new Qf(t.getCoordinates());return this._ocaMap.get(e)},$f.prototype.add=function(t){this._edges.add(t);var e=new Qf(t.getCoordinates());this._ocaMap.put(e,t)},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f};var Kf=function(){};Kf.prototype.processIntersections=function(t,e,n,r){},Kf.prototype.isDone=function(){},Kf.prototype.interfaces_=function(){return[]},Kf.prototype.getClass=function(){return Kf};var Jf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Jf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Jf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Jf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Jf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Jf.prototype.getLineIntersector=function(){return this._li},Jf.prototype.hasProperIntersection=function(){return this._hasProper},Jf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Jf.prototype.hasIntersection=function(){return this._hasIntersection},Jf.prototype.isDone=function(){return!1},Jf.prototype.hasInteriorIntersection=function(){return this._hasInterior},Jf.prototype.interfaces_=function(){return[Kf]},Jf.prototype.getClass=function(){return Jf},Jf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zf=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new ul(t),this.segmentIndex=e,this.dist=n};Zf.prototype.getSegmentIndex=function(){return this.segmentIndex},Zf.prototype.getCoordinate=function(){return this.coord},Zf.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zf.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zf.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zf.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zf.prototype.getDistance=function(){return this.dist},Zf.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zf.prototype.interfaces_=function(){return[il]},Zf.prototype.getClass=function(){return Zf};var tp=function(){this._nodeMap=new Nc,this.edge=null;var t=arguments[0];this.edge=t};tp.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},tp.prototype.iterator=function(){return this._nodeMap.values().iterator()},tp.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},tp.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},tp.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new ul(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new op(o,new Ah(this.edge._label))},tp.prototype.add=function(t,e,n){var r=new Zf(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},tp.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){};ep.prototype.getChainStartIndices=function(t){var e=0,n=new lc;n.add(new ml(e));do{var r=this.findChainEnd(t,e);n.add(new ml(r)),e=r}while(e<t.length-1);return ep.toIntArray(n)},ep.prototype.findChainEnd=function(t,e){for(var n=Bh.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Bh.quadrant(t[r-1],t[r])===n;)r++;return r-1},ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},ep.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var np=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ll,this.env2=new Ll;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ep;this.startIndex=e.getChainStartIndices(this.pts)};np.prototype.getCoordinates=function(){return this.pts},np.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},np.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},np.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[i],h=this.pts[o],f=s.pts[a],p=s.pts[u];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((a+u)/2);i<d&&(a<g&&this.computeIntersectsForChain(i,d,s,a,g,l),g<u&&this.computeIntersectsForChain(i,d,s,g,u,l)),d<o&&(a<g&&this.computeIntersectsForChain(d,o,s,a,g,l),g<u&&this.computeIntersectsForChain(d,o,s,g,u,l))}},np.prototype.getStartIndexes=function(){return this.startIndex},np.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np};var rp=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},ip={NULL_VALUE:{configurable:!0}};rp.prototype.getDepth=function(t,e){return this._depth[t][e]},rp.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},rp.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==rp.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===rp.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===rp.NULL_VALUE}},rp.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},rp.prototype.getDelta=function(t){return this._depth[t][Ch.RIGHT]-this._depth[t][Ch.LEFT]},rp.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?fl.EXTERIOR:fl.INTERIOR},rp.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},rp.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==fl.EXTERIOR&&i!==fl.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=rp.depthAtLocation(i):t._depth[n][r]+=rp.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1];arguments[2]===fl.INTERIOR&&this._depth[o][s]++}},rp.prototype.interfaces_=function(){return[]},rp.prototype.getClass=function(){return rp},rp.depthAtLocation=function(t){return t===fl.EXTERIOR?0:t===fl.INTERIOR?1:rp.NULL_VALUE},ip.NULL_VALUE.get=function(){return-1},Object.defineProperties(rp,ip);var op=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new tp(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new rp,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ah.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(n.pts[s])||(r=!1),this.pts[s].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new np(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Ll;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new ul(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=new vl;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ch.ON),e.getLocation(1,Ch.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ch.LEFT),e.getLocation(1,Ch.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ch.RIGHT),e.getLocation(1,Ch.RIGHT),2))},e}(jh),sp=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new $f,this._bufParams=t||null};sp.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},sp.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ah(t.getLabel())).flip(),n.merge(r);var i=sp.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(sp.depthDelta(t.getLabel()))},sp.prototype.buildSubgraphs=function(t,e){for(var n=new lc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new zf(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},sp.prototype.createSubgraphs=function(t){for(var e=new lc,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new kh;i.create(r),e.add(i)}}return nf.sort(e,nf.reverseOrder()),e},sp.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},sp.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Sf,n=new Bl;return n.setPrecisionModel(t),e.setSegmentIntersector(new Jf(n)),e},sp.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Ff(n,this._bufParams),i=new Bf(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Wh(new Hf),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new Hh(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},sp.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new op(i.getCoordinates(),new Ah(s));this.insertUniqueEdge(a)}}},sp.prototype.setNoder=function(t){this._workingNoder=t},sp.prototype.interfaces_=function(){return[]},sp.prototype.getClass=function(){return sp},sp.depthDelta=function(t){var e=t.getLocation(0,Ch.LEFT),n=t.getLocation(0,Ch.RIGHT);return e===fl.INTERIOR&&n===fl.EXTERIOR?1:e===fl.EXTERIOR&&n===fl.INTERIOR?-1:0},sp.convertSegStrings=function(t){for(var e=new mh,n=new lc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ap=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ap.prototype.rescale=function(){var t=this;if(dl(arguments[0],ic))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],i=0;i<r.length;i++)r[i].x=r[i].x/t._scaleFactor+t._offsetX,r[i].y=r[i].y/t._scaleFactor+t._offsetY;2===r.length&&r[0].equals2D(r[1])&&Il.out.println(r)}},ap.prototype.scale=function(){var t=this;if(dl(arguments[0],ic)){for(var e=arguments[0],n=new lc,r=e.iterator();r.hasNext();){var i=r.next();n.add(new vf(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ul(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);return fc.removeRepeatedPoints(s)}},ap.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ap.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ap.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ap.prototype.interfaces_=function(){return[wf]},ap.prototype.getClass=function(){return ap};var up=function(){this._li=new Bl,this._segStrings=null;var t=arguments[0];this._segStrings=t},lp={fact:{configurable:!0}};up.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next().getCoordinates();t.checkEndPtVertexIntersections(n[0],t._segStrings),t.checkEndPtVertexIntersections(n[n.length-1],t._segStrings)}else if(2===arguments.length)for(var r=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var o=i.next().getCoordinates(),s=1;s<o.length-1;s++)if(o[s].equals(r))throw new Fl("found endpt/interior pt intersection at index "+s+" :pt "+r)},up.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),l=0;l<a.length-1;l++)for(var c=0;c<u.length-1;c++)t.checkInteriorIntersections(o,l,s,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var g=h.getCoordinates()[f],y=h.getCoordinates()[f+1],v=p.getCoordinates()[d],m=p.getCoordinates()[d+1];if(this._li.computeIntersection(g,y,v,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,y)||this.hasInteriorIntersection(this._li,v,m)))throw new Fl("found non-noded intersection at "+g+"-"+y+" and "+v+"-"+m)}},up.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},up.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),i=0;i<r.length-2;i++)t.checkCollapse(r[i],r[i+1],r[i+2])},up.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},up.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Fl("found non-noded collapse at "+up.fact.createLineString([t,e,n]))},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},lp.fact.get=function(){return new mh},Object.defineProperties(up,lp);var cp=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new el("Scale factor must be non-zero");1!==e&&(this._pt=new ul(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ul,this._p1Scaled=new ul),this.initCorners(this._pt)},hp={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};cp.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return jl.isTrue(!(s&&a),"Found bad envelope test"),a},cp.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new ul(this._maxx,this._maxy),this._corner[1]=new ul(this._minx,this._maxy),this._corner[2]=new ul(this._minx,this._miny),this._corner[3]=new ul(this._maxx,this._miny)},cp.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},cp.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},cp.prototype.getCoordinate=function(){return this._originalPt},cp.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},cp.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=cp.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ll(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},cp.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},cp.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},cp.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},cp.prototype.interfaces_=function(){return[]},cp.prototype.getClass=function(){return cp},hp.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(cp,hp);var fp=function(){this.tempEnv1=new Ll,this.selectedSegment=new mf};fp.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp};var pp=function(){this._index=null;var t=arguments[0];this._index=t},dp={HotPixelSnapAction:{configurable:!0}};pp.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new gp(e,n,r);return this._index.query(i,{interfaces_:function(){return[Jh]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},dp.HotPixelSnapAction.get=function(){return gp},Object.defineProperties(pp,dp);var gp=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fp),yp=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new lc};yp.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},yp.prototype.isDone=function(){return!1},yp.prototype.getInteriorIntersections=function(){return this._interiorIntersections},yp.prototype.interfaces_=function(){return[Kf]},yp.prototype.getClass=function(){return yp};var vp=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Bl,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};vp.prototype.checkCorrectness=function(t){var e=vf.getNodedSubstrings(t),n=new up(e);try{n.checkValid()}catch(t){if(!(t instanceof Cl))throw t;t.printStackTrace()}},vp.prototype.getNodedSubstrings=function(){return vf.getNodedSubstrings(this._nodedSegStrings)},vp.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},vp.prototype.findInteriorIntersections=function(t,e){var n=new yp(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},vp.prototype.computeVertexSnaps=function(){var t=this;if(dl(arguments[0],ic))for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.computeVertexSnaps(n)}else if(arguments[0]instanceof vf)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length;o++){var s=new cp(i[o],t._scaleFactor,t._li);t._pointSnapper.snap(s,r,o)&&r.addIntersection(i[o],o)}},vp.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Sf,this._pointSnapper=new pp(this._noder.getIndex()),this.snapRound(t,this._li)},vp.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new cp(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},vp.prototype.interfaces_=function(){return[wf]},vp.prototype.getClass=function(){return vp};var mp=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Nf,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},_p={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mp.prototype.bufferFixedPrecision=function(t){var e=new ap(new vp(new dh(1)),t.getScale()),n=new sp(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},mp.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mp.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oh))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=mp.precisionScaleFactor(this._argGeom,this._distance,n),i=new dh(r);this.bufferFixedPrecision(i)}},mp.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===dh.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mp.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mp.prototype.bufferOriginalPrecision=function(){try{var t=new sp(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Fl))throw t;this._saveException=t}},mp.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mp.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new mp(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Hl&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new mp(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Nf&&arguments[0]instanceof Hl&&"number"==typeof arguments[1]){var i=arguments[1];return new mp(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=new mp(arguments[0]);return u.setQuadrantSegments(s),u.setEndCapStyle(a),u.getResultGeometry(o)}},mp.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=gl.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},_p.CAP_ROUND.get=function(){return Nf.CAP_ROUND},_p.CAP_BUTT.get=function(){return Nf.CAP_FLAT},_p.CAP_FLAT.get=function(){return Nf.CAP_FLAT},_p.CAP_SQUARE.get=function(){return Nf.CAP_SQUARE},_p.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mp,_p);var xp=function(){this._pt=[new ul,new ul],this._distance=nl.NaN,this._isNull=!0};xp.prototype.getCoordinates=function(){return this._pt},xp.prototype.getCoordinate=function(t){return this._pt[t]},xp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},xp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},xp.prototype.getDistance=function(){return this._distance},xp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp};var bp=function(){};bp.prototype.interfaces_=function(){return[]},bp.prototype.getClass=function(){return bp},bp.computeDistance=function(){if(arguments[2]instanceof xp&&arguments[0]instanceof $c&&arguments[1]instanceof ul)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new mf,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof xp&&arguments[0]instanceof th&&arguments[1]instanceof ul){var s=arguments[0],a=arguments[1],u=arguments[2];bp.computeDistance(s.getExteriorRing(),a,u);for(var l=0;l<s.getNumInteriorRing();l++)bp.computeDistance(s.getInteriorRingN(l),a,u)}else if(arguments[2]instanceof xp&&arguments[0]instanceof Hl&&arguments[1]instanceof ul){var c=arguments[0],h=arguments[1],f=arguments[2];if(c instanceof $c)bp.computeDistance(c,h,f);else if(c instanceof th)bp.computeDistance(c,h,f);else if(c instanceof Fc)for(var p=c,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d);bp.computeDistance(g,h,f)}else f.setMinimum(c.getCoordinate(),h)}else if(arguments[2]instanceof xp&&arguments[0]instanceof mf&&arguments[1]instanceof ul){var y=arguments[1],v=arguments[2],m=arguments[0].closestPoint(y);v.setMinimum(m,y)}};var Ep=function(t){this._maxPtDist=new xp,this._inputGeom=t||null},wp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Ep.prototype.computeMaxMidpointDistance=function(t){var e=new Sp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ep.prototype.computeMaxVertexDistance=function(t){var e=new Mp(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Ep.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Ep.prototype.getDistancePoints=function(){return this._maxPtDist},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},wp.MaxPointDistanceFilter.get=function(){return Mp},wp.MaxMidpointDistanceFilter.get=function(){return Sp},Object.defineProperties(Ep,wp);var Mp=function(t){this._maxPtDist=new xp,this._minPtDist=new xp,this._geom=t||null};Mp.prototype.filter=function(t){this._minPtDist.initialize(),bp.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Mp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Mp.prototype.interfaces_=function(){return[Kl]},Mp.prototype.getClass=function(){return Mp};var Sp=function(t){this._maxPtDist=new xp,this._minPtDist=new xp,this._geom=t||null};Sp.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new ul((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),bp.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Sp.prototype.isDone=function(){return!1},Sp.prototype.isGeometryChanged=function(){return!1},Sp.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sp.prototype.interfaces_=function(){return[Dc]},Sp.prototype.getClass=function(){return Sp};var Cp=function(t){this._comps=t||null};Cp.prototype.filter=function(t){t instanceof th&&this._comps.add(t)},Cp.prototype.interfaces_=function(){return[Ac]},Cp.prototype.getClass=function(){return Cp},Cp.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Cp.getPolygons(t,new lc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof th?n.add(e):e instanceof Fc&&e.apply(new Cp(n)),n}};var Np=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Np.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof nh){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof $c&&this._lines.add(t)},Np.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Np.prototype.interfaces_=function(){return[Wl]},Np.prototype.getClass=function(){return Np},Np.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Np.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Np.getLines(e,n))}},Np.getLines=function(){if(1===arguments.length){var t=arguments[0];return Np.getLines(t,!1)}if(2===arguments.length){if(dl(arguments[0],ic)&&dl(arguments[1],ic)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Np.getLines(r,e)}return e}if(arguments[0]instanceof Hl&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=new lc;return i.apply(new Np(s,o)),s}if(arguments[0]instanceof Hl&&dl(arguments[1],ic)){var a=arguments[0],u=arguments[1];return a instanceof $c?u.add(a):a.apply(new Np(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&dl(arguments[0],ic)&&dl(arguments[1],ic)){for(var l=arguments[1],c=arguments[2],h=arguments[0].iterator();h.hasNext();){var f=h.next();Np.getLines(f,l,c)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Hl&&dl(arguments[1],ic)){var p=arguments[1],d=arguments[2];return arguments[0].apply(new Np(p,d)),p}}};var Ip=function(){if(this._boundaryRule=Jl.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new el("Rule must be non-null");this._boundaryRule=t}};Ip.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof ul&&arguments[1]instanceof th){var e=arguments[0],n=arguments[1];if(n.isEmpty())return fl.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===fl.EXTERIOR)return fl.EXTERIOR;if(i===fl.BOUNDARY)return fl.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===fl.INTERIOR)return fl.EXTERIOR;if(a===fl.BOUNDARY)return fl.BOUNDARY}return fl.INTERIOR}if(arguments[0]instanceof ul&&arguments[1]instanceof $c){var u=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(u))return fl.EXTERIOR;var c=l.getCoordinates();return l.isClosed()||!u.equals(c[0])&&!u.equals(c[c.length-1])?Xl.isOnLine(u,c)?fl.INTERIOR:fl.EXTERIOR:fl.BOUNDARY}if(arguments[0]instanceof ul&&arguments[1]instanceof Jc){var h=arguments[0];return arguments[1].getCoordinate().equals2D(h)?fl.INTERIOR:fl.EXTERIOR}},Ip.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Xl.locatePointInRing(t,e.getCoordinates()):fl.EXTERIOR},Ip.prototype.intersects=function(t,e){return this.locate(t,e)!==fl.EXTERIOR},Ip.prototype.updateLocationInfo=function(t){t===fl.INTERIOR&&(this._isIn=!0),t===fl.BOUNDARY&&this._numBoundaries++},Ip.prototype.computeLocation=function(t,e){var n=this;if(e instanceof Jc&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof $c)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof th)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof zc)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof rh)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof Fc)for(var l=new Vf(e);l.hasNext();){var c=l.next();c!==e&&n.computeLocation(t,c)}},Ip.prototype.locate=function(t,e){return e.isEmpty()?fl.EXTERIOR:e instanceof $c||e instanceof th?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?fl.BOUNDARY:this._numBoundaries>0||this._isIn?fl.INTERIOR:fl.EXTERIOR)},Ip.prototype.interfaces_=function(){return[]},Ip.prototype.getClass=function(){return Ip};var Pp=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Lp={INSIDE_AREA:{configurable:!0}};Pp.prototype.isInsideArea=function(){return this._segIndex===Pp.INSIDE_AREA},Pp.prototype.getCoordinate=function(){return this._pt},Pp.prototype.getGeometryComponent=function(){return this._component},Pp.prototype.getSegmentIndex=function(){return this._segIndex},Pp.prototype.interfaces_=function(){return[]},Pp.prototype.getClass=function(){return Pp},Lp.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Pp,Lp);var Op=function(t){this._pts=t||null};Op.prototype.filter=function(t){t instanceof Jc&&this._pts.add(t)},Op.prototype.interfaces_=function(){return[Ac]},Op.prototype.getClass=function(){return Op},Op.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jc?nf.singletonList(t):Op.getPoints(t,new lc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jc?n.add(e):e instanceof Fc&&e.apply(new Op(n)),n}};var Rp=function(){this._locations=null;var t=arguments[0];this._locations=t};Rp.prototype.filter=function(t){(t instanceof Jc||t instanceof $c||t instanceof th)&&this._locations.add(new Pp(t,0,t.getCoordinate()))},Rp.prototype.interfaces_=function(){return[Ac]},Rp.prototype.getClass=function(){return Rp},Rp.getLocations=function(t){var e=new lc;return t.apply(new Rp(e)),e};var kp=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Ip,this._minDistanceLocation=null,this._minDistance=nl.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};kp.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=Cp.getPolygons(this._geom[n]);if(o.size()>0){var s=Rp.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&dl(arguments[0],ac)&&dl(arguments[1],ac)){for(var a=arguments[0],u=arguments[1],l=arguments[2],c=0;c<a.size();c++)for(var h=a.get(c),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),l),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Pp&&arguments[1]instanceof th){var p=arguments[0],d=arguments[1],g=arguments[2],y=p.getCoordinate();if(fl.EXTERIOR!==this._ptLocator.locate(y,d))return this._minDistance=0,g[0]=p,g[1]=new Pp(d,y),null}},kp.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},kp.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Np.getLines(this._geom[0]),n=Np.getLines(this._geom[1]),r=Op.getPoints(this._geom[0]),i=Op.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},kp.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},kp.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},kp.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},kp.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof $c&&arguments[1]instanceof Jc){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=Xl.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new mf(i[s],i[s+1]).closestPoint(o);r[0]=new Pp(e,s,u),r[1]=new Pp(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof $c&&arguments[1]instanceof $c){var l=arguments[0],c=arguments[1],h=arguments[2];if(l.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var f=l.getCoordinates(),p=c.getCoordinates(),d=0;d<f.length-1;d++)for(var g=0;g<p.length-1;g++){var y=Xl.distanceLineLine(f[d],f[d+1],p[g],p[g+1]);if(y<t._minDistance){t._minDistance=y;var v=new mf(f[d],f[d+1]),m=new mf(p[g],p[g+1]),_=v.closestPoints(m);h[0]=new Pp(l,d,_[0]),h[1]=new Pp(c,g,_[1])}if(t._minDistance<=t._terminateDistance)return null}}},kp.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Pp(o,0,o.getCoordinate()),n[1]=new Pp(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},kp.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new el("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},kp.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},kp.prototype.interfaces_=function(){return[]},kp.prototype.getClass=function(){return kp},kp.distance=function(t,e){return new kp(t,e).distance()},kp.isWithinDistance=function(t,e,n){return new kp(t,e,n).distance()<=n},kp.nearestPoints=function(t,e){return new kp(t,e).nearestPoints()};var Tp=function(){this._pt=[new ul,new ul],this._distance=nl.NaN,this._isNull=!0};Tp.prototype.getCoordinates=function(){return this._pt},Tp.prototype.getCoordinate=function(t){return this._pt[t]},Tp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Tp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Tp.prototype.toString=function(){return Dl.toLineString(this._pt[0],this._pt[1])},Tp.prototype.getDistance=function(){return this._distance},Tp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp};var Ap=function(){};Ap.prototype.interfaces_=function(){return[]},Ap.prototype.getClass=function(){return Ap},Ap.computeDistance=function(){if(arguments[2]instanceof Tp&&arguments[0]instanceof $c&&arguments[1]instanceof ul)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new mf,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof Tp&&arguments[0]instanceof th&&arguments[1]instanceof ul){var a=arguments[0],u=arguments[1],l=arguments[2];Ap.computeDistance(a.getExteriorRing(),u,l);for(var c=0;c<a.getNumInteriorRing();c++)Ap.computeDistance(a.getInteriorRingN(c),u,l)}else if(arguments[2]instanceof Tp&&arguments[0]instanceof Hl&&arguments[1]instanceof ul){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof $c)Ap.computeDistance(h,f,p);else if(h instanceof th)Ap.computeDistance(h,f,p);else if(h instanceof Fc)for(var d=h,g=0;g<d.getNumGeometries();g++){var y=d.getGeometryN(g);Ap.computeDistance(y,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Tp&&arguments[0]instanceof mf&&arguments[1]instanceof ul){var v=arguments[1],m=arguments[2],_=arguments[0].closestPoint(v);m.setMinimum(_,v)}};var Dp=function(){this._g0=null,this._g1=null,this._ptDist=new Tp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Fp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dp.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dp.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new el("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dp.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dp.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dp.prototype.computeOrientedDistance=function(t,e,n){var r=new zp(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new jp(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Dp.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dp.prototype.interfaces_=function(){return[]},Dp.prototype.getClass=function(){return Dp},Dp.distance=function(){if(2===arguments.length)return new Dp(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dp(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Fp.MaxPointDistanceFilter.get=function(){return zp},Fp.MaxDensifiedByFractionDistanceFilter.get=function(){return jp},Object.defineProperties(Dp,Fp);var zp=function(){this._maxPtDist=new Tp,this._minPtDist=new Tp,this._euclideanDist=new Ap,this._geom=null;var t=arguments[0];this._geom=t};zp.prototype.filter=function(t){this._minPtDist.initialize(),Ap.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},zp.prototype.getMaxPointDistance=function(){return this._maxPtDist},zp.prototype.interfaces_=function(){return[Kl]},zp.prototype.getClass=function(){return zp};var jp=function(){this._maxPtDist=new Tp,this._minPtDist=new Tp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};jp.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,l=r.y+a*s,c=new ul(u,l);n._minPtDist.initialize(),Ap.computeDistance(n._geom,c,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},jp.prototype.isDone=function(){return!1},jp.prototype.isGeometryChanged=function(){return!1},jp.prototype.getMaxPointDistance=function(){return this._maxPtDist},jp.prototype.interfaces_=function(){return[Dc]},jp.prototype.getClass=function(){return jp};var qp=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Gp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};qp.prototype.checkMaximumDistance=function(t,e,n){var r=new Dp(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+Dl.toLineString(i[0],i[1])+")"}},qp.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=qp.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),qp.VERBOSE&&Il.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},qp.prototype.checkNegativeValid=function(){if(!(this._input instanceof th||this._input instanceof rh||this._input instanceof Fc))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},qp.prototype.getErrorIndicator=function(){return this._errorIndicator},qp.prototype.checkMinimumDistance=function(t,e,n){var r=new kp(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+Dl.toLineString(i[0],i[1])+" )"}},qp.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},qp.prototype.getErrorLocation=function(){return this._errorLocation},qp.prototype.getPolygonLines=function(t){for(var e=new lc,n=new Np(e),r=Cp.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},qp.prototype.getErrorMessage=function(){return this._errMsg},qp.prototype.interfaces_=function(){return[]},qp.prototype.getClass=function(){return qp},Gp.VERBOSE.get=function(){return!1},Gp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(qp,Gp);var Bp=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Up={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Bp.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Bp.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Bp.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Ll(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Ll(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Bp.prototype.checkDistance=function(){var t=new qp(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Bp.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Bp.prototype.checkPolygonal=function(){this._result instanceof th||this._result instanceof rh||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Bp.prototype.getErrorIndicator=function(){return this._errorIndicator},Bp.prototype.getErrorLocation=function(){return this._errorLocation},Bp.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Bp.prototype.report=function(t){if(!Bp.VERBOSE)return null;Il.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Bp.prototype.getErrorMessage=function(){return this._errorMsg},Bp.prototype.interfaces_=function(){return[]},Bp.prototype.getClass=function(){return Bp},Bp.isValidMsg=function(t,e,n){var r=new Bp(t,e,n);return r.isValid()?null:r.getErrorMessage()},Bp.isValid=function(t,e,n){return!!new Bp(t,e,n).isValid()},Up.VERBOSE.get=function(){return!1},Up.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Bp,Up);var Vp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Vp.prototype.getCoordinates=function(){return this._pts},Vp.prototype.size=function(){return this._pts.length},Vp.prototype.getCoordinate=function(t){return this._pts[t]},Vp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:df.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Vp.prototype.setData=function(t){this._data=t},Vp.prototype.getData=function(){return this._data},Vp.prototype.toString=function(){return Dl.toLineString(new lh(this._pts))},Vp.prototype.interfaces_=function(){return[gf]},Vp.prototype.getClass=function(){return Vp};var Xp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new lc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Xp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Xp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Xp.prototype.getIntersectionSegments=function(){return this._intSegments},Xp.prototype.count=function(){return this._intersectionCount},Xp.prototype.getIntersections=function(){return this._intersections},Xp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Xp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Xp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Xp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Xp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Xp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Xp.prototype.interfaces_=function(){return[Kf]},Xp.prototype.getClass=function(){return Xp},Xp.createAllIntersectionsFinder=function(t){var e=new Xp(t);return e.setFindAllIntersections(!0),e},Xp.createAnyIntersectionFinder=function(t){return new Xp(t)},Xp.createIntersectionCounter=function(t){var e=new Xp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Yp=function(){this._li=new Bl,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Yp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Yp.prototype.getIntersections=function(){return this._segInt.getIntersections()},Yp.prototype.isValid=function(){return this.execute(),this._isValid},Yp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Yp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Xp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Sf;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Yp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oh(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Yp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+Dl.toLineString(t[0],t[1])+" and "+Dl.toLineString(t[2],t[3])},Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.computeIntersections=function(t){var e=new Yp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Wp=function t(){this._nv=null;var e=arguments[0];this._nv=new Yp(t.toSegmentStrings(e))};Wp.prototype.checkValid=function(){this._nv.checkValid()},Wp.prototype.interfaces_=function(){return[]},Wp.prototype.getClass=function(){return Wp},Wp.toSegmentStrings=function(t){for(var e=new lc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Vp(r.getCoordinates(),r))}return e},Wp.checkValid=function(t){new Wp(t).checkValid()};var Hp=function(t){this._mapOp=t};Hp.prototype.map=function(t){for(var e=new lc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(mh.toGeometryArray(e))},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp},Hp.map=function(t,e){return new Hp(e).map(t)};var Qp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new lc,this._resultLineList=new lc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Qp.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},Qp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Qp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Qp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Pd.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Qp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Qp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Qp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Qp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(jl.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Pd.isResultOfOp(r,e)&&e===Pd.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Qp.prototype.interfaces_=function(){return[]},Qp.prototype.getClass=function(){return Qp};var $p=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new lc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};$p.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},$p.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Pd.INTERSECTION)){var r=n.getLabel();Pd.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},$p.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p};var Kp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Kp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof nh&&!r.isEmpty()||(n=!1);for(var i=new lc,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof nh||(n=!1),i.add(s))}if(n)return this._factory.createPolygon(r,i.toArray([]));var a=new lc;return null!==r&&a.add(r),a.addAll(i),this._factory.buildGeometry(a)},Kp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Kp.prototype.getInputGeometry=function(){return this._inputGeom},Kp.prototype.transformMultiLineString=function(t,e){for(var n=new lc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Kp.prototype.transformCoordinates=function(t,e){return this.copy(t)},Kp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Kp.prototype.transformMultiPoint=function(t,e){for(var n=new lc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Kp.prototype.transformMultiPolygon=function(t,e){for(var n=new lc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Kp.prototype.copy=function(t){return t.copy()},Kp.prototype.transformGeometryCollection=function(t,e){for(var n=new lc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(mh.toGeometryArray(n)):this._factory.buildGeometry(n)},Kp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jc)return this.transformPoint(t,null);if(t instanceof eh)return this.transformMultiPoint(t,null);if(t instanceof nh)return this.transformLinearRing(t,null);if(t instanceof $c)return this.transformLineString(t,null);if(t instanceof zc)return this.transformMultiLineString(t,null);if(t instanceof th)return this.transformPolygon(t,null);if(t instanceof rh)return this.transformMultiPolygon(t,null);if(t instanceof Fc)return this.transformGeometryCollection(t,null);throw new el("Unknown Geometry subtype: "+t.getClass().getName())},Kp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var Jp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new mf,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof $c&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Jp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new ul(o)),0===r&&this._isClosed&&t.set(t.size()-1,new ul(o)))}},Jp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Jp.prototype.snapTo=function(t){var e=new hc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Jp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new ul(i),!1)}},Jp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=nl.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},Jp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp},Jp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zp=function(t){this._srcGeom=t||null},td={SNAP_PRECISION_FACTOR:{configurable:!0}};Zp.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new ed(e,n).transform(this._srcGeom)},Zp.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new ed(t,n,!0).transform(this._srcGeom),i=r;return e&&dl(i,Zc)&&(i=r.buffer(0)),i},Zp.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zp.prototype.extractTargetCoordinates=function(t){for(var e=new Lc,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zp.prototype.computeMinimumSegmentLength=function(t){for(var e=nl.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zp.prototype.interfaces_=function(){return[]},Zp.prototype.getClass=function(){return Zp},Zp.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zp(t);r[0]=i.snapTo(e,n);var o=new Zp(e);return r[1]=o.snapTo(r[0],n),r},Zp.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zp.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===dh.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zp.computeOverlaySnapTolerance(i),Zp.computeOverlaySnapTolerance(o))}},Zp.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zp.SNAP_PRECISION_FACTOR},Zp.snapToSelf=function(t,e,n){return new Zp(t).snapToSelf(e,n)},td.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zp,td);var ed=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Jp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kp),nd=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};nd.prototype.getCommon=function(){return nl.longBitsToDouble(this._commonBits)},nd.prototype.add=function(t){var e=nl.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=nd.signExpBits(this._commonBits),this._isFirst=!1,null):nd.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=nd.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=nd.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},nd.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=nl.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+nl.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.getBit=function(t,e){return 0!=(t&1<<e)?1:0},nd.signExpBits=function(t){return t>>52},nd.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},nd.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(nd.getBit(t,r)!==nd.getBit(e,r))return n;n++}return 52};var rd=function(){this._commonCoord=null,this._ccFilter=new od},id={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};rd.prototype.addCommonBits=function(t){var e=new sd(this._commonCoord);t.apply(e),t.geometryChanged()},rd.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ul(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new sd(e);return t.apply(n),t.geometryChanged(),t},rd.prototype.getCommonCoordinate=function(){return this._commonCoord},rd.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},rd.prototype.interfaces_=function(){return[]},rd.prototype.getClass=function(){return rd},id.CommonCoordinateFilter.get=function(){return od},id.Translater.get=function(){return sd},Object.defineProperties(rd,id);var od=function(){this._commonBitsX=new nd,this._commonBitsY=new nd};od.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},od.prototype.getCommonCoordinate=function(){return new ul(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},od.prototype.interfaces_=function(){return[Kl]},od.prototype.getClass=function(){return od};var sd=function(){this.trans=null;var t=arguments[0];this.trans=t};sd.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},sd.prototype.isDone=function(){return!1},sd.prototype.isGeometryChanged=function(){return!0},sd.prototype.interfaces_=function(){return[Dc]},sd.prototype.getClass=function(){return sd};var ad=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ad.prototype.selfSnap=function(t){return new Zp(t).snapTo(t,this._snapTolerance)},ad.prototype.removeCommonBits=function(t){this._cbr=new rd,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ad.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ad.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Pd.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ad.prototype.checkValid=function(t){t.isValid()||Il.out.println("Snapped geometry is invalid")},ad.prototype.computeSnapTolerance=function(){this._snapTolerance=Zp.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ad.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zp.snap(e[0],e[1],this._snapTolerance)},ad.prototype.interfaces_=function(){return[]},ad.prototype.getClass=function(){return ad},ad.overlayOp=function(t,e,n){return new ad(t,e).getResultGeometry(n)},ad.union=function(t,e){return ad.overlayOp(t,e,Pd.UNION)},ad.intersection=function(t,e){return ad.overlayOp(t,e,Pd.INTERSECTION)},ad.symDifference=function(t,e){return ad.overlayOp(t,e,Pd.SYMDIFFERENCE)},ad.difference=function(t,e){return ad.overlayOp(t,e,Pd.DIFFERENCE)};var ud=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ud.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Pd.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Fl))throw t;r=t}if(!n)try{e=ad.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Fl?r:t}return e},ud.prototype.interfaces_=function(){return[]},ud.prototype.getClass=function(){return ud},ud.overlayOp=function(t,e,n){return new ud(t,e).getResultGeometry(n)},ud.union=function(t,e){return ud.overlayOp(t,e,Pd.UNION)},ud.intersection=function(t,e){return ud.overlayOp(t,e,Pd.INTERSECTION)},ud.symDifference=function(t,e){return ud.overlayOp(t,e,Pd.SYMDIFFERENCE)},ud.difference=function(t,e){return ud.overlayOp(t,e,Pd.DIFFERENCE)};var ld=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ld.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ld.prototype.interfaces_=function(){return[]},ld.prototype.getClass=function(){return ld};var cd=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},hd={INSERT:{configurable:!0},DELETE:{configurable:!0}};cd.prototype.isDelete=function(){return this._eventType===cd.DELETE},cd.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},cd.prototype.getObject=function(){return this._obj},cd.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},cd.prototype.getInsertEvent=function(){return this._insertEvent},cd.prototype.isInsert=function(){return this._eventType===cd.INSERT},cd.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},cd.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},cd.prototype.interfaces_=function(){return[il]},cd.prototype.getClass=function(){return cd},hd.INSERT.get=function(){return 1},hd.DELETE.get=function(){return 2},Object.defineProperties(cd,hd);var fd=function(){};fd.prototype.interfaces_=function(){return[]},fd.prototype.getClass=function(){return fd};var pd=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};pd.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(pd.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},pd.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},pd.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},pd.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},pd.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},pd.prototype.hasProperIntersection=function(){return this._hasProper},pd.prototype.hasIntersection=function(){return this._hasIntersection},pd.prototype.isDone=function(){return this._isDone},pd.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},pd.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},pd.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},pd.prototype.interfaces_=function(){return[]},pd.prototype.getClass=function(){return pd},pd.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var dd=function(t){function e(){t.call(this),this.events=new lc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){nf.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof pd&&dl(arguments[0],ac)&&dl(arguments[1],ac)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&dl(arguments[0],ac)&&arguments[1]instanceof pd){var a=arguments[0],u=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ld(n,i),s=new cd(e,n.getMinX(i),o);this.events.add(s),this.events.add(new cd(n.getMaxX(i),s))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0].iterator();e.hasNext();){var n=e.next();t.addEdge(n,n)}else if(2===arguments.length)for(var r=arguments[1],i=arguments[0].iterator();i.hasNext();){var o=i.next();t.addEdge(o,r)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fd),gd=function(){this._min=nl.POSITIVE_INFINITY,this._max=nl.NEGATIVE_INFINITY},yd={NodeComparator:{configurable:!0}};gd.prototype.getMin=function(){return this._min},gd.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},gd.prototype.getMax=function(){return this._max},gd.prototype.toString=function(){return Dl.toLineString(new ul(this._min,0),new ul(this._max,0))},gd.prototype.interfaces_=function(){return[]},gd.prototype.getClass=function(){return gd},yd.NodeComparator.get=function(){return vd},Object.defineProperties(gd,yd);var vd=function(){};vd.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},vd.prototype.interfaces_=function(){return[sl]},vd.prototype.getClass=function(){return vd};var md=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),_d=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(gd),xd=function(){this._leaves=new lc,this._root=null,this._level=0};xd.prototype.buildTree=function(){nf.sort(this._leaves,new gd.NodeComparator);for(var t=this._leaves,e=null,n=new lc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},xd.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new md(t,e,n))},xd.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},xd.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},xd.prototype.printNode=function(t){Il.out.println(Dl.toLineString(new ul(t._min,this._level),new ul(t._max,this._level)))},xd.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},xd.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new _d(t.get(n),t.get(n+1));e.add(i)}}},xd.prototype.interfaces_=function(){return[]},xd.prototype.getClass=function(){return xd};var bd=function(){this._items=new lc};bd.prototype.visitItem=function(t){this._items.add(t)},bd.prototype.getItems=function(){return this._items},bd.prototype.interfaces_=function(){return[Jh]},bd.prototype.getClass=function(){return bd};var Ed=function(){this._index=null;var t=arguments[0];if(!dl(t,Zc))throw new el("Argument must be Polygonal");this._index=new Sd(t)},wd={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Ed.prototype.locate=function(t){var e=new Vl(t),n=new Md(e);return this._index.query(t.y,t.y,n),e.getLocation()},Ed.prototype.interfaces_=function(){return[Uf]},Ed.prototype.getClass=function(){return Ed},wd.SegmentVisitor.get=function(){return Md},wd.IntervalIndexedGeometry.get=function(){return Sd},Object.defineProperties(Ed,wd);var Md=function(){this._counter=null;var t=arguments[0];this._counter=t};Md.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Md.prototype.interfaces_=function(){return[Jh]},Md.prototype.getClass=function(){return Md};var Sd=function(){this._index=new xd;var t=arguments[0];this.init(t)};Sd.prototype.init=function(t){for(var e=Np.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Sd.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new mf(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Sd.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new bd;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Sd.prototype.interfaces_=function(){return[]},Sd.prototype.getClass=function(){return Sd};var Cd=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new ph,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Ip,2===arguments.length){var e=arguments[0],n=arguments[1],r=Jl.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Ch.ON)===fl.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new pd(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),s=this._parentGeom instanceof nh||this._parentGeom instanceof th||this._parentGeom instanceof rh,a=n||!s;return o.computeIntersections(this._edges,i,a),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new pd(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jc){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,fl.INTERIOR)}else if(arguments[0]instanceof ul){var e=arguments[0];this.insertPoint(this._argIndex,e,fl.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),fl.EXTERIOR,fl.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,fl.INTERIOR,fl.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],fl.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],fl.BOUNDARY)},e.prototype.addLineString=function(t){var e=fc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new op(e,new Ah(this._argIndex,fl.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),jl.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===fl.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=fc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Xl.isCCW(r)&&(i=n,o=e);var s=new op(r,new Ah(this._argIndex,fl.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],fl.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Ah(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new dd},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof rh&&(this._useBoundaryDeterminationRule=!1),e instanceof th)this.addPolygon(e);else if(e instanceof $c)this.addLineString(e);else if(e instanceof Jc)this.addPoint(e);else if(e instanceof eh)this.addCollection(e);else if(e instanceof zc)this.addCollection(e);else if(e instanceof rh)this.addCollection(e);else{if(!(e instanceof Fc))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return dl(this._parentGeom,Zc)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Ed(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?fl.BOUNDARY:fl.INTERIOR},e}(Wh),Nd=function(){if(this._li=new Bl,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Cd(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=Jl.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Cd(0,e,r),this._arg[1]=new Cd(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Cd(0,i,s),this._arg[1]=new Cd(1,o,s)}};Nd.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Nd.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Nd.prototype.interfaces_=function(){return[]},Nd.prototype.getClass=function(){return Nd};var Id=function(){};Id.prototype.interfaces_=function(){return[]},Id.prototype.getClass=function(){return Id},Id.map=function(){if(arguments[0]instanceof Hl&&dl(arguments[1],Id.MapOp)){for(var t=arguments[0],e=arguments[1],n=new lc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(dl(arguments[0],ic)&&dl(arguments[1],Id.MapOp)){for(var o=arguments[0],s=arguments[1],a=new lc,u=o.iterator();u.hasNext();){var l=u.next(),c=s.map(l);null!==c&&a.add(c)}return a}},Id.MapOp=function(){};var Pd=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Ip,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new $f,this._resultPolyList=new lc,this._resultLineList=new lc,this._resultPointList=new lc,this._graph=new Wh(new Hf),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ah(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new lc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==fl.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new lc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new lc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Wp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Hh(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Qp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new $p(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ch.RIGHT),i.getLocation(1,Ch.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(jl.isTrue(!r.isNull(i,Ch.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ch.LEFT,r.getLocation(i,Ch.LEFT)),jl.isTrue(!r.isNull(i,Ch.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ch.RIGHT,r.getLocation(i,Ch.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nd);Pd.overlayOp=function(t,e,n){return new Pd(t,e).getResultGeometry(n)},Pd.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Pd.createEmptyResult(Pd.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Hp.map(t,{interfaces_:function(){return[Id.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Pd.INTERSECTION)},Pd.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Pd.createEmptyResult(Pd.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Pd.SYMDIFFERENCE)},Pd.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Pd.INTERSECTION:o=Math.min(r,i);break;case Pd.UNION:o=Math.max(r,i);break;case Pd.DIFFERENCE:o=r;break;case Pd.SYMDIFFERENCE:o=Math.max(r,i)}return o},Pd.createEmptyResult=function(t,e,n,r){var i=null;switch(Pd.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Pd.difference=function(t,e){return t.isEmpty()?Pd.createEmptyResult(Pd.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Pd.DIFFERENCE))},Pd.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Pd.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===fl.BOUNDARY&&(i=fl.INTERIOR),o===fl.BOUNDARY&&(o=fl.INTERIOR),s){case Pd.INTERSECTION:return i===fl.INTERIOR&&o===fl.INTERIOR;case Pd.UNION:return i===fl.INTERIOR||o===fl.INTERIOR;case Pd.DIFFERENCE:return i===fl.INTERIOR&&o!==fl.INTERIOR;case Pd.SYMDIFFERENCE:return i===fl.INTERIOR&&o!==fl.INTERIOR||i!==fl.INTERIOR&&o===fl.INTERIOR}return!1}},Pd.INTERSECTION=1,Pd.UNION=2,Pd.DIFFERENCE=3,Pd.SYMDIFFERENCE=4;var Ld=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Ip,this._seg=new mf;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ld.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Ld.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?fl.BOUNDARY:this._ptLocator.locate(t,this._g)},Ld.prototype.extractLinework=function(t){var e=new Od;t.apply(e);var n=e.getLinework(),r=mh.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ld.prototype.interfaces_=function(){return[]},Ld.prototype.getClass=function(){return Ld};var Od=function(){this._linework=null,this._linework=new lc};Od.prototype.getLinework=function(){return this._linework},Od.prototype.filter=function(t){if(t instanceof th){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Od.prototype.interfaces_=function(){return[Ac]},Od.prototype.getClass=function(){return Od};var Rd=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Rd.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Rd.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Rd.prototype.getPoints=function(t){for(var e=new lc,n=Np.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Rd.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,l=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var h=new ul(l-u,c+a);r.add(h)}if(this._doRight){var f=new ul(l+u,c-a);r.add(f)}},Rd.prototype.interfaces_=function(){return[]},Rd.prototype.getClass=function(){return Rd};var kd=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new lc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ld(this._geom[0],this._boundaryDistanceTolerance),new Ld(this._geom[1],this._boundaryDistanceTolerance),new Ld(this._geom[2],this._boundaryDistanceTolerance)]},Td={TOLERANCE:{configurable:!0}};kd.prototype.reportResult=function(t,e,n){Il.out.println("Overlay result invalid - A:"+fl.toLocationSymbol(e[0])+" B:"+fl.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+fl.toLocationSymbol(e[2]))},kd.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},kd.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!kd.hasLocation(this._location,fl.BOUNDARY)||this.isValidResult(i,this._location)}},kd.prototype.addTestPts=function(t){var e=new Rd(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},kd.prototype.isValidResult=function(t,e){var n=Pd.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===fl.INTERIOR);return r||this.reportResult(t,e,n),r},kd.prototype.getInvalidLocation=function(){return this._invalidLocation},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd},kd.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},kd.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zp.computeSizeBasedSnapTolerance(t),Zp.computeSizeBasedSnapTolerance(e))},kd.isValid=function(t,e,n,r){return new kd(t,e,r).isValid(n)},Td.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(kd,Td);var Ad=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ad.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ad.prototype.combine=function(){for(var t=new lc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ad.prototype.interfaces_=function(){return[]},Ad.prototype.getClass=function(){return Ad},Ad.combine=function(){if(1===arguments.length)return new Ad(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ad(Ad.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ad(Ad.createList(n,r,i)).combine()}},Ad.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ad.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new lc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new lc;return s.add(r),s.add(i),s.add(o),s}};var Dd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new lc)},Fd={STRTREE_NODE_CAPACITY:{configurable:!0}};Dd.prototype.reduceToGeometries=function(t){for(var e=new lc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;dl(r,ac)?i=this.unionTree(r):r instanceof Hl&&(i=r),e.add(i)}return e},Dd.prototype.extractByEnvelope=function(t,e,n){for(var r=new lc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Dd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ad.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Dd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new lf(Dd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Dd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Dd.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Dd.getGeometry(e,n),Dd.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},Dd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Dd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Dd.prototype.unionActual=function(t,e){return Dd.restrictToPolygons(t.union(e))},Dd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Dd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new lc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);return r.add(s),Ad.combine(r)},Dd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd},Dd.restrictToPolygons=function(t){if(dl(t,Zc))return t;var e=Cp.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(mh.toPolygonArray(e))},Dd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Dd.union=function(t){return new Dd(t).union()},Fd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dd,Fd);var zd=function(){};function jd(){return new qd}function qd(){this.reset()}zd.prototype.interfaces_=function(){return[]},zd.prototype.getClass=function(){return zd},zd.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Pd.createEmptyResult(Pd.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ud.overlayOp(t,e,Pd.UNION)},qd.prototype={constructor:qd,reset:function(){this.s=this.t=0},add:function(t){Bd(Gd,t,this.t),Bd(this,Gd.s,this.s),this.s?this.t+=Gd.t:this.s=Gd.t},valueOf:function(){return this.s}};var Gd=new qd;function Bd(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Ud=1e-6,Vd=Math.PI,Xd=Vd/2,Yd=Vd/4,Wd=2*Vd,Hd=180/Vd,Qd=Vd/180,$d=Math.abs,Kd=Math.atan,Jd=Math.atan2,Zd=Math.cos,tg=Math.sin,eg=Math.sqrt;function ng(t){return t>1?0:t<-1?Vd:Math.acos(t)}function rg(t){return t>1?Xd:t<-1?-Xd:Math.asin(t)}function ig(){}function og(t,e){t&&lg.hasOwnProperty(t.type)&&lg[t.type](t,e)}var sg,ag,ug={Feature:function(t,e){og(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)og(n[r].geometry,e)}},lg={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){cg(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)cg(n[r],e,0)},Polygon:function(t,e){hg(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)hg(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)og(n[r],e)}};function cg(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function hg(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)cg(t[n],e,1);e.polygonEnd()}function fg(t){return[Jd(t[1],t[0]),rg(t[2])]}function pg(t){var e=t[0],n=t[1],r=Zd(n);return[r*Zd(e),r*tg(e),tg(n)]}function dg(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function gg(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function yg(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vg(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function mg(t){var e=eg(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _g(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function xg(t,e){return[t>Vd?t-Wd:t<-Vd?t+Wd:t,e]}function bg(t){return function(e,n){return[(e+=t)>Vd?e-Wd:e<-Vd?e+Wd:e,n]}}function Eg(t){var e=bg(t);return e.invert=bg(-t),e}function wg(t,e){var n=Zd(t),r=tg(t),i=Zd(e),o=tg(e);function s(t,e){var s=Zd(e),a=Zd(t)*s,u=tg(t)*s,l=tg(e),c=l*n+a*r;return[Jd(u*i-c*o,a*n-l*r),rg(c*i+u*o)]}return s.invert=function(t,e){var s=Zd(e),a=Zd(t)*s,u=tg(t)*s,l=tg(e),c=l*i-u*o;return[Jd(u*i+l*o,a*n+c*r),rg(c*n-a*r)]},s}function Mg(t,e){(e=pg(e))[0]-=t,mg(e);var n=ng(-e[1]);return((-e[2]<0?-n:n)+Wd-Ud)%Wd}function Sg(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:ig,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Cg(t,e){return $d(t[0]-e[0])<Ud&&$d(t[1]-e[1])<Ud}function Ng(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ig(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Cg(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else a.push(n=new Ng(r,t,null,!0)),u.push(n.o=new Ng(r,null,n,!1)),a.push(n=new Ng(s,t,null,!1)),u.push(n.o=new Ng(s,null,n,!0))}})),a.length){for(u.sort(e),Pg(a),Pg(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,c,h=a[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,s=l.length;o<s;++o)i.point((c=l[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Pg(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Lg(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Og(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}jd(),jd(),jd(),xg.invert=xg,1===(sg=Lg).length&&(ag=sg,sg=function(t,e){return Lg(ag(t),e)});var Rg=1e9,kg=-Rg;function Tg(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var c=0,h=0;if(null==i||(c=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+a+4)%4)!==h);else l.point(o[0],o[1])}function s(r,i){return $d(r[0]-t)<Ud?i>0?0:3:$d(r[0]-n)<Ud?i>0?2:1:$d(r[1]-e)<Ud?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,c,h,f,p,d,g,y,v,m,_=s,x=Sg(),b={point:E,lineStart:function(){b.point=w,l&&l.push(c=[]),v=!0,y=!1,d=g=NaN},lineEnd:function(){u&&(w(h,f),p&&y&&x.rejoin(),u.push(x.result())),b.point=E,y&&_.lineEnd()},polygonStart:function(){_=x,u=[],l=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,c=a.length,h=a[0],f=h[0],p=h[1];u<c;++u)o=f,s=p,f=(h=a[u])[0],p=h[1],s<=r?p>r&&(f-o)*(r-s)>(p-s)*(t-o)&&++e:p<=r&&(f-o)*(r-s)<(p-s)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Og(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&Ig(u,a,e,o,s),s.polygonEnd()),_=s,u=l=c=null}};function E(t,e){i(t,e)&&_.point(t,e)}function w(o,s){var a=i(o,s);if(l&&c.push([o,s]),v)h=o,f=s,p=a,v=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&y)_.point(o,s);else{var u=[d=Math.max(kg,Math.min(Rg,d)),g=Math.max(kg,Math.min(Rg,g))],x=[o=Math.max(kg,Math.min(Rg,o)),s=Math.max(kg,Math.min(Rg,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,c=1,h=e[0]-a,f=e[1]-u;if(s=n-a,h||!(s>0)){if(s/=h,h<0){if(s<l)return;s<c&&(c=s)}else if(h>0){if(s>c)return;s>l&&(l=s)}if(s=i-a,h||!(s<0)){if(s/=h,h<0){if(s>c)return;s>l&&(l=s)}else if(h>0){if(s<l)return;s<c&&(c=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<c&&(c=s)}else if(f>0){if(s>c)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>c)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<c&&(c=s)}return l>0&&(t[0]=a+l*h,t[1]=u+l*f),c<1&&(e[0]=a+c*h,e[1]=u+c*f),!0}}}}}(u,x,t,e,n,r)?a&&(_.lineStart(),_.point(o,s),m=!1):(y||(_.lineStart(),_.point(u[0],u[1])),_.point(x[0],x[1]),a||_.lineEnd(),m=!1)}d=o,g=s,y=a}return b}}var Ag=jd();function Dg(t){return t}jd(),jd(),jd();var Fg=1/0,zg=Fg,jg=-Fg,qg=jg,Gg={point:function(t,e){t<Fg&&(Fg=t),t>jg&&(jg=t),e<zg&&(zg=e),e>qg&&(qg=e)},lineStart:ig,lineEnd:ig,polygonStart:ig,polygonEnd:ig,result:function(){var t=[[Fg,zg],[jg,qg]];return jg=qg=-(zg=Fg=1/0),t}};function Bg(t,e,n,r){return function(i,o){var s,a,u,l=e(o),c=i.invert(r[0],r[1]),h=Sg(),f=e(h),p=!1,d={point:g,lineStart:v,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=x,d.lineEnd=b,a=[],s=[]},polygonEnd:function(){d.point=g,d.lineStart=v,d.lineEnd=m,a=Og(a);var t=function(t,e){var n=e[0],r=e[1],i=[tg(n),-Zd(n),0],o=0,s=0;Ag.reset();for(var a=0,u=t.length;a<u;++a)if(c=(l=t[a]).length)for(var l,c,h=l[c-1],f=h[0],p=h[1]/2+Yd,d=tg(p),g=Zd(p),y=0;y<c;++y,f=m,d=x,g=b,h=v){var v=l[y],m=v[0],_=v[1]/2+Yd,x=tg(_),b=Zd(_),E=m-f,w=E>=0?1:-1,M=w*E,S=M>Vd,C=d*x;if(Ag.add(Jd(C*w*tg(M),g*b+C*Zd(M))),o+=S?E+w*Wd:E,S^f>=n^m>=n){var N=gg(pg(h),pg(v));mg(N);var I=gg(i,N);mg(I);var P=(S^E>=0?-1:1)*rg(I[2]);(r>P||r===P&&(N[0]||N[1]))&&(s+=S^E>=0?1:-1)}}return(o<-1e-6||o<Ud&&Ag<-1e-6)^1&s}(s,c);a.length?(p||(o.polygonStart(),p=!0),Ig(a,Vg,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function y(t,e){var n=i(t,e);l.point(n[0],n[1])}function v(){d.point=y,l.lineStart()}function m(){d.point=g,l.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function x(){f.lineStart(),u=[]}function b(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),l=h.result(),c=l.length;if(u.pop(),s.push(u),u=null,c)if(1&i){if((e=(n=l[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&l.push(l.pop().concat(l.shift())),a.push(l.filter(Ug))}return d}}function Ug(t){return t.length>1}function Vg(t,e){return((t=t.x)[0]<0?t[1]-Xd-Ud:Xd-t[1])-((e=e.x)[0]<0?e[1]-Xd-Ud:Xd-e[1])}jd();var Xg=Bg((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Vd:-Vd,u=$d(o-n);$d(u-Vd)<Ud?(t.point(n,r=(r+s)/2>0?Xd:-Xd),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=Vd&&($d(n-i)<Ud&&(n-=i*Ud),$d(o-a)<Ud&&(o-=a*Ud),r=function(t,e,n,r){var i,o,s=tg(t-n);return $d(s)>Ud?Kd((tg(e)*(o=Zd(r))*tg(n)-tg(r)*(i=Zd(e))*tg(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Xd,r.point(-Vd,i),r.point(0,i),r.point(Vd,i),r.point(Vd,0),r.point(Vd,-i),r.point(0,-i),r.point(-Vd,-i),r.point(-Vd,0),r.point(-Vd,i);else if($d(t[0]-e[0])>Ud){var o=t[0]<e[0]?Vd:-Vd;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Vd,-Xd]);function Yg(t,e){var n=Zd(t),r=n>0,i=$d(n)>Ud;function o(t,e){return Zd(t)*Zd(e)>n}function s(t,e,r){var i=[1,0,0],o=gg(pg(t),pg(e)),s=dg(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var l=n*s/u,c=-n*a/u,h=gg(i,o),f=vg(i,l);yg(f,vg(o,c));var p=h,d=dg(f,p),g=dg(p,p),y=d*d-g*(dg(f,f)-1);if(!(y<0)){var v=eg(y),m=vg(p,(-d-v)/g);if(yg(m,f),m=fg(m),!r)return m;var _,x=t[0],b=e[0],E=t[1],w=e[1];b<x&&(_=x,x=b,b=_);var M=b-x,S=$d(M-Vd)<Ud;if(!S&&w<E&&(_=E,E=w,w=_),S||M<Ud?S?E+w>0^m[1]<($d(m[0]-x)<Ud?E:w):E<=m[1]&&m[1]<=w:M>Vd^(x<=m[0]&&m[0]<=b)){var C=vg(p,(-d+v)/g);return yg(C,f),[m,fg(C)]}}}function a(e,n){var i=r?t:Vd-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Bg(o,(function(t){var e,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,f){var p,d=[h,f],g=o(h,f),y=r?g?0:a(h,f):g?a(h+(h<0?Vd:-Vd),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(p=s(e,d))||Cg(e,p)||Cg(d,p))&&(d[0]+=Ud,d[1]+=Ud,g=o(d[0],d[1])),g!==u)c=0,g?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var v;y&n||!(v=s(d,e,!0))||(c=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&Cg(e,d)||t.point(d[0],d[1]),e=d,u=g,n=y},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var s=Zd(e),a=tg(e),u=r*n;null==i?(i=e+r*Wd,o=e-u/2):(i=Mg(s,i),o=Mg(s,o),(r>0?i<o:i>o)&&(i+=r*Wd));for(var l,c=i;r>0?c>o:c<o;c-=u)l=fg([s,-a*Zd(c),-a*tg(c)]),t.point(l[0],l[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-Vd,t-Vd])}function Wg(t){return function(e){var n=new Hg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Hg(){}function Qg(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&ug.hasOwnProperty(t.type)?ug[t.type](t,e):og(t,e)}(n,t.stream(Gg));var s=Gg.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Hg.prototype={constructor:Hg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $g=Zd(30*Qd);function Kg(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,l,c,h,f,p,d,g,y){var v=l-r,m=c-i,_=v*v+m*m;if(_>4*e&&g--){var x=s+f,b=a+p,E=u+d,w=eg(x*x+b*b+E*E),M=rg(E/=w),S=$d($d(E)-1)<Ud||$d(o-h)<Ud?(o+h)/2:Jd(b,x),C=t(S,M),N=C[0],I=C[1],P=N-r,L=I-i,O=m*P-v*L;(O*O/_>e||$d((v*P+m*L)/_-.5)>.3||s*f+a*p+u*d<$g)&&(n(r,i,o,s,a,u,N,I,S,x/=w,b/=w,E,g,y),y.point(N,I),n(N,I,S,x,b,E,l,c,h,f,p,d,g,y))}}return function(e){var r,i,o,s,a,u,l,c,h,f,p,d,g={point:y,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){c=NaN,g.point=m,e.lineStart()}function m(r,i){var o=pg([r,i]),s=t(r,i);n(c,h,l,f,p,d,c=s[0],h=s[1],l=r,f=o[0],p=o[1],d=o[2],16,e),e.point(c,h)}function _(){g.point=y,e.lineEnd()}function x(){v(),g.point=b,g.lineEnd=E}function b(t,e){m(r=t,e),i=c,o=h,s=f,a=p,u=d,g.point=m}function E(){n(c,h,l,f,p,d,i,o,r,s,a,u,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return Wg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Jg=Wg({point:function(t,e){this.stream.point(t*Qd,e*Qd)}});function Zg(t){return function(t){var e,n,r,i,o,s,a,u,l,c,h=150,f=480,p=250,d=0,g=0,y=0,v=0,m=0,_=null,x=Xg,b=null,E=Dg,w=.5,M=Kg(N,w);function S(t){return[(t=o(t[0]*Qd,t[1]*Qd))[0]*h+n,r-t[1]*h]}function C(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*Hd,t[1]*Hd]}function N(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function I(){o=_g(i=function(t,e,n){return(t%=Wd)?e||n?_g(Eg(t),wg(e,n)):Eg(t):e||n?wg(e,n):xg}(y,v,m),e);var t=e(d,g);return n=f-t[0]*h,r=p+t[1]*h,P()}function P(){return l=c=null,S}return S.stream=function(t){return l&&c===t?l:l=Jg(x(i,M(E(c=t))))},S.clipAngle=function(t){return arguments.length?(x=+t?Yg(_=t*Qd,6*Qd):(_=null,Xg),P()):_*Hd},S.clipExtent=function(t){return arguments.length?(E=null==t?(b=s=a=u=null,Dg):Tg(b=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),P()):null==b?null:[[b,s],[a,u]]},S.scale=function(t){return arguments.length?(h=+t,I()):h},S.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],I()):[f,p]},S.center=function(t){return arguments.length?(d=t[0]%360*Qd,g=t[1]%360*Qd,I()):[d*Hd,g*Hd]},S.rotate=function(t){return arguments.length?(y=t[0]%360*Qd,v=t[1]%360*Qd,m=t.length>2?t[2]%360*Qd:0,I()):[y*Hd,v*Hd,m*Hd]},S.precision=function(t){return arguments.length?(M=Kg(N,w=t*t),P()):eg(w)},S.fitExtent=function(t,e){return Qg(S,t,e)},S.fitSize=function(t,e){return function(t,e,n){return Qg(t,[[0,0],e],n)}(S,t,e)},function(){return e=t.apply(this,arguments),S.invert=e.invert&&C,I()}}((function(){return t}))()}var ty=function(t){return function(e,n){var r=Zd(e),i=Zd(n),o=t(r*i);return[o*i*tg(e),o*tg(n)]}}((function(t){return(t=ng(t))&&t/tg(t)}));function ey(){return Zg(ty).scale(79.4188).clipAngle(179.999)}function ny(t,n,r,i){var s=t.properties||{},a="Feature"===t.type?t.geometry:t;if("GeometryCollection"===a.type){var u=[];return j(t,(function(t){var e=ny(t,n,r,i);e&&u.push(e)})),p(u)}var l=function(t){var n=xn(t).geometry.coordinates,r=[-n[0],-n[1]];return ey().rotate(r).scale(e)}(a),c={type:a.type,coordinates:iy(a.coordinates,l)},h=(new Mh).read(c),f=_(x(n,r),"meters"),d=mp.bufferOp(h,f,i);if(!ry((d=(new Sh).write(d)).coordinates))return o({type:d.type,coordinates:oy(d.coordinates,l)},s)}function ry(t){return Array.isArray(t[0])?ry(t[0]):isNaN(t[0])}function iy(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return iy(t,e)}))}function oy(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return oy(t,e)}))}function sy(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=Zu.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?l(o[0],n.properties):y(o,n.properties)}function ay(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],s=t[2],a=t[3],u=(o+a)/2,l=(i+s)/2,c=2*e/_e([i,u],[s,u],n)*(s-i),h=2*e/_e([l,o],[l,a],n)*(a-o),f=c/2,d=2*f,g=Math.sqrt(3)/2*h,y=s-i,v=a-o,m=3/4*d,_=g,x=(y-d)/(d-f/2),b=Math.floor(x),E=(b*m-f/2-y)/2-f/2+m/2,w=Math.floor((v-g)/g),M=(v-w*g)/2,S=w*g-v>g/2;S&&(M-=g/4);for(var C=[],N=[],I=0;I<6;I++){var P=2*Math.PI/6*I;C.push(Math.cos(P)),N.push(Math.sin(P))}for(var L=[],O=0;O<=b;O++)for(var R=0;R<=w;R++){var k=O%2==1;if(!(0===R&&k||0===R&&S)){var T=O*m+i-E,A=R*_+o+M;if(k&&(A-=g/2),!0===n.triangles)ly([T,A],c/2,h/2,JSON.parse(r),C,N).forEach((function(t){n.mask?sy(n.mask,t)&&L.push(t):L.push(t)}));else{var D=uy([T,A],c/2,h/2,JSON.parse(r),C,N);n.mask?sy(n.mask,D)&&L.push(D):L.push(D)}}}return p(L)}function uy(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],c=t[1]+n*o[a];s.push([u,c])}return s.push(s[0].slice()),l([s],r)}function ly(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(l([u],r))}return s}function cy(t){return y(t)}function hy(t){return l(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}function fy(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],s=t[1],a=t[2],u=t[3],c=e/_e([o,s],[a,s],r)*(a-o),h=n/_e([o,s],[o,u],r)*(u-s),f=a-o,d=u-s,g=Math.floor(f/c),y=Math.floor(d/h),v=(d-y*h)/2,m=o+(f-g*c)/2,_=0;_<g;_++){for(var x=s+v,b=0;b<y;b++){var E=l([[[m,x],[m,x+h],[m+c,x+h],[m+c,x],[m,x]]],r.properties);r.mask?Is(r.mask,E)&&i.push(E):i.push(E),x+=h}m+=c}return p(i)}(t,e,e,n)}function py(t,e,n){void 0===n&&(n={});for(var r=[],i=e/_e([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/_e([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,c=t[1];c<=t[3];){var h=null,f=null;s%2==0&&u%2==0?(h=l([[[a,c],[a,c+o],[a+i,c],[a,c]]],n.properties),f=l([[[a,c+o],[a+i,c+o],[a+i,c],[a,c+o]]],n.properties)):s%2==0&&u%2==1?(h=l([[[a,c],[a+i,c+o],[a+i,c],[a,c]]],n.properties),f=l([[[a,c],[a,c+o],[a+i,c+o],[a,c]]],n.properties)):u%2==0&&s%2==1?(h=l([[[a,c],[a,c+o],[a+i,c+o],[a,c]]],n.properties),f=l([[[a,c],[a+i,c+o],[a+i,c],[a,c]]],n.properties)):u%2==1&&s%2==1&&(h=l([[[a,c],[a,c+o],[a+i,c],[a,c]]],n.properties),f=l([[[a,c+o],[a+i,c+o],[a+i,c],[a,c+o]]],n.properties)),n.mask?(sy(n.mask,h)&&r.push(h),sy(n.mask,f)&&r.push(f)):(r.push(h),r.push(f)),c+=o,u++}s++,a+=i}return p(r)}ty.invert=function(t){return function(e,n){var r=eg(e*e+n*n),i=t(r),o=tg(i),s=Zd(i);return[Jd(e*o,r*s),rg(r&&n*o/r)]}}((function(t){return t})),t.along=function(t,e,n){void 0===n&&(n={});for(var r=rt(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var u=_n(r[o],r[o-1])-180;return vn(r[o],s,u,n)}return a(r[o])}i+=_e(r[o],r[o+1],n)}return a(r[r.length-1])},t.angle=function(t,e,n,r){if(void 0===r&&(r={}),!I(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=E(!0!==r.mercator?_n(i,o):qi(i,o)),u=E(!0!==r.mercator?_n(s,o):qi(s,o)),l=Math.abs(a-u);return!0===r.explementary?360-l:l},t.applyFilter=uu,t.area=Br,t.areaFactors=i,t.bbox=$,t.bboxClip=function(t,e){var n=rt(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,l=Ri(t[0],e),c=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],i=o=Ri(a=t[r],e);;){if(!(l|i)){c.push(s),i!==o?(c.push(a),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(a);break}if(l&i)break;l?l=Ri(s=Oi(s,a,l,e),e):i=Ri(a=Oi(s,a,i,e),e)}l=o}c.length&&n.push(c)}(t,e,s)})),1===s.length?h(s[0],i):d(s,i);case"Polygon":return l(ki(o,e),i);case"MultiPolygon":return y(o.map((function(t){return ki(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},t.bboxPolygon=dn,t.bearing=_n,t.bearingToAngle=E,t.bearingToAzimuth=E,t.bezier=pn,t.bezierSpline=pn,t.booleanClockwise=Yi,t.booleanContains=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":if("Point"===o)return vs(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(vs(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,s=0,a=t.coordinates;s<a.length;s++)if(vs(i,a[s])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Hr(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Hr({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Hr({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Hr(o,t,{ignoreEndVertices:!0})&&(n=!0),!Hr(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return ye(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!ys($(t),$(e)))return!1;for(;r<e.coordinates.length-1;r++)if(ye({type:"Point",coordinates:ms(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!ys($(t),$(e)))return!1;for(var n=0,r=rt(e).coordinates;n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++)if(!ye(o[i],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!ye(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return _s(n,r);case"Polygon":return bs(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return _s(r,n);case"LineString":return function(t,e){if(Or(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Es(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return xs(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return bs(r,n);case"LineString":return xs(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanDisjoint=fs,t.booleanEqual=function(t,e){return rt(t).type===rt(e).type&&new Ns({precision:6}).compare(tn(t),tn(e))},t.booleanIntersects=Is,t.booleanOverlap=function(t,e){var n=rt(t),r=rt(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new Ns({precision:6}).compare(t,e))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<n.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=n.coordinates[a],c=r.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":U(t,(function(t){U(e,(function(e){Fi(t,e).features.length&&s++}))}));break;case"Polygon":case"MultiPolygon":U(t,(function(t){U(e,(function(e){Or(t,e).features.length&&s++}))}))}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Us(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Us(e,"line2"))throw new Error("line2 must be a LineString");for(var n=$n(tn(t)).features,r=$n(tn(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!Bs(o,r[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=ye,t.booleanPointOnLine=Hr,t.booleanWithin=$r,t.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return j(t,(function(t){var n=ny(t,e,r,i);n&&o.push(n)})),p(o);case"FeatureCollection":return D(t,(function(t){var n=ny(t,e,r,i);n&&D(n,(function(t){t&&o.push(t)}))})),p(o)}return ny(t,e,r,i)},t.center=xn,t.centerMean=Da,t.centerMedian=function(t,e){if(void 0===e&&(e={}),!I(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!N(n))throw new Error("counter must be a number");var r=e.weight,i=Da(t,{weight:e.weight}),o=p([]);D(t,(function(t){var e;o.features.push(bn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}));var s={tolerance:e.tolerance,medianCandidates:[]};return Fa(i.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),it(e)){case"Point":return a(K(e),n.properties);case"Polygon":var r=[];R(e,(function(t){r.push(t)}));var i,o,s,u,l,c,h,f,p=bn(e,{properties:n.properties}),d=p.geometry.coordinates,g=0,y=0,v=0,m=r.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(i=0;i<r.length-1;i++)u=(o=m[i])[0],c=o[1],l=(s=m[i+1])[0],v+=f=u*(h=s[1])-l*c,g+=(u+l)*f,y+=(c+h)*f;if(0===v)return p;var _=1/(.5*v*6);return a([d[0]+_*g,d[1]+_*y],n.properties);default:var x=ge(e);return x?t(x,{properties:n.properties}):bn(e,{properties:n.properties})}},t.centroid=bn,t.circle=mn,t.cleanCoords=tn,t.clone=Me,t.clusterEach=ou,t.clusterReduce=su,t.clusters=hu,t.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Me(t)),n.minPoints=n.minPoints||3;var r=new ks.DBSCAN,i=r.run(z(t),S(e,n.units),n.minPoints,_e),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},t.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Me(t));var r=z(t),i=r.slice(0,e.numberOfClusters),o=Gs(r,e.numberOfClusters,i),s={};return o.centroids.forEach((function(t,e){s[e]=t})),D(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]})),t},t.collect=function(t,e,n,r){var i=St(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=$(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){ye([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},t.collectionOf=nt,t.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return D(t,(function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),p(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return o({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},t.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=xe(function(t){var e=[],n={};return D(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),p(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=_e(r,i,e),a=_e(i,o,e),u=_e(r,o,e);return s<=n&&a<=n&&u<=n})),r.features.length<1)return null;var i=Ze(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),o(i)},t.containsNumber=Z,t.convertArea=C,t.convertDistance=S,t.convertLength=S,t.convex=ge,t.coordAll=z,t.coordEach=R,t.coordReduce=k,t.createBins=au,t.degrees2radians=M,t.degreesToRadians=M,t.destination=vn,t.difference=function(t,e){var n=rt(t),r=rt(e),i=t.properties||{},o=Zu.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?l(o[0],i):y(o,i)},t.dissolve=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;nt(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return ni(y(Zu.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var i={};D(t,(function(t){Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t)}));for(var o=Object.keys(i),s=0;s<o.length;s++){var a=y(Zu.union.apply(null,i[o[s]].map((function(t){return t.geometry.coordinates}))));a.properties[n]=o[s],r.push(a)}return ni(p(r))},t.distance=_e,t.distanceToDegrees=b,t.distanceToRadians=x,t.distanceWeight=Ba,t.earthRadius=e,t.ellipse=Ta,t.envelope=gn,t.explode=En,t.factors=n,t.feature=o,t.featureCollection=p,t.featureEach=D,t.featureOf=et,t.featureReduce=F,t.filterProperties=cu,t.findPoint=H,t.findSegment=W,t.flatten=ni,t.flattenEach=G,t.flattenReduce=B,t.flip=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Me(t)),R(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},t.geojsonType=tt,t.geomEach=j,t.geomReduce=q,t.geometry=s,t.geometryCollection=v,t.getCluster=iu,t.getCoord=K,t.getCoords=J,t.getGeom=rt,t.getType=it,t.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=K(t),e=K(e),r=r||{},i=i||100,o=o||10,new vi({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.helpers=O,t.hexGrid=ay,t.inside=ye,t.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(nt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=$(t);switch(r){case"point":case"points":s=ti(a,e,n);break;case"square":case"squares":s=fy(a,e,n);break;case"hex":case"hexes":s=ay(a,e,n);break;case"triangle":case"triangles":s=py(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return D(s,(function(e){var s=0,a=0;D(t,(function(t){var u,l=_e("point"===r?e:bn(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var c=1/Math.pow(l,o);a+=c,s+=c*u}));var l=Me(e);l.properties[i]=s/a,u.push(l)})),p(u)},t.intersect=sy,t.invariant=ot,t.isNumber=N,t.isObject=I,t.isobands=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!I(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=$i(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=$o(Qo(Zi(t,o,s-o))),u={};u.groupedRings=a,u[n]=o+"-"+s,r.push(u)}return r}(s,e,r);return p((a=function(t,e,n){var r=$(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(a,s,t)).map((function(t,e){if(o[e]&&!I(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ct({},i,o[e]);return n[r]=t[r],y(t.groupedRings,n)})))},t.isolines=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(nt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!I(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=mt(t,{zProperty:r,flip:!0});return p(function(t,e,n){var r=$(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,c=i/u,h=o/l,f=function(t){t[0]=t[0]*c+s,t[1]=t[1]*h+a};return t.forEach((function(t){R(t,f)})),t}(function(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=ct({},r,i[s]);u[n]=a;var l=d(pt(t,a),u);o.push(l)}return o}(s,e,r,i,o),s,t))},t.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=zr(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(a([o[0],o[1]]))}}))})),r},t.length=Yr,t.lengthToDegrees=b,t.lengthToRadians=x,t.lineArc=Ei,t.lineChunk=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return G(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Yr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++)r(Wr(t,e*s,e*(s+1),{units:n}),s)}(t,e,r,(function(t){o.push(t)}))})),p(o)},t.lineDistance=Yr,t.lineEach=X,t.lineIntersect=Or,t.lineOffset=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=it(t),o=t.properties;switch(i){case"LineString":return os(t,e,r);case"MultiLineString":var s=[];return G(t,(function(t){s.push(os(t,e,r).geometry.coordinates)})),d(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.lineOverlap=Fi,t.lineReduce=Y,t.lineSegment=$n,t.lineSlice=function(t,e,n){var r=J(n);if("LineString"!==it(n))throw new Error("line must be a LineString");for(var i,o=kr(n,t),s=kr(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),h(a,n.properties)},t.lineSliceAlong=Wr,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=it(t),r=it(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=ei(e,{precision:7});switch(r){case"Point":return _i(t,i);case"MultiPoint":return mi(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return mi(t,Or(t,i))}},t.lineString=h,t.lineStringToPolygon=Ni,t.lineStrings=f,t.lineToPolygon=Ni,t.mask=function(t,e){var n,r=hy(e),i=null;return i="FeatureCollection"===t.type?cy(2===(n=t).features.length?Zu.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):Zu.union.apply(Zu,n.features.map((function(t){return t.geometry.coordinates})))):cy(Zu.union(t.geometry.coordinates)),i.geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r},t.meta=Q,t.midpoint=function(t,e){return vn(t,_e(t,e)/2,_n(t,e))},t.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,s=Ba(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),a=[];D(t,(function(t){var e=t.properties||{};a.push(e[n])}));for(var u=Ua(a),l=function(t){for(var e=Ua(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(a),c=0,h=0,f=0,p=0,d=s.length,g=0;g<d;g++){for(var y=0,v=0;v<d;v++)c+=s[g][v]*(a[g]-u)*(a[v]-u),h+=s[g][v],f+=Math.pow(s[g][v]+s[v][g],2),y+=s[g][v]+s[v][g];p+=Math.pow(y,2)}var m=c/h/l,_=-1/(d-1),x=(d*d*(f*=.5)-d*p+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,b=Math.sqrt(x);return{expectedMoranIndex:_,moranIndex:m,stdNorm:b,zNorm:(m-_)/b}},t.multiLineString=d,t.multiPoint=g,t.multiPolygon=y,t.nearest=Qn,t.nearestPoint=Qn,t.nearestPointOnLine=kr,t.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return j(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==it(e))throw new Error("line must be a LineString");var s=1/0,a=null;return D(o,(function(t){var n=Ar(t,e,{units:r});n<s&&(s=n,a=t)})),a&&(a.properties=ct({dist:s},a.properties,i)),a},t.planepoint=function(t,e){var n=K(t),r=rt(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],c=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==s?s:r[1][2],y=r[2][0],v=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-c)*(l-d)+f*(u-p)*(l-v)+g*(u-y)*(l-h)-g*(u-c)*(l-v)-m*(u-p)*(l-h)-f*(u-y)*(l-d))/((u-c)*(l-d)+(u-p)*(l-v)+(u-y)*(l-h)-(u-c)*(l-v)-(u-p)*(l-h)-(u-y)*(l-d))},t.point=a,t.pointGrid=ti,t.pointOnFeature=jr,t.pointOnLine=kr,t.pointOnSurface=jr,t.pointToLineDistance=Ar,t.points=u,t.pointsWithinPolygon=me,t.polygon=l,t.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return j(t,(function(t,e,i){var o,s,a;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<r;u++)a=[[]],s=t,u>0&&(s=l(o).geometry),ja(s,a),o=a.slice(0);n.push(l(o,i));break;case"MultiPolygon":o=[[[]]];for(var c=0;c<r;c++)a=[[[]]],s=t,c>0&&(s=y(o).geometry),qa(s,a),o=a.slice(0);n.push(y(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),p(n)},t.polygonTangents=function(t,e){var n,r,i,o,s=J(t),u=J(e),l=$(e),c=0,h=null;switch(s[0]>l[0]&&s[0]<l[2]&&s[1]>l[1]&&s[1]<l[3]&&(c=(h=Qn(t,En(e))).properties.featureIndex),it(e)){case"Polygon":n=u[0][c],r=u[0][0],null!==h&&h.geometry.coordinates[1]<s[1]&&(r=u[0][c]),o=Xi(u[0][0],u[0][u[0].length-1],s);var f=Ui(u[0],s,o,i,n,r);n=f[0],r=f[1];break;case"MultiPolygon":for(var d=0,g=0,y=0,v=0;v<u[0].length;v++){d=v;for(var m=!1,_=0;_<u[0][v].length;_++){if(g=_,y===c){m=!0;break}y++}if(m)break}n=u[0][d][g],r=u[0][d][g],o=Xi(u[0][0][0],u[0][0][u[0][0].length-1],s),u.forEach((function(t){var e=Ui(t[0],s,o,i,n,r);n=e[0],r=e[1]}))}return p([a(n),a(r)])},t.polygonToLine=Mi,t.polygonToLineString=Mi,t.polygonize=function(t){var e=hs.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){cs.findEdgeRingContaining(t,r)&&r.push(t)})),p(r.map((function(t){return t.toPolygon()})))},t.polygons=c,t.projection=Qa,t.propEach=T,t.propReduce=A,t.propertiesContainsFilter=lu,t.radians2degrees=w,t.radiansToDegrees=w,t.radiansToDistance=_,t.radiansToLength=_,t.random=ru,t.randomLineString=tu,t.randomPoint=Ja,t.randomPolygon=Za,t.randomPosition=Ka,t.rewind=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=Me(t));var i=[];switch(t.type){case"GeometryCollection":return j(t,(function(t){Wi(t,n)})),t;case"FeatureCollection":return D(t,(function(t){D(Wi(t,n),(function(t){i.push(t)}))})),p(i)}return Wi(t,n)},t.rhumbBearing=qi,t.rhumbDestination=Bi,t.rhumbDistance=Tr,t.round=m,t.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return p(function(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e))},t.sector=function(t,e,n,r,i){if(!I(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(ji(n)===ji(r))return mn(t,e,i);var s=J(t),a=Ei(t,e,n,r,i),u=[[s]];return R(a,(function(t){u[0].push(t)})),u[0].push(s),l(u,o)},t.segmentEach=U,t.segmentReduce=V,t.shortestPath=function(t,e,n){if(!I(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,s=n.obstacles||p([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!N(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var u=K(t),l=K(e);switch(t=a(u),e=a(l),it(s)){case"FeatureCollection":if(0===s.features.length)return h([u,l]);break;case"Polygon":s=p([o(rt(s))]);break;default:throw new Error("invalid obstacles")}var c=s;c.features.push(t),c.features.push(e);var f=$(ts(dn($(c)),1.15));r||(r=_e([f[0],f[1]],[f[2],f[1]],n)/100),c.features.pop(),c.features.pop();for(var d=f[0],g=f[1],y=f[2],v=f[3],m=r/_e([d,g],[y,g],n)*(y-d),_=r/_e([d,g],[d,v],n)*(v-g),x=y-d,b=v-g,E=Math.floor(x/m),w=Math.floor(b/_),M=(x-E*m)/2,S=[],C=[],P=[],L=[],O=1/0,R=1/0,k=v-(b-w*_)/2,T=0;k>=g;){for(var A=[],D=[],F=d+M,z=0;F<=y;){var j=a([F,k]),q=Qs(j,s);A.push(q?0:1),D.push(F+"|"+k);var G=_e(j,t);!q&&G<O&&(O=G,P={x:z,y:T});var B=_e(j,e);!q&&B<R&&(R=B,L={x:z,y:T}),F+=m,z++}C.push(A),S.push(D),k-=_,T++}var U=new Ys(C,{diagonal:!0}),V=U.grid[P.y][P.x],X=U.grid[L.y][L.x],Y=Xs.search(U,V,X),W=[u];return Y.forEach((function(t){var e=S[t.x][t.y].split("|");W.push([+e[0],+e[1]])})),W.push(l),tn(h(W))},t.simplify=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=Me(t)),j(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;tn(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=ln(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return ln(t,e,n)}));break;case"Polygon":t.coordinates=cn(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return cn(t,e,n)}))}}(t,n,r)})),t},t.square=yn,t.squareGrid=fy,t.standardDeviationalEllipse=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!N(n))throw new Error("steps must be a number");if(!I(i))throw new Error("properties must be a number");var o=z(t).length,s=Da(t,{weight:r}),a=0,u=0,l=0;D(t,(function(t){var e=t.properties[r]||1,n=za(J(t),J(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e}));var c=a-u,h=Math.sqrt(Math.pow(c,2)+4*Math.pow(l,2)),f=2*l,d=Math.atan((c+h)/f),g=180*d/Math.PI,y=0,v=0,m=0;D(t,(function(t){var e=t.properties[r]||1,n=za(J(t),J(s));y+=Math.pow(n.x*Math.cos(d)-n.y*Math.sin(d),2)*e,v+=Math.pow(n.x*Math.sin(d)+n.y*Math.cos(d),2)*e,m+=e}));var _=Math.sqrt(2*y/m),x=Math.sqrt(2*v/m),b=Ta(s,_,x,{units:"degrees",angle:g,steps:n,properties:i}),E=me(t,p([b])),w={meanCenterCoordinates:J(s),semiMajorAxis:_,semiMinorAxis:x,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*z(E).length/o};return b.properties.standardDeviationalEllipse=w,b},t.tag=function(t,e,n,r){return t=Me(t),e=Me(e),D(t,(function(t){t.properties||(t.properties={}),D(e,(function(e){void 0===t.properties[r]&&ye(t,e)&&(t.properties[r]=e.properties[n])}))})),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Hn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Hn(t))})),e},t.tin=xe,t.toMercator=Va,t.toWgs84=Xa,t.transformRotate=Zo,t.transformScale=ts,t.transformTranslate=function(t,e,n,r){if(!I(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==s&&void 0!==s||(t=Me(t)),R(t,(function(t){var r=J(Bi(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},t.triangleGrid=py,t.truncate=ei,t.union=function(t,e,n){void 0===n&&(n={});var r=rt(t),i=rt(e),o=Zu.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?l(o[0],n.properties):y(o,n.properties)},t.unitsFactors=r,t.unkinkPolygon=function(t){var e=[];return G(t,(function(t){"Polygon"===t.geometry.type&&D(oi(t),(function(n){e.push(l(n.geometry.coordinates,t.properties))}))})),p(e)},t.validateBBox=P,t.validateId=L,t.voronoi=function(t,e){if(!I(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return nt(t,"Point","points"),p(function(){var t=Ks,e=Js,n=null;function r(r){return new Ra(r.map((function(n,i){var o=[Math.round(t(n,i,r)/Pa)*Pa,Math.round(e(n,i,r)/Pa)*Pa];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:$s(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:$s(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(ka))},t.within=me,Object.defineProperty(t,"__esModule",{value:!0})}(Gn);const nr=t=>{const{lines:e}=(0,l.useContext)(S),n=(0,l.useRef)();(0,l.useEffect)((()=>{if(!n.current||!t.minimized)return;const e=new mapgl.Marker(n.current,{coordinates:t.center,icon:"data:image/svg+xml;base64,"+btoa(rr),anchor:[8,8],size:[16,16],interactive:!1,zIndex:5}),r=new mapgl.Polygon(n.current,{coordinates:er(t.center,t.centerAzimuth,45,50),color:"#aa00ff66",strokeColor:"#aa00ff66",strokeWidth:1,interactive:!1});return()=>{e.destroy(),r.destroy()}}),[t.center,t.minimized]),(0,l.useEffect)((()=>{n.current&&setTimeout((()=>n.current?.invalidateSize()),300)}),[t.minimized]),(0,l.useEffect)((()=>{const e=new mapgl.Map("map",{zoom:t.initialState.zoom,key:window.mapgl_key,disablePitchByUserInteraction:!0,disableRotationByUserInteraction:!0,useRtlTextPlugin:"always-on"});e.on("styleload",(()=>{e.addLayer({id:"my-lines",type:"line",filter:["==",["sourceAttr","foo"],"bar"],style:{width:2,color:"#ff000055"}})}));const r=e.getBounds();return t.onMoveEnd({center:e.getCenter(),zoom:e.getZoom(),bounds:{southWest:r.southWest,northEast:r.northEast}}),n.current=e,()=>{e.destroy()}}),[]),(0,l.useEffect)((()=>{console.log("SetCenter",t.center),n.current?.setCenter(t.center)}),[t.center]),(0,l.useEffect)((()=>{const e=n.current;if(!e)return;e.on("click",t.onClick),e.on("mousemove",t.onMouseMove),e.on("movestart",t.onMoveStart);const r=()=>{const n=e.getBounds();t.onMoveEnd({center:e.getCenter(),zoom:e.getZoom(),bounds:{southWest:n.southWest,northEast:n.northEast}})};return e.on("moveend",r),()=>{e.off("click",t.onClick),e.off("mousemove",t.onMouseMove),e.off("movestart",t.onMoveStart),e.off("moveend",r)}}),[n.current,t.onClick,t.onMouseMove,t.onMoveEnd,t.onMoveStart]);const r=(0,l.useRef)();return(0,l.useEffect)((()=>{const t=n.current;if(!t)return;const e=new mapgl.GeoJsonSource(t,{data:{type:"FeatureCollection",features:[]},attributes:{foo:"bar"}});return r.current=e,()=>{e.destroy()}}),[n.current]),(0,l.useEffect)((()=>{r.current&&r.current.setData(e)}),[r.current,e]),(0,s.jsx)(zn.Provider,{value:{map:n.current},children:t.children})},rr='<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n<circle fill="#aa00ff" cx="5" cy="5" r="5"/>\n<circle fill="#ffffff" cx="5" cy="5" r="2"/>\n</svg>';l=o("acw62");l=o("acw62");const ir=t=>{const{map:e}=(0,l.useContext)(zn);(0,l.useEffect)((()=>{if(!e||!t.point)return;const n=new mapgl.Marker(e,{coordinates:t.point.lngLat,icon:"data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10">\n<circle fill="#0000ff" cx="5" cy="5" r="5"/>\n<circle fill="#ffffff" cx="5" cy="5" r="2"/>\n</svg>'),anchor:[8,8],size:[16,16],interactive:!1,zIndex:5}),r=new mapgl.Polygon(e,{coordinates:er(t.point.lngLat,t.point.properties.azimuth,45,50),color:"#0000ff66",strokeColor:"#0000ff66",strokeWidth:1,interactive:!1});return()=>{n.destroy(),r.destroy()}}),[e,t.point])},or=(0,l.memo)((({lngLat:t})=>{const{map:e}=(0,l.useContext)(zn),{find:n}=(0,l.useContext)(S),r=(0,l.useMemo)((()=>{const e=n({lngLat:t,radius:5e3});return tr(t,e)}),[t]);ir({point:r});const[i,o]=(0,l.useState)(r?.properties),[a,u]=(0,l.useState)(!1),c=(0,l.useCallback)(h((t=>o(t)),300),[]);if((0,l.useEffect)((()=>{u(!1),c(r?.properties)}),[r?.properties.photo_url]),!e||!r)return null;const f=e.project(r.lngLat);return(0,s.jsx)("div",{className:"kHDDJq_root",style:{top:`${f[1]+15}px`,left:`${f[0]+15}px`},children:(0,s.jsx)("img",{style:{opacity:a?1:.5},src:i?.photo_url,onLoad:()=>u(!0)})})}));l=o("acw62");function sr(){return sr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sr.apply(this,arguments)}function ar(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function ur(t,e){return(ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lr(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ur(t,e)}function cr(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}l=o("acw62"),l=o("acw62");var hr={disabled:!1},fr=e(l=o("acw62")).createContext(null),pr=function(t){return t.scrollTop},dr=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i="exited",r.appearStatus="entering"):i="entered":i=e.unmountOnExit||e.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}lr(n,t),n.getDerivedStateFromProps=function(t,e){return t.in&&"unmounted"===e.status?{status:"exited"}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(e="entering"):"entering"!==n&&"entered"!==n||(e="exiting")}this.updateStatus(!1,e)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!=typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},r.updateStatus=function(t,n){if(void 0===t&&(t=!1),null!==n)if(this.cancelNextCallback(),"entering"===n){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:e(u).findDOMNode(this);r&&pr(r)}this.performEnter(t)}else this.performExit();else this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},r.performEnter=function(t){var n=this,r=this.props.enter,i=this.context?this.context.isMounting:t,o=this.props.nodeRef?[i]:[e(u).findDOMNode(this),i],s=o[0],a=o[1],l=this.getTimeouts(),c=i?l.appear:l.enter;!t&&!r||hr.disabled?this.safeSetState({status:"entered"},(function(){n.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:"entering"},(function(){n.props.onEntering(s,a),n.onTransitionEnd(c,(function(){n.safeSetState({status:"entered"},(function(){n.props.onEntered(s,a)}))}))})))},r.performExit=function(){var t=this,n=this.props.exit,r=this.getTimeouts(),i=this.props.nodeRef?void 0:e(u).findDOMNode(this);n&&!hr.disabled?(this.props.onExit(i),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(i),t.onTransitionEnd(r.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(i)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(i)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},r.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(t,n){this.setNextCallback(n);var r=this.props.nodeRef?this.props.nodeRef.current:e(u).findDOMNode(this),i=null==t&&!this.props.addEndListener;if(r&&!i){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],s=o[0],a=o[1];this.props.addEndListener(s,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if("unmounted"===t)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,ar(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e(l).createElement(fr.Provider,{value:null},"function"==typeof r?r(t,i):e(l).cloneElement(e(l).Children.only(r),i))},n}(e(l).Component);function gr(){}dr.contextType=fr,dr.propTypes={},dr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gr,onEntering:gr,onEntered:gr,onExit:gr,onExiting:gr,onExited:gr},dr.UNMOUNTED="unmounted",dr.EXITED="exited",dr.ENTERING="entering",dr.ENTERED="entered",dr.EXITING="exiting";var yr=dr,vr=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return r=e,void((n=t).classList?n.classList.add(r):function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")}(n,r)||("string"==typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))},mr=function(t,e){return t&&e&&e.split(" ").forEach((function(e){return r=e,void((n=t).classList?n.classList.remove(r):"string"==typeof n.className?n.className=cr(n.className,r):n.setAttribute("class",cr(n.className&&n.className.baseVal||"",r)));var n,r}))},_r=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(t,n){var r=e.resolveArguments(t,n),i=r[0],o=r[1];e.removeClasses(i,"exit"),e.addClass(i,o?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(t,n)},e.onEntering=function(t,n){var r=e.resolveArguments(t,n),i=r[0],o=r[1]?"appear":"enter";e.addClass(i,o,"active"),e.props.onEntering&&e.props.onEntering(t,n)},e.onEntered=function(t,n){var r=e.resolveArguments(t,n),i=r[0],o=r[1]?"appear":"enter";e.removeClasses(i,o),e.addClass(i,o,"done"),e.props.onEntered&&e.props.onEntered(t,n)},e.onExit=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"appear"),e.removeClasses(n,"enter"),e.addClass(n,"exit","base"),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var n=e.resolveArguments(t)[0];e.addClass(n,"exit","active"),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var n=e.resolveArguments(t)[0];e.removeClasses(n,"exit"),e.addClass(n,"exit","done"),e.props.onExited&&e.props.onExited(t)},e.resolveArguments=function(t,n){return e.props.nodeRef?[e.props.nodeRef.current,t]:[t,n]},e.getClassNames=function(t){var n=e.props.classNames,r="string"==typeof n,i=r?""+(r&&n?n+"-":"")+t:n[t];return{baseClassName:i,activeClassName:r?i+"-active":n[t+"Active"],doneClassName:r?i+"-done":n[t+"Done"]}},e}lr(n,t);var r=n.prototype;return r.addClass=function(t,e,n){var r=this.getClassNames(e)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===e&&"done"===n&&i&&(r+=" "+i),"active"===n&&t&&pr(t),r&&(this.appliedClasses[e][n]=r,vr(t,r))},r.removeClasses=function(t,e){var n=this.appliedClasses[e],r=n.base,i=n.active,o=n.done;this.appliedClasses[e]={},r&&mr(t,r),i&&mr(t,i),o&&mr(t,o)},r.render=function(){var t=this.props,n=(t.classNames,ar(t,["classNames"]));return e(l).createElement(yr,sr({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},n}(e(l).Component);_r.defaultProps={classNames:""},_r.propTypes={};var xr=_r;function br(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}l=o("acw62"),l=o("acw62");function Er(t,e){var n=Object.create(null);return t&&l.Children.map(t,(function(t){return t})).forEach((function(t){n[t.key]=function(t){return e&&(0,l.isValidElement)(t)?e(t):t}(t)})),n}function wr(t,e,n){return null!=n[e]?n[e]:t.props[e]}function Mr(t,e,n){var r=Er(t.children),i=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),o=[];for(var s in t)s in e?o.length&&(i[s]=o,o=[]):o.push(s);var a={};for(var u in e){if(i[u])for(r=0;r<i[u].length;r++){var l=i[u][r];a[i[u][r]]=n(l)}a[u]=n(u)}for(r=0;r<o.length;r++)a[o[r]]=n(o[r]);return a}(e,r);return Object.keys(i).forEach((function(o){var s=i[o];if((0,l.isValidElement)(s)){var a=o in e,u=o in r,c=e[o],h=(0,l.isValidElement)(c)&&!c.props.in;!u||a&&!h?u||!a||h?u&&a&&(0,l.isValidElement)(c)&&(i[o]=(0,l.cloneElement)(s,{onExited:n.bind(null,s),in:c.props.in,exit:wr(s,"exit",t),enter:wr(s,"enter",t)})):i[o]=(0,l.cloneElement)(s,{in:!1}):i[o]=(0,l.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:wr(s,"exit",t),enter:wr(s,"enter",t)})}})),i}var Sr=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},Cr=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(br(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}lr(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,e){var n,r,i=e.children,o=e.handleExited;return{children:e.firstRender?(n=t,r=o,Er(n.children,(function(t){return(0,l.cloneElement)(t,{onExited:r.bind(null,t),in:!0,appear:wr(t,"appear",n),enter:wr(t,"enter",n),exit:wr(t,"exit",n)})}))):Mr(t,i,o),firstRender:!1}},r.handleExited=function(t,e){var n=Er(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=sr({},e.children);return delete n[t.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=ar(t,["component","childFactory"]),o=this.state.contextValue,s=Sr(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e(l).createElement(fr.Provider,{value:o},s):e(l).createElement(fr.Provider,{value:o},e(l).createElement(n,i,s))},n}(e(l).Component);Cr.propTypes={},Cr.defaultProps={component:"div",childFactory:function(t){return t}};var Nr=Cr,Ir=(l=o("acw62"),l=o("acw62"),l=o("acw62"),l=o("acw62"),Object.create),Pr=Object.defineProperty,Lr=Object.getOwnPropertyDescriptor,Or=Object.getOwnPropertyNames,Rr=Object.getPrototypeOf,kr=Object.prototype.hasOwnProperty,Tr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ar=(t,e,n)=>(n=null!=t?Ir(Rr(t)):{},((t,e,n,r)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let i of Or(e))!kr.call(t,i)&&i!==n&&Pr(t,i,{get:()=>e[i],enumerable:!(r=Lr(e,i))||r.enumerable});return t})(!e&&t&&t.__esModule?n:Pr(n,"default",{value:t,enumerable:!0}),t)),Dr=Tr(((t,e)=>{e.exports=function(){this.__data__=[],this.size=0}})),Fr=Tr(((t,e)=>{e.exports=function(t,e){return t===e||t!=t&&e!=e}})),zr=Tr(((t,e)=>{var n=Fr();e.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}})),jr=Tr(((t,e)=>{var n=zr(),r=Array.prototype.splice;e.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0)&&(i==e.length-1?e.pop():r.call(e,i,1),--this.size,!0)}})),qr=Tr(((t,e)=>{var n=zr();e.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}})),Gr=Tr(((t,e)=>{var n=zr();e.exports=function(t){return n(this.__data__,t)>-1}})),Br=Tr(((t,e)=>{var n=zr();e.exports=function(t,e){var r=this.__data__,i=n(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}})),Ur=Tr(((t,e)=>{var n=Dr(),r=jr(),i=qr(),o=Gr(),s=Br();function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=n,a.prototype.delete=r,a.prototype.get=i,a.prototype.has=o,a.prototype.set=s,e.exports=a})),Vr=Tr(((t,e)=>{var n=Ur();e.exports=function(){this.__data__=new n,this.size=0}})),Xr=Tr(((t,e)=>{e.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}})),Yr=Tr(((t,e)=>{e.exports=function(t){return this.__data__.get(t)}})),Wr=Tr(((t,e)=>{e.exports=function(t){return this.__data__.has(t)}})),Hr=Tr(((t,e)=>{var r="object"==typeof n&&n&&n.Object===Object&&n;e.exports=r})),Qr=Tr(((t,e)=>{var n=Hr(),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();e.exports=i})),$r=Tr(((t,e)=>{var n=Qr().Symbol;e.exports=n})),Kr=Tr(((t,e)=>{var n=$r(),r=Object.prototype,i=r.hasOwnProperty,o=r.toString,s=n?n.toStringTag:void 0;e.exports=function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch{}var a=o.call(t);return r&&(e?t[s]=n:delete t[s]),a}})),Jr=Tr(((t,e)=>{var n=Object.prototype.toString;e.exports=function(t){return n.call(t)}})),Zr=Tr(((t,e)=>{var n=$r(),r=Kr(),i=Jr(),o=n?n.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):i(t)}})),ti=Tr(((t,e)=>{e.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}})),ei=Tr(((t,e)=>{var n=Zr(),r=ti();e.exports=function(t){if(!r(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}})),ni=Tr(((t,e)=>{var n=Qr()["__core-js_shared__"];e.exports=n})),ri=Tr(((t,e)=>{var n,r=ni(),i=(n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(t){return!!i&&i in t}})),ii=Tr(((t,e)=>{var n=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return n.call(t)}catch{}try{return t+""}catch{}}return""}})),oi=Tr(((t,e)=>{var n=ei(),r=ri(),i=ti(),o=ii(),s=/^\[object .+?Constructor\]$/,a=Function.prototype,u=Object.prototype,l=a.toString,c=u.hasOwnProperty,h=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!i(t)||r(t))&&(n(t)?h:s).test(o(t))}})),si=Tr(((t,e)=>{e.exports=function(t,e){return t?.[e]}})),ai=Tr(((t,e)=>{var n=oi(),r=si();e.exports=function(t,e){var i=r(t,e);return n(i)?i:void 0}})),ui=Tr(((t,e)=>{var n=ai()(Qr(),"Map");e.exports=n})),li=Tr(((t,e)=>{var n=ai()(Object,"create");e.exports=n})),ci=Tr(((t,e)=>{var n=li();e.exports=function(){this.__data__=n?n(null):{},this.size=0}})),hi=Tr(((t,e)=>{e.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}})),fi=Tr(((t,e)=>{var n=li(),r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return r.call(e,t)?e[t]:void 0}})),pi=Tr(((t,e)=>{var n=li(),r=Object.prototype.hasOwnProperty;e.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:r.call(e,t)}})),di=Tr(((t,e)=>{var n=li();e.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}})),gi=Tr(((t,e)=>{var n=ci(),r=hi(),i=fi(),o=pi(),s=di();function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=n,a.prototype.delete=r,a.prototype.get=i,a.prototype.has=o,a.prototype.set=s,e.exports=a})),yi=Tr(((t,e)=>{var n=gi(),r=Ur(),i=ui();e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||r),string:new n}}})),vi=Tr(((t,e)=>{e.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}})),mi=Tr(((t,e)=>{var n=vi();e.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}})),_i=Tr(((t,e)=>{var n=mi();e.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}})),xi=Tr(((t,e)=>{var n=mi();e.exports=function(t){return n(this,t).get(t)}})),bi=Tr(((t,e)=>{var n=mi();e.exports=function(t){return n(this,t).has(t)}})),Ei=Tr(((t,e)=>{var n=mi();e.exports=function(t,e){var r=n(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}})),wi=Tr(((t,e)=>{var n=yi(),r=_i(),i=xi(),o=bi(),s=Ei();function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=n,a.prototype.delete=r,a.prototype.get=i,a.prototype.has=o,a.prototype.set=s,e.exports=a})),Mi=Tr(((t,e)=>{var n=Ur(),r=ui(),i=wi();e.exports=function(t,e){var o=this.__data__;if(o instanceof n){var s=o.__data__;if(!r||s.length<199)return s.push([t,e]),this.size=++o.size,this;o=this.__data__=new i(s)}return o.set(t,e),this.size=o.size,this}})),Si=Tr(((t,e)=>{var n=Ur(),r=Vr(),i=Xr(),o=Yr(),s=Wr(),a=Mi();function u(t){var e=this.__data__=new n(t);this.size=e.size}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u})),Ci=Tr(((t,e)=>{e.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}})),Ni=Tr(((t,e)=>{e.exports=function(t){return this.__data__.has(t)}})),Ii=Tr(((t,e)=>{var n=wi(),r=Ci(),i=Ni();function o(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=i,e.exports=o})),Pi=Tr(((t,e)=>{e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}})),Li=Tr(((t,e)=>{e.exports=function(t,e){return t.has(e)}})),Oi=Tr(((t,e)=>{var n=Ii(),r=Pi(),i=Li();e.exports=function(t,e,o,s,a,u){var l=1&o,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t),p=u.get(e);if(f&&p)return f==e&&p==t;var d=-1,g=!0,y=2&o?new n:void 0;for(u.set(t,e),u.set(e,t);++d<c;){var v=t[d],m=e[d];if(s)var _=l?s(m,v,d,e,t,u):s(v,m,d,t,e,u);if(void 0!==_){if(_)continue;g=!1;break}if(y){if(!r(e,(function(t,e){if(!i(y,e)&&(v===t||a(v,t,o,s,u)))return y.push(e)}))){g=!1;break}}else if(v!==m&&!a(v,m,o,s,u)){g=!1;break}}return u.delete(t),u.delete(e),g}})),Ri=Tr(((t,e)=>{var n=Qr().Uint8Array;e.exports=n})),ki=Tr(((t,e)=>{e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}})),Ti=Tr(((t,e)=>{e.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}})),Ai=Tr(((t,e)=>{var n=$r(),r=Ri(),i=Fr(),o=Oi(),s=ki(),a=Ti(),u=n?n.prototype:void 0,l=u?u.valueOf:void 0;e.exports=function(t,e,n,u,c,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var d=1&u;if(p||(p=a),t.size!=e.size&&!d)return!1;var g=f.get(t);if(g)return g==e;u|=2,f.set(t,e);var y=o(p(t),p(e),u,c,h,f);return f.delete(t),y;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}})),Di=Tr(((t,e)=>{e.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}})),Fi=Tr(((t,e)=>{var n=Array.isArray;e.exports=n})),zi=Tr(((t,e)=>{var n=Di(),r=Fi();e.exports=function(t,e,i){var o=e(t);return r(t)?o:n(o,i(t))}})),ji=Tr(((t,e)=>{e.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}})),qi=Tr(((t,e)=>{e.exports=function(){return[]}})),Gi=Tr(((t,e)=>{var n=ji(),r=qi(),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),n(o(t),(function(e){return i.call(t,e)})))}:r;e.exports=s})),Bi=Tr(((t,e)=>{e.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}})),Ui=Tr(((t,e)=>{e.exports=function(t){return null!=t&&"object"==typeof t}})),Vi=Tr(((t,e)=>{var n=Zr(),r=Ui();e.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}})),Xi=Tr(((t,e)=>{var n=Vi(),r=Ui(),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,a=n(function(){return arguments}())?n:function(t){return r(t)&&o.call(t,"callee")&&!s.call(t,"callee")};e.exports=a})),Yi=Tr(((t,e)=>{e.exports=function(){return!1}})),Wi=Tr(((t,e)=>{var n=Qr(),r=Yi(),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i?n.Buffer:void 0,a=(s?s.isBuffer:void 0)||r;e.exports=a})),Hi=Tr(((t,e)=>{var n=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var r=typeof t;return!!(e=e??9007199254740991)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}})),Qi=Tr(((t,e)=>{e.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}})),$i=Tr(((t,e)=>{var n=Zr(),r=Qi(),i=Ui(),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(t){return i(t)&&r(t.length)&&!!o[n(t)]}})),Ki=Tr(((t,e)=>{e.exports=function(t){return function(e){return t(e)}}})),Ji=Tr(((t,e)=>{var n=Hr(),r="object"==typeof t&&t&&!t.nodeType&&t,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===r&&n.process,s=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})),Zi=Tr(((t,e)=>{var n=$i(),r=Ki(),i=Ji(),o=i&&i.isTypedArray,s=o?r(o):n;e.exports=s})),to=Tr(((t,e)=>{var n=Bi(),r=Xi(),i=Fi(),o=Wi(),s=Hi(),a=Zi(),u=Object.prototype.hasOwnProperty;e.exports=function(t,e){var l=i(t),c=!l&&r(t),h=!l&&!c&&o(t),f=!l&&!c&&!h&&a(t),p=l||c||h||f,d=p?n(t.length,String):[],g=d.length;for(var y in t)(e||u.call(t,y))&&(!p||!("length"==y||h&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,g)))&&d.push(y);return d}})),eo=Tr(((t,e)=>{var n=Object.prototype;e.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}})),no=Tr(((t,e)=>{e.exports=function(t,e){return function(n){return t(e(n))}}})),ro=Tr(((t,e)=>{var n=no()(Object.keys,Object);e.exports=n})),io=Tr(((t,e)=>{var n=eo(),r=ro(),i=Object.prototype.hasOwnProperty;e.exports=function(t){if(!n(t))return r(t);var e=[];for(var o in Object(t))i.call(t,o)&&"constructor"!=o&&e.push(o);return e}})),oo=Tr(((t,e)=>{var n=ei(),r=Qi();e.exports=function(t){return null!=t&&r(t.length)&&!n(t)}})),so=Tr(((t,e)=>{var n=to(),r=io(),i=oo();e.exports=function(t){return i(t)?n(t):r(t)}})),ao=Tr(((t,e)=>{var n=zi(),r=Gi(),i=so();e.exports=function(t){return n(t,i,r)}})),uo=Tr(((t,e)=>{var n=ao(),r=Object.prototype.hasOwnProperty;e.exports=function(t,e,i,o,s,a){var u=1&i,l=n(t),c=l.length;if(c!=n(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:r.call(e,f)))return!1}var p=a.get(t),d=a.get(e);if(p&&d)return p==e&&d==t;var g=!0;a.set(t,e),a.set(e,t);for(var y=u;++h<c;){var v=t[f=l[h]],m=e[f];if(o)var _=u?o(m,v,f,e,t,a):o(v,m,f,t,e,a);if(!(void 0===_?v===m||s(v,m,i,o,a):_)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var x=t.constructor,b=e.constructor;x!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b)&&(g=!1)}return a.delete(t),a.delete(e),g}})),lo=Tr(((t,e)=>{var n=ai()(Qr(),"DataView");e.exports=n})),co=Tr(((t,e)=>{var n=ai()(Qr(),"Promise");e.exports=n})),ho=Tr(((t,e)=>{var n=ai()(Qr(),"Set");e.exports=n})),fo=Tr(((t,e)=>{var n=ai()(Qr(),"WeakMap");e.exports=n})),po=Tr(((t,e)=>{var n=lo(),r=ui(),i=co(),o=ho(),s=fo(),a=Zr(),u=ii(),l="[object Map]",c="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",d=u(n),g=u(r),y=u(i),v=u(o),m=u(s),_=a;(n&&_(new n(new ArrayBuffer(1)))!=p||r&&_(new r)!=l||i&&_(i.resolve())!=c||o&&_(new o)!=h||s&&_(new s)!=f)&&(_=function(t){var e=a(t),n="[object Object]"==e?t.constructor:void 0,r=n?u(n):"";if(r)switch(r){case d:return p;case g:return l;case y:return c;case v:return h;case m:return f}return e}),e.exports=_})),go=Tr(((t,e)=>{var n=Si(),r=Oi(),i=Ai(),o=uo(),s=po(),a=Fi(),u=Wi(),l=Zi(),c="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(t,e,d,g,y,v){var m=a(t),_=a(e),x=m?h:s(t),b=_?h:s(e),E=(x=x==c?f:x)==f,w=(b=b==c?f:b)==f,M=x==b;if(M&&u(t)){if(!u(e))return!1;m=!0,E=!1}if(M&&!E)return v||(v=new n),m||l(t)?r(t,e,d,g,y,v):i(t,e,x,d,g,y,v);if(!(1&d)){var S=E&&p.call(t,"__wrapped__"),C=w&&p.call(e,"__wrapped__");if(S||C){var N=S?t.value():t,I=C?e.value():e;return v||(v=new n),y(N,I,d,g,v)}}return!!M&&(v||(v=new n),o(t,e,d,g,y,v))}})),yo=Tr(((t,e)=>{var n=go(),r=Ui();e.exports=function t(e,i,o,s,a){return e===i||(null==e||null==i||!r(e)&&!r(i)?e!=e&&i!=i:n(e,i,o,s,t,a))}})),vo=Tr(((t,e)=>{var n=yo();e.exports=function(t,e){return n(t,e)}})),mo=["ctrl","shift","alt","meta","mod"],_o={esc:"escape",return:"enter",left:"arrowleft",up:"arrowup",right:"arrowright",down:"arrowdown"};function xo(t,e=","){return"string"==typeof t?t.split(e):t}function bo(t,e="+"){let n=t.toLocaleLowerCase().split(e).map((t=>t.trim())).map((t=>_o[t]||t));return{...{alt:n.includes("alt"),ctrl:n.includes("ctrl"),shift:n.includes("shift"),meta:n.includes("meta"),mod:n.includes("mod")},keys:n.filter((t=>!mo.includes(t)))}}function Eo({target:t},e=!1){let n=t&&t.tagName;return e instanceof Array?Boolean(n&&e&&e.some((t=>t.toLowerCase()===n.toLowerCase()))):Boolean(n&&e&&!0===e)}var wo=(0,l.createContext)(void 0);var Mo=(0,l.createContext)({hotkeys:[],enabledScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),So=Ar(vo());var Co=t=>{t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()};function No(t,e,n,r){let i=(0,l.useRef)(null),{current:o}=(0,l.useRef)(new Set),s=n instanceof Array?r instanceof Array?void 0:r:n,a=n instanceof Array?n:r instanceof Array?r:[],u=(0,l.useCallback)(e,[...a]),c=function(t){let e=(0,l.useRef)(void 0);return(0,So.default)(e.current,t)||(e.current=t),e.current}(s),{enabledScopes:h}=(0,l.useContext)(Mo),f=(0,l.useContext)(wo);return(0,l.useLayoutEffect)((()=>{if(!1===c?.enabled||!function(t,e){return 0===t.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!e||t.some((t=>e.includes(t)))||t.includes("*")}(h,c?.scopes))return;let e=e=>{if(!function(t){return Eo(t,["input","textarea","select"])}(e)||Eo(e,c?.enableOnFormTags)){if(null!==i.current&&document.activeElement!==i.current&&!i.current.contains(document.activeElement))return void Co(e);e.target?.isContentEditable&&!c?.enableOnContentEditable||xo(t,c?.splitKey).forEach((t=>{let n=bo(t,c?.combinationKey);if(((t,e,n)=>{let{alt:r,ctrl:i,meta:o,mod:s,shift:a,keys:u}=e,{altKey:l,ctrlKey:c,metaKey:h,shiftKey:f,key:p,code:d}=t,g=d.toLowerCase().replace("key",""),y=p.toLowerCase();if(l!==r&&"alt"!==y||f!==a&&"shift"!==y)return!1;if(s){if(!h&&!c)return!1}else if(h!==o&&"meta"!==g||c!==i&&"ctrl"!==g)return!1;return!(!u||1!==u.length||!u.includes(y)&&!u.includes(g))||(u?u.every((t=>n.has(t))):!u)})(e,n,o)||n.keys?.includes("*")){if(function(t,e,n){("function"==typeof n&&n(t,e)||!0===n)&&t.preventDefault()}(e,n,c?.preventDefault),!function(t,e,n){return"function"==typeof n?n(t,e):!0===n||void 0===n}(e,n,c?.enabled))return void Co(e);u(e,n)}}))}},n=t=>{o.add(t.key.toLowerCase()),(void 0===c?.keydown&&!0!==c?.keyup||c?.keydown)&&e(t)},r=t=>{"meta"!==t.key.toLowerCase()?o.delete(t.key.toLowerCase()):o.clear(),c?.keyup&&e(t)};return(i.current||document).addEventListener("keyup",r),(i.current||document).addEventListener("keydown",n),f&&xo(t,c?.splitKey).forEach((t=>f.addHotkey(bo(t,c?.combinationKey)))),()=>{(i.current||document).removeEventListener("keyup",r),(i.current||document).removeEventListener("keydown",n),f&&xo(t,c?.splitKey).forEach((t=>f.removeHotkey(bo(t,c?.combinationKey))))}}),[t,u,c,h]),i}Ar(vo());var Io=new Set;window.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("keydown",(t=>{!function(t){(Array.isArray(t)?t:[t]).forEach((t=>Io.add(bo(t))))}(t.key)})),document.addEventListener("keyup",(t=>{!function(t){(Array.isArray(t)?t:[t]).forEach((t=>{let e=bo(t);for(let t of Io)t.keys?.every((t=>e.keys?.includes(t)))&&Io.delete(t)}))}(t.key)}))}));const Po=({lngLat:t,onClose:e,onSwitch:n,trackHint:r,onMove:i,backToCityLens:o})=>{const{find:a,findLinePoints:u}=(0,l.useContext)(S),[c,h]=(0,l.useState)(!1),[f,p]=(0,l.useState)(!1),[d,g]=(0,l.useState)(!1),y=(0,l.useRef)();(0,l.useEffect)((()=>{let t=setTimeout((()=>{c&&b&&x(b)}),550);return()=>clearTimeout(t)})),(0,l.useEffect)((()=>{let e=tr(t,v,r);x(e)}),[t,r]);const v=(0,l.useMemo)((()=>a({lngLat:t,radius:5e3})),[t,r]),[m,_]=(0,l.useState)((()=>tr(t,v,r)));(0,l.useEffect)((()=>{d&&setTimeout((()=>{let t=0,e=0,n=120;y.current&&(t=y.current.getYaw(),e=y.current.getPitch(),n=y.current.getHfov()),y.current=window.pannellum.viewer("panorama",{type:"equirectangular",autoLoad:!0,panorama:m?.properties.photo_url,yaw:t,pitch:e,hfov:n})}))}),[d,m]);const x=t=>{console.log("CHANGE POINT",t),t?(_(t),t?.properties.panoramic&&g(!0),i(t)):e()};No(["up","right"],(()=>{!c&&b&&x(b)}),{},[m]),No(["down","left"],(()=>{!c&&E&&x(E)}),{},[m]);const{nextPoint:b,prevPoint:E}=(0,l.useMemo)((()=>{if(!m)return{nextPoint:void 0,prevPoint:void 0};const t=u(m);if(!t)return{nextPoint:void 0,prevPoint:void 0};const e=t.findIndex((({properties:t})=>t===m.properties)),n=t[e+1],r=n?{lngLat:n.geometry.coordinates,properties:n.properties}:void 0;for(let n=e-1;n<e+2;n++)n>=0&&n<t.length&&((new Image).src=t[n].properties.photo_url);const i=t[e-1];return{nextPoint:r,prevPoint:i?{lngLat:i.geometry.coordinates,properties:i.properties}:void 0}}),[m]);if(!m)return null;const[w,M]=(0,l.useState)([]);(0,l.useEffect)((()=>{if(c)M([]);else{(async()=>{const t=m.properties.id,e=await Nn(t),r=await e.json();let i=[];for(let t of r.features)i.push({id:t.properties.track_id,key:t.properties.track_id,date:t.properties.capture_time,url:t.properties.photo_url,lngLat:[t.geometry.coordinates[1],t.geometry.coordinates[0]],onSwitch:n});M(i)})().catch(console.error)}}),[c,m]);const C=m.properties;return(0,s.jsxs)("div",{className:"z-aE5a_trackPanel",children:[(0,s.jsx)("div",{className:"z-aE5a_image",children:d?(0,s.jsx)("div",{id:"panorama"}):(0,s.jsx)(Nr,{children:(0,s.jsx)(xr,{classNames:{enter:"z-aE5a_frameTransitionEnter",exit:"z-aE5a_frameTransitionExit"},timeout:500,children:(0,s.jsx)("img",{src:m.properties.photo_url})},m.properties.photo_url)})}),(0,s.jsx)("div",{className:"z-aE5a_controls",children:(0,s.jsxs)("div",{className:"z-aE5a_buttons",children:[(0,s.jsx)("button",{onClick:o,children:"Back to CityLensWeb"}),(0,s.jsx)("button",{onClick:e,children:"Expand map"}),E&&(0,s.jsx)("button",{onClick:()=>E&&x(E),children:"Backward"}),b&&(0,s.jsx)("button",{onClick:()=>b&&x(b),children:" Forward "}),c?(0,s.jsx)("button",{onClick:()=>h(!1),children:"Stop"}):(0,s.jsx)("button",{onClick:()=>h(!0),children:"Run"})]})}),(0,s.jsxs)("div",{className:f?"z-aE5a_similarPanel z-aE5a_hidden":"z-aE5a_similarPanel",children:[(0,s.jsx)("button",{onClick:()=>p(!f),children:f?"Show similar tracks":"Hide similar tracks"}),(0,s.jsx)("div",{className:"z-aE5a_similar",children:w.length?w.map(Lo):(0,s.jsx)("span",{children:"Stop to search for similar tracks"})})]}),(0,s.jsx)("div",{className:"z-aE5a_info",children:(0,s.jsxs)("dl",{children:[(0,s.jsx)("dt",{children:"Track"}),(0,s.jsx)("dd",{children:C.track_id}),(0,s.jsx)("dt",{children:"Coordinates"}),(0,s.jsxs)("dd",{children:["POINT (",m.lngLat[0],", ",m.lngLat[1],")"]}),(0,s.jsx)("dt",{children:"Capture time"}),(0,s.jsx)("dd",{children:m.properties.capture_time}),(0,s.jsx)("dt",{children:"CityLens Frame ID"}),(0,s.jsx)("dd",{children:(0,s.jsx)("a",{target:"blank_",href:`/frames/${C.id}`,children:C.id})})]})})]})};function Lo(t){return(0,s.jsxs)("div",{className:"z-aE5a_similarTrack",onClick:()=>t.onSwitch(t.lngLat,t.id),children:[(0,s.jsx)("img",{src:t.url}),(0,s.jsx)("label",{children:t.date})]})}a(document.body).render((0,s.jsx)((()=>{const t=(0,l.useRef)(!1);(0,l.useEffect)((()=>{t.current=!0}),[]);let e=window.initialProject??"Novosibirsk",n=window.projectList.find((t=>t.name==e))?.coords||[];const r=new URLSearchParams(window.location.search).get("point");if(!t.current&&r)try{let t=r.split(",").map((t=>Number.parseFloat(t)));n=t,setTimeout((()=>{v(t)}),3e3)}catch(t){console.log(t)}const[i,o]=(0,l.useState)(e),[a,u]=(0,l.useState)(n),[c,h]=(0,l.useState)(0),f=()=>{window.location.href="/"},p={center:a,zoom:15,bounds:{southWest:a,northEast:a}},[d,g]=(0,l.useState)(p),[y,v]=(0,l.useState)(),m=t=>{if(t){const e=new URLSearchParams;e.set("point",t.join(",")),window.history.replaceState(null,document.title,window.location.pathname+"?"+e.toString())}else console.log("remove point from url"),window.history.replaceState(null,document.title,window.location.pathname);v(t)},[_,x]=(0,l.useState)(),[b,E]=(0,l.useState)(),w=void 0===y?"_3xoE1a_map":"_3xoE1a_map _3xoE1a_minimized";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:"map",className:w}),(0,s.jsx)(An,{mapState:d,children:(0,s.jsxs)(nr,{initialState:p,onClick:({lngLat:t})=>{x(void 0),m(t)},onMoveEnd:({center:t,zoom:e,bounds:n})=>g({center:t,zoom:e,bounds:n}),onMouseMove:({lngLat:t})=>E(t),onMoveStart:()=>{},center:a,centerAzimuth:c,minimized:void 0!==y,children:[(0,s.jsx)("select",{className:"_3xoE1a_project",value:i,onChange:t=>(t=>{o(t);const e=window.projectList.find((e=>e.name==t))?.coords||[];u([...e])})(t.target.value),children:window.projectList.map((t=>(0,s.jsx)("option",{value:t.name,children:t.name},t.name)))}),b&&(0,s.jsx)(or,{lngLat:b}),y?(0,s.jsx)(Po,{lngLat:y,trackHint:_,onClose:()=>{x(void 0),m(void 0)},backToCityLens:f,onSwitch:(t,e)=>{x(e),m(t)},onMove:t=>{t&&(u(t.lngLat),h(t.properties.azimuth),E(void 0))}}):(0,s.jsx)("div",{className:"_3xoE1a_controls",children:(0,s.jsx)("div",{className:"_3xoE1a_buttons",children:(0,s.jsx)("button",{onClick:f,children:"Back to CityLensWeb"})})}),(0,s.jsx)(Fn,{zoom:d.zoom})]})})]})}),{}));
//# sourceMappingURL=index.bdaf78a6.js.map
